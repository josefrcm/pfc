#LyX 1.5.4 created this file. For more info see http://www.lyx.org/
\lyxformat 276
\begin_document
\begin_header
\textclass scrbook
\begin_preamble
 \usepackage[colorlinks,linkcolor=black,urlcolor=blue,citecolor=black,pdfauthor={José Franco Campos}]{hyperref}
\DeclareFontFamily{OT1}{pzc}{}
\DeclareFontShape{OT1}{pzc}{m}{it}{<-> s * [1.4] pzcmi8t}{}
\DeclareMathAlphabet{\mathpzc}{OT1}{pzc}{m}{it}
%\usepackage{indentfirst}
\setlength{\parindent}{1cm}
\usepackage{colortbl}
\definecolor{lightgray}{gray}{0.9}
\usepackage{multirow}
\usepackage{listings}
\usepackage{color}
\definecolor{darkgreen}{rgb}{0.0, 0.5, 0.0}
\lstset{
    language=Haskell,
    %basicstyle=\footnotesize\ttfamily,
    keywordstyle=\color{blue}\bfseries,
    identifierstyle=\color{black},
    commentstyle=\color{darkgreen},
    stringstyle=\ttfamily,
    showspaces=false,
    showtabs=false,
    showstringspaces=false,
    tabsize=8,
    extendedchars=true
    }
\end_preamble
\language spanish
\inputencoding auto
\font_roman palatino
\font_sans default
\font_typewriter default
\font_default_family default
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100
\graphics default
\paperfontsize 11
\spacing onehalf
\papersize a4paper
\use_geometry true
\use_amsmath 1
\use_esint 0
\cite_engine natbib_numerical
\use_bibtopic false
\paperorientation portrait
\leftmargin 30mm
\topmargin 25mm
\rightmargin 25mm
\bottommargin 35mm
\footskip 1cm
\secnumdepth 3
\tocdepth 2
\paragraph_separation indent
\defskip medskip
\quotes_language swedish
\papercolumns 1
\papersides 2
\paperpagestyle plain
\tracking_changes false
\output_changes false
\author "" 
\author "" 
\end_header

\begin_body

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Standard


\backslash
frontmatter
\end_layout

\end_inset


\end_layout

\begin_layout Chapter*
Agradecimientos
\end_layout

\begin_layout Standard
Gracias a mis padres, por su paciencia y por haberme permitido desarrollar
 mi afición por la informática, y a mi hermano Rafa, por haberme tenido
 que aguantar estos años.
 Todo el dinero invertido durante años en hardware, libros y revistas ha
 dado sus frutos.
\end_layout

\begin_layout Standard
Tengo que dar también las gracias a mis compañeros de clase, que han hecho
 la carrera mucho más llevadera.
 César, Mario, Antonio, Miguel, Pepe, Carlos, José, Hugo, Román...
 Sin vosotros, todas esas horas en clase o en la cafetería no hubieran sido
 lo mismo.
\end_layout

\begin_layout Standard
Gracias a Alfonso, por haber sido el mejor tutor de proyecto que podría
 desear, y a todos los buenos profesores que han sabido impartir asignaturas
 interesantes y llenas de conocimientos.
\end_layout

\begin_layout Standard
Por último, sólo me queda dar las gracias a la comunidad de Haskell, por
 desarrollar un lenguaje y unas herramientas excelentes y libres.
 Es el lenguaje que más ha cambiado mi forma de pensar desde que empecé
 con BASIC hace ya 14 años.
\end_layout

\begin_layout Standard
\begin_inset LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Standard
\begin_inset FloatList figure

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Standard


\backslash
mainmatter
\end_layout

\end_inset


\end_layout

\begin_layout Part
Presentación
\end_layout

\begin_layout Chapter
Introducción y objetivos
\end_layout

\begin_layout Standard
Cuando el protocolo IPv4 se estandarizó a principios de los años 80, el
 uso de Internet se limitaba a universidades y organismos gubernamentales.
 Esto motivó algunas decisiones de diseño, como usar direcciones de sólo
 32 bits.
 Sin embargo, al empezar a extenderse su uso comercial, el número y tamaño
 de las redes aumentó de manera explosiva.
 Esto ha provocado que el número de direcciones empiece a agotarse.
 Aunque algunos mecanismos como CIDR, NAT o el hosting virtual han logrado
 aliviar parcialmente el problema, los últimos estudios indican que el espacio
 de direcciones se agotará entre febrero del 2010 y mayo del 2011.
\end_layout

\begin_layout Standard
Para resolver este y otros problemas, el IETF empezó a trabajar en la definición
 empezó a trabajar a mediados de los años 90 en la siguiente revisión del
 protocolo IP, conocido como IPv6
\begin_inset Foot
status open

\begin_layout Standard
La versión 5 fue un protocolo experimental para transmisión de flujos de
 datos en tiempo real.
 No se llegó a usar nunca de manera pública.
\end_layout

\end_inset

.
 Esta nueva versión ofrece ventajas significativas, como un espacio de direccion
es de 128, un enrutado más sencillo, o un formato de cabecera más flexible.
 Por desgracia, estas mejoras se obtienen a costa de perder la compatibilidad:
 los routers IPv4 no son capaces de procesar paquetes IPv6.
 Esto implica que, para poder aprovechar todas las ventajas del nuevo protocolo,
 habría que actualizar todos los routers, lo que supone un coste prohibitivo.
\end_layout

\begin_layout Standard
Para facilitar la migración se han definido varios mecanismos de transición,
 en forma de túneles que encapsulan una versión de IP dentro de otra, y
 sistemas de traducción de paquetes.
 De esta manera, el paso de IPv4 a IPv6 se puede hacer de manera gradual.
 Aun así, en una red grande puede ser difícil elegir que mecanismos usar.
 Por tanto, interesa desarrollar una metodología que permita formalizar
 la toma de decisiones, y de esta manera poder desarrollar una herramienta
 informática que ayude al administrador de red.
\end_layout

\begin_layout Standard
Este trabajo ya se llevó a cabo en el proyecto fin de carrera de Jorge García
 Domínguez.
 En él se obtuvo una aplicación, escrita en el lenguaje Java, que permitía
 resolver este problema.
 También se dejaron una serie de propuestas para futuras mejoras.
 El objetivo del presente proyecto es completar esas tareas que quedaron
 pendientes, usando además el lenguaje de programación funcional Haskell.
 Los lenguajes funcionales se remontan al Cálculo Lambda, por lo que su
 historia es tan vieja como la de los lenguajes imperativos.
 Pese a ello, su uso a nivel comercial ha sido reducido, por lo que hay
 un gran desconocimiento en torno a ellos.
 Implementando nuestra aplicación en Haskell pretendemos estudiar su viabilidad
 a la hora de implementar aplicaciones complejas, y comparar su productividad
 frente a los lenguajes imperativos.
\end_layout

\begin_layout Standard

\newpage

\end_layout

\begin_layout Standard
En resumen, los objetivos concretos del proyecto son:
\end_layout

\begin_layout Itemize
Estudiar las ventajas que aporta IPv6 con respecto a IPv4.
\end_layout

\begin_layout Itemize
Estudiar los mecanismos existentes para migrar de IPv4 a IPv6.
\end_layout

\begin_layout Itemize
Formalizar matemáticamente el problema, de tal manera que pueda ser tratado
 por un ordenador.
\end_layout

\begin_layout Itemize
Estudiar la viabilidad de los lenguajes de programación funcionales para
 hacer frente a este tipo de problemas.
\end_layout

\begin_layout Itemize
Desarrollar una aplicación que permita a un administrador de red la ruta
 óptima dentro de una red heterogénea.
\end_layout

\begin_layout Itemize
Analizar el resultado obtenido, y decidir si recomendar el uso de Haskell
 en desarrollos futuros.
\end_layout

\begin_layout Part
Estudio del problema
\end_layout

\begin_layout Chapter
Limitaciones de IPv4
\end_layout

\begin_layout Standard
IPv4 fue diseñado para trabajar con redes más pequeñas de las que existen
 hoy en día.
 Su principal limitación es el reducido espacio de direcciones.
 Mientras que en los Estados Unidos, que es donde surgió Internet, esto
 no es un problema, los países que entraron tarde se encuentran con que
 reciben bloques de direcciones muy pequeños en comparación con su población.
\end_layout

\begin_layout Standard
IPv4 utiliza direcciones de 32 bits, lo que ofrece un total de 4.294.967.296
 (
\begin_inset Formula $2^{32}$
\end_inset

) direcciones.
 Sin embargo, no todas las direcciones pueden usarse, ya que parte del espacio
 está reservado para redes locales, grupos de multicasting, y extensiones
 futuras.
 El espacio restante se asigna de manera jerárquica, por lo que algunas
 direcciones se desperdician.
\end_layout

\begin_layout Standard
En el protocolo IP las direcciones se dividen en dos partes: el identificador
 de la red, y el identificador del nodo.
 Originalmente estos campos tenían un ancho de 8 y 24 bits respectivamente,
 pero pronto se vio que 256 redes era una cantidad muy reducida.
 Para superar este límite, se definió el direccionamiento por clases, que
 divide el espacio de direcciones en cinco clases (A, B, C, D, y E), cada
 una de las cuales se identifica por un prefijo:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/01-clases.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Esquema de direccionamiento IPv4 por clases
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Este esquema es muy sencillo de implementar, pero tiene el inconveniente
 de que desperdicia muchas direcciones.
 El bloque asignable más pequeño es de 256 direcciones, por lo que una red
 que tuviera, por ejemplo, 30 nodos, desaprovecharía el 88% del espacio.
 Para mitigar este problema, en 1993 se introdujo el esquema CIDR (
\emph on
classless interdomain routing
\emph default
), que permite dividir las direcciones en segmentos de longitud variable.
 De esta manera, nuestra red de 30 nodos recibiría un bloque de 5 bits,
 es decir, 32 direcciones.
 Un bloque se puede a su vez subdividir en varios bloques más pequeños,
 y varios bloques contiguos pertenecientes a la misma organización se pueden
 agregar en un superbloque, con el objetivo de reducir el número de entradas
 en las tablas de enrutado.
\newpage

\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/02-cidr.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Ejemplo de direccionamiento CIDR
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Aún así, el número de direcciones sigue siendo limitado.
 Para evitar tener que volver a modificar la estructura de la red, se han
 implementado varias soluciones software:
\end_layout

\begin_layout Itemize
Las direcciones pertenecientes al espacio reservado para redes locales no
 se pueden direccionar de manera global.
 Esto permite que varias redes privadas compartan el mismo rango de direcciones
 sin que surja ningún conflicto entre ellas.
\end_layout

\begin_layout Itemize
La traducción de direcciones (NAT, 
\emph on
network address translation
\emph default
) es un mecanismo que permite que todos los nodos de una red local accedan
 a Internet por medio de una única dirección pública.
 El router que conecta la red se encarga de reescribir las direcciones presentes
 en las cabeceras de los paquetes, identificando los nodos de la red local
 por medio de los puertos TCP/UDP.
 Este mecanismo se usa mucho en las redes domésticas y de pequeñas empresas.
 Tiene el problema de que si un nodo de la red local quiere actuar como
 servidor, hay que configurarlo de manera explícita en el router.
\end_layout

\begin_layout Itemize
El hosting virtual permite que varios servidores de servicios web, con diferente
s dominios, convivan en la misma dirección IP.
 El servidor concreto se identifica por medio de la URL que aparece en la
 cabecera HTTP.
 Este mecanismo tiene el problema de que si los servidores DNS fallan y
 el cliente tiene que conectarse usando directamente la dirección IP, el
 servidor no podrá identificar el dominio.
 Otro problema es que no pueden coexistir varios servidores que usen SSL
 en la misma dirección IP.
\end_layout

\begin_layout Standard
Por último, IPv4 añade algunas características que, aunque útiles, resultan
 desfasadas.
 Una de ellas es la detección de errores: si bien el algoritmo usado no
 resulta muy costoso, a día de hoy resulta redundante porque esta funcionalidad
 también la implementa la capa de enlace.
 Otra característica redundante es la fragmentación y el reensamblado de
 datagramas: supone una gran carga de trabajo, por lo que, si se puede,
 se delega a la capa de transporte.
\end_layout

\begin_layout Chapter
El protocolo IPv6
\end_layout

\begin_layout Section
Orígenes
\end_layout

\begin_layout Standard
Cuando a mediados de la década de los 90 se introdujo el esquema CIDR, quedaba
 claro que sólo era un parche temporal.
 Si se deseaba que Internet siguiera creciendo, haría falta un rediseño
 completo.
 A finales de 1992 el IETF anunció el establecimiento del grupo de trabajo
 
\begin_inset Quotes sld
\end_inset

IP Next Generation
\begin_inset Quotes srd
\end_inset

 (IPng), y solicitó el envío de artículos con propuestas de diseño del futuro
 protocolo.
 En 1996 se publicaron los primeros RFC que definían el futuro protocolo
 IPv6 
\begin_inset LatexCommand citep
key "rfc1883,rfc1972"

\end_inset

.
 Estos documentos incluyen detalles como el nuevo formato de datagrama,
 o el esquema de asignación de direcciones.
\end_layout

\begin_layout Standard
El formato de datagrama de IPv6 no es compatible con el de IPv4, por lo
 que es necesario adaptar todos los nodos de la red.
 Este proceso es muy costoso, por lo que para simplificar la migración se
 publicaron una serie de documentos que definen varios 
\begin_inset Quotes sld
\end_inset

mecanismos de transición
\begin_inset Quotes srd
\end_inset

.
 Estos mecanismos permiten que nodos IPv6 puedan acceder a servicios IPv4,
 y que conectarse con otros nodos IPv6 atravesando zonas IPv4.
 Estudiaremos los diversos mecanismos existentes en el siguiente capítulo.
\end_layout

\begin_layout Standard
Por otro lado, con el fin de experimentar con el funcionamiento de IPv6,
 se crearon redes como 6bone, una plataforma de ámbito mundial que permitía
 a islas IPv6 dispersas comunicarse unas con otras utilizando la infraestructura
 IPv4 existente, por medio de túneles IPv6-sobre-IPv4.
 En su momento cumbre, 6bone englobaba 150 redes que cubrían más de 1000
 subredes en 50 países.
 Una vez que la disponibilidad de IPv6 estuvo asegurada y empezaron a surgir
 redes paralelas, se dejó de expandir 6bone, hasta finalmente parar su uso.
\end_layout

\begin_layout Section
Direccionamiento
\end_layout

\begin_layout Standard
La principal diferencia con respecto a IPv4 es que IPv6 ofrece un espacio
 de direcciones de 128 bits, lo que proporciona un total de 
\begin_inset Formula $3,4\times10^{38}$
\end_inset

 direcciones.
 Para hacernos una idea, se podrían dar más de mil billones de direcciones
 a cada estrella existente en el universo.
\end_layout

\begin_layout Standard
Las direcciones IPv6 se representan como una secuencia de 8 números hexadecimale
s de 4 dígitos (16 bits), separados por un carácter de dos puntos.
 Para abreviar, si dos o más números contiguos son 0, se puede usar la notación
 
\begin_inset Quotes sld
\end_inset

::
\begin_inset Quotes srd
\end_inset

, pero sólo una vez por dirección para evitar ambigüedades.
 Veamos un ejemplo de dirección IPv6, y su representación compacta:
\begin_inset Formula \[
\begin{array}{c}
\mathsf{fe80:0000:0000:0000:0219:dbff:fe4c:09ed}\\
\Downarrow\\
\mathsf{fe80::219:dbff:fe4c:9ed}\end{array}\]

\end_inset


\end_layout

\begin_layout Standard
Las direcciones IPv6 se clasifican en tres tipos:
\end_layout

\begin_layout Itemize

\noun on
Unicast
\noun default
: identifican a una única interfaz de red.
 Un paquete enviado a una dirección de este tipo será entregado a la interfaz
 correspondiente.
\end_layout

\begin_layout Itemize

\noun on
Anycast
\noun default
: identifican a un grupo de interfaces de red.
 Un paquete enviado a una dirección de este tipo será entregado a una única
 interfaz, normalmente a la más cercana al nodo de origen.
 Su formato es idéntico al de las direcciones unicast, sólo se diferencian
 en que aparecen de manera distinta en las tablas de enrutado de routers
 diferentes.
\end_layout

\begin_layout Itemize

\noun on
Multicast
\noun default
: identifican a un grupo de interfaces de red.
 Un paquete enviado a una dirección de este tipo será entregado a todas
 las interfaces del grupo.
 Su estructura es diferente al resto de direcciones.
 El primer octeto es todo unos; es decir, todas tienen el prefijo 
\begin_inset Formula $\mathsf{ff00::/8}$
\end_inset

.
 El segundo octeto indica el ámbito de la dirección.
 Los 112 bits restantes identifican al grupo de multicasting.
\end_layout

\begin_layout Standard
En nuestro proyecto sólo trabajaremos con direcciones unicast, por lo que
 vamos a explicarlas con más detenimiento.
 Al igual que ocurría en IPv4, las direcciones IPv6 se dividen en dos partes:
 identificador de la red, e identificador del nodo.
 Ambas tienen un ancho de 64 bits.
 El identificador del nodo se calcula a partir de la dirección física de
 la interfaz de red, lo que facilita la configuración automática de la red
 y evita el uso de ARP.
 El identificador de red se puede subdividir a su vez en varios campos para
 facilitar el enrutamiento jerárquico.
 Un posible esquema era el usado por 6bone 
\begin_inset LatexCommand citep
key "rfc2471"

\end_inset

:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/03-direccionamiento-ipv6.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Formato de direcciones IPv6
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
El significado de cada uno de estos campos es el siguiente:
\end_layout

\begin_layout Itemize
FP (
\emph on
Format Prefix
\emph default
): indica el tipo de dirección.
 Todas las direcciones 
\emph on
unicast
\emph default
 globales usan el prefijo 
\begin_inset Formula $\mathsf{001}$
\end_inset

.
\end_layout

\begin_layout Itemize
TLA ID (
\emph on
Top-Level Aggregation Identifier
\emph default
): este campo identifica a la entidad agregadora de nivel superior.
 Estas entidades son los ISP que forman el backbone, como Sprint o AT&T.
 La longitud de este campo es tan reducida para que las tablas de enrutado
 de los routers de nivel superior, que son los que más tráfico soportan,
 puedan ser más pequeñas.
\end_layout

\begin_layout Itemize
NLA ID (
\emph on
Next-Level Aggregation Identifier
\emph default
): este campo identifica a una entidad de nivel medio, normalmente un ISP
 de menor tamaño o una empresa de gran tamaño que necesita direccionar varias
 redes.
 El espacio asignado a un NLA se puede dividir en varias partes, cada una
 de las cuales será asignada a un cliente.
\end_layout

\begin_layout Itemize
SLA ID (
\emph on
Site-Level Aggregation Identifier
\emph default
): este campo identifica las subredes pertenecientes a una organización.
 No permite delegar direcciones a otras entidades.
 En este campo se encuentran grandes empresas y pequeños ISP locales.
\end_layout

\begin_layout Itemize
Interfaz: este campo es equivalente al identificador de nodo de IPv4.
 Identifica a una interfaz de red, y normalmente se calcula a partir de
 la dirección física de ésta.
\end_layout

\begin_layout Standard
Antes hemos comentado que las direcciones que empiezan por 
\begin_inset Formula $\mathsf{001}$
\end_inset

 se reservan para 
\emph on
unicast
\emph default
 global.
 En la siguiente tabla se muestran algunos de los tipos de direcciones reservada
s y su uso 
\begin_inset LatexCommand citep
key "rfc4291"

\end_inset

:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="13" columns="3">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="4cm">
<column alignment="right" valignment="top" leftline="true" width="0">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="8cm">
<row topline="true" bottomline="true" endhead="true" endfirsthead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Rango
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Prefijo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Notas
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dirección no especificada
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset Formula $\mathsf{::/128}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Esta dirección no se puede asignar a ninguna interfaz, sólo se usa antes
 de que el software haya sido configurado.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dirección de 
\emph on
loopback
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset Formula $\mathsf{::1/128}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Identifica al propio nodo o 
\emph on
localhost
\emph default
.
 Cualquier paquete enviado a esta dirección volverá al propio nodo.
 Es equivalente a la dirección 
\begin_inset Formula $\mathsf{127.0.0.1}$
\end_inset

 en IPv4.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Autoconfiguración de redes locales
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset Formula $\mathsf{fe80::/10}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Indica que la dirección sólo se puede usar en el mismo segmento de una red
 local.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Direcciones locales únicas
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset Formula $\mathsf{fc00::/7}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Estas direcciones sólo se pueden usar dentro de un conjunto de sitios; por
 ejemplo, la red privada de una empresa.
 No deben salir a Internet.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Direcciones de 
\emph on
multicasting
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset Formula $\mathsf{ff00::/8}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Los 112 bits bajos identifican al grupo de multidifusión.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Direcciones normales
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset Formula $\mathsf{2001::/16}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Identifica una dirección global normal.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Mapeado de direcciones IPv4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset Formula $\mathsf{::ffff:0:0/96}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se usa para asignar una dirección IPv6 a un nodo IPv4 (ver el capítulo 5).
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Túneles Teredo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset Formula $\mathsf{2001::/32}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Identifica la dirección como un túnel Teredo (ver el capítulo 5).
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Túneles 6to4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset Formula $\mathsf{2002::/16}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Identifica la dirección como un túnel 6to4 (ver el capítulo 5).
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
ORCHID
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset Formula $\mathsf{2001:10::/28}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se usan para distribuir identificadores criptográficos.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Documentación
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset Formula $\mathsf{2001:db8::/32}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Siempre que se desee dar una dirección de ejemplo, deberá pertenecer a este
 prefijo.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Direcciones de prueba de 6bone
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset Formula $\mathsf{3ffe::/16}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Sólo se usaban dentro de 6bone.
 Se han dejado de conceder.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Rangos de direcciones IPv6 reservados
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Enrutamiento
\end_layout

\begin_layout Standard
Otro objetivo de IPv6 es facilitar el enrutamiento.
 Al asignar las direcciones, es interesante seguir un esquema jerárquico,
 ya que así un router de nivel superior puede agrupar múltiples redes con
 un prefijo común, y delegar parte del trabajo en routers de nivel inferior.
 De lo contrario los routers tendrían que conocer la dirección de todas
 las redes existentes en el mundo, lo cual no es factible.
\end_layout

\begin_layout Standard
Ya vimos que IPv4 utiliza el esquema CIDR para esta tarea.
 Aunque flexible, CIDR no está carente de problemas.
 El primero de ellos es que es una técnica muy compleja, ya que, al ser
 los prefijos de longitud variable, exige el uso de estructuras de datos
 más sofisticadas.
 Otro problema es que CIDR se empezó a usar cuando una buena parte del espacio
 de direcciones ya había sido asignado, por lo que hay grandes bloques que
 quedan fuera de la jerarquía y no se usan de manera óptima.
\end_layout

\begin_layout Standard
IPv6 pretende resolver este problema dividiendo las direcciones en varios
 segmentos de longitud fija.
 Como ya hemos visto, los 64 bits de menor peso identifican un nodo dentro
 de una red.
 Se generan a partir de la dirección física de la interfaz de red, lo que
 permite incluir los 48 bits de las red Ethernet, y muchos otros protocolos
 de enlace más.
 Los 64 bits de mayor peso identifican a la red, y se subdividen a su vez
 en varios campos cortos de longitud fija (
\noun on
tla id, nla id, sla id
\noun default
).
 De esta manera se simplifica el trabajo de los routers.
 Si una organización necesita más flexibilidad, puede subdividir el campo
 
\noun on
nla id
\noun default
 como desee.
\end_layout

\begin_layout Standard
Otra ventaja de IPv6 es que la fragmentación y reensamblado de los paquetes
 sólo se puede realizar en el origen y el destino respectivamente, liberando
 de esta carga a los routers intermedios.
 Para descubrir la longitud máxima de los datagramas se usa el servicio
 P
\emph on
ath MTU Discovery
\emph default
 
\begin_inset LatexCommand citep
key "rfc1981"

\end_inset

.
 Este servicio empieza enviando datagramas con la opción DF (
\emph on
don't fragment
\emph default
) activa.
 Si alguno de los routers intermedios necesita fragmentar el datagrama,
 devuelve un mensaje de error al origen.
 El proceso se repite, reduciendo la longitud de los datagramas, hasta que
 se encuentra un valor de MTU apropiado.
 Si el valor cambia una vez que se ha establecido la comunicación, se ejecutará
 todo el proceso de nuevo.
 La MTU mínima para un dispositivo que soporte IPv6 debe ser de 1280 octetos.
\end_layout

\begin_layout Section
Formato del datagrama
\end_layout

\begin_layout Standard
IPv6 simplifica el formato del datagrama con respecto a IPv4.
 Esto se consigue de varias maneras:
\end_layout

\begin_layout Itemize
Se elimina el campo 
\noun on
opciones
\noun default
 de la cabecera, sustituyéndose por cabeceras de extensión que no necesitan
 ser procesadas por todos los routers.
 La cabecera pasa a ser de tamaño fijo, eliminándose también el campo 
\noun on
longitud
\noun default
.
\end_layout

\begin_layout Itemize
Se sustituye el campo 
\noun on
tipo de servicio
\noun default
 por un nuevo mecanismo de QoS basado en etiquetas de flujos.
\end_layout

\begin_layout Itemize
El campo TTL, que históricamente anotaba el tiempo máximo de vida de los
 paquetes en segundos, pasa a llamarse 
\noun on
límite de saltos
\noun default
.
\end_layout

\begin_layout Itemize
Desaparece el campo de detección de errores, cuya tarea se delega a la capa
 de enlace.
\end_layout

\begin_layout Itemize
Desaparecen los campos de fragmentación.
\end_layout

\begin_layout Standard
Gracias a estas modificaciones, el formato resultante es muy sencillo:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/05-cabecera.png
	lyxscale 50
	scale 20

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Formato de la cabecera IPv6
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
El significado de cada campo es el siguiente:
\end_layout

\begin_layout Itemize

\noun on
Versión
\noun default
 (4 bits): versión del protocolo IP, su valor es de 6.
\end_layout

\begin_layout Itemize

\noun on
Clase de tráfico
\noun default
 (8 bits): permite al nodo de origen especificar la prioridad del datagrama.
 Su uso aún se está estudiando.
\end_layout

\begin_layout Itemize

\noun on
Etiqueta de flujo
\noun default
 (20 bits): permite identificar flujos de datos en tiempo real que deben
 recibir un tratamiento especial.
 Actualmente no se usa.
\end_layout

\begin_layout Itemize

\noun on
Longitud de la carga
\noun default
 (16 bits): longitud del resto del datagrama, excluida la cabecera, en octetos.
 Si su valor es cero, indica que es un datagrama 
\emph on
jumbo
\emph default
; la longitud real estará en una cabecera de extensión.
\end_layout

\begin_layout Itemize

\noun on
Siguiente cabecera
\noun default
 (8 bits): identifica el tipo de protocolo encapsulado.
 Normalmente será un protocolo de transporte, pero pueden ser cabeceras
 con opciones adicionales.
 Usa los mismos valores que IPv4.
\end_layout

\begin_layout Itemize

\noun on
Límite de saltos
\noun default
 (8 bits): especifica el número de enlaces que puede seguir un datagrama
 antes de ser descartado.
\end_layout

\begin_layout Itemize

\noun on
Dirección de origen
\noun default
 (128 bits): la dirección del remitente del paquete.
\end_layout

\begin_layout Itemize

\noun on
Dirección de destino
\noun default
 (128 bits): la dirección del destinatario del paquete.
\end_layout

\begin_layout Standard
A modo de conclusión, aunque las direcciones IPv6 son cuatro más grandes
 que las IPv4, el tamaño de la cabecera es sólo el doble (40 octetos frente
 a 20 octetos), y el número de campos obligatorios se reduce de doce a ocho.
\end_layout

\begin_layout Section
Compatibilidad de direcciones
\end_layout

\begin_layout Standard
Para facilitar el proceso de migración de IPv4 a IPv6, y garantizar la compatibi
lidad de ambos protocolos mientras convivan, se han reservado varios rangos
 de direcciones IPv6.
 Cada uno de estos rangos se ha asignado a un mecanismo de transición particular
, que describiremos con más detenimiento en el capítulo 5.
 Por el momento haremos un breve resumen.
 Partiendo de una dirección IPv4 
\begin_inset Formula $\mathsf{x.y.z.w}$
\end_inset

, se pueden construir las siguientes direcciones especiales:
\end_layout

\begin_layout Itemize

\noun on
IPv4-mapped IPv6
\noun default
: usan el formato 
\begin_inset Formula $\mathsf{::ffff:x.y.z.w}$
\end_inset

, e identifican a un nodo IPv4 en un nodo IPv6.
 Nunca se usan como dirección de origen o destino de un paquete.
\end_layout

\begin_layout Itemize

\noun on
IPv4-compatible IPv6
\noun default
: usan el formato 
\begin_inset Formula $\mathsf{::x.y.z.w}$
\end_inset

, y sirven para comunicar nodos IPv4 e IPv6 por medio de túneles.
 Estas direcciones están obsoletas y no deben usarse nunca.
\end_layout

\begin_layout Itemize

\noun on
IPv4-translatable IPv6
\noun default
: usan el formato 
\begin_inset Formula $\mathsf{::ffff:0:x.y.z.w}$
\end_inset

, y se emplean en el mecanismo de migración SIIT.
\end_layout

\begin_layout Itemize

\noun on
6to4
\noun default
: usan el formato 
\begin_inset Formula $\mathsf{2002:xxyy:zzww::/48}$
\end_inset

, donde 
\begin_inset Formula $\mathsf{xxyy:zzww}$
\end_inset

 es la representación hexadecimal de la dirección.
 Se emplean en el mecanismo de tunelado 
\emph on
6to4
\emph default
.
\end_layout

\begin_layout Itemize

\noun on
6sobre4
\noun default
: usan el formato 
\begin_inset Formula $\mathsf{::xxyy:zzww}$
\end_inset

, donde 
\begin_inset Formula $\mathsf{xxyy:zzww}$
\end_inset

 es la representación hexadecimal de la dirección, al que añaden el prefijo
 correspondiente a la interfaz.
 Por ejemplo, la dirección de enlace local del nodo 
\begin_inset Formula $\mathsf{112.151.16.72}$
\end_inset

 se representaría como 
\begin_inset Formula $\mathsf{fe80::7097:1048}$
\end_inset

.
 Estas direcciones se utilizan en el mecanismo de tunelado definido en el
 RFC 2529, así como en los mecanismo NAT-PT y TRT.
\end_layout

\begin_layout Itemize
ISATAP: usan el formato 
\begin_inset Formula $\mathsf{::5efe:x.y.z.w}$
\end_inset

, al que añaden el prefijo correspondiente a la interfaz; por ejemplo, 
\begin_inset Formula $\mathsf{fe80::5efe:192.168.0.1}$
\end_inset

.
 Se usan en el mecanismo de tunelado 
\emph on
Intra-Site Automatic Tunnel Addressing Protocol
\emph default
.
\end_layout

\begin_layout Section
El sistema de nombres de dominio
\end_layout

\begin_layout Standard
Las direcciones IPv6 se representan en el sistema de nombres de dominio
 (DNS) mediante registros 
\noun on
AAAA
\noun default
, también llamados 
\emph on
quad-A
\emph default
 por analogía con los registros A de IPv4.
 El servicio de consultas inversas se aloja en el dominio 
\begin_inset Formula $\mathsf{ip6.arpa}$
\end_inset

.
 El formato de los registros y el funcionamiento general del servicio, así
 como los cambios necesarios para adaptar el sistema DNS, se describen en
 el RFC 3596 
\begin_inset LatexCommand citep
key "rfc3596"

\end_inset

.
\end_layout

\begin_layout Standard
Durante el diseño de la arquitectura DNS para IPv6 se consideró otro sistema
 basado en registros A6.
 Este sistema se describe en el RFC 2874 
\begin_inset LatexCommand citep
key "rfc2874"

\end_inset

; sus virtudes y defectos frente a los registros AAAA se estudian en el
 RFC 3364 
\begin_inset LatexCommand citep
key "rfc3364"

\end_inset

.
 De momento se han relegado a un estado experimental, y no se recomienda
 usarlos.
\end_layout

\begin_layout Standard
En junio del 2004 la IANA anunció que se habían actualizado los servidores
 DNS raíz para soportar el nuevo formato de registros, por lo que se pueden
 empezar a asignar direcciones IPv6 a dominios existentes.
 Mientras dure la transición, los nodos que soporten IPv6 deberán elegir
 que protocolo usar al acceder a un dominio remoto.
 El RFC 3484 
\begin_inset LatexCommand citep
key "rfc3484"

\end_inset

 describe el criterio a seguir, incluyendo la selección de dirección a partir
 de la información obtenida del DNS.
\end_layout

\begin_layout Chapter
Transición de IPv4 a IPv6
\end_layout

\begin_layout Section
Introducción
\end_layout

\begin_layout Standard
Para facilitar la convivencia entre ambos protocolos, se han definido una
 serie de mecanismos de transición que permiten que un nodo sólo-IPv6 pueda
 acceder a servicios IPv4, y que redes IPv6 aisladas puedan comunicarse
 entre sí atravesando zonas IPv4.
 Los documentos RFC 2185 
\begin_inset LatexCommand citep
key "rfc2185"

\end_inset

 y RFC 4213 
\begin_inset LatexCommand citep
key "rfc4213"

\end_inset

 definen las siguientes técnicas:
\end_layout

\begin_layout Itemize
Dual Stack: el mecanismo más sencillo consiste en que los nodos soporten
 ambos protocolos por medio de una pila TCP/IP dual.
\end_layout

\begin_layout Itemize
Tunelado: permiten encapsular los datagramas IPv6 dentro de IPv4, de tal
 manera que este último actúa como si fuera la capa de enlace.
\end_layout

\begin_layout Itemize
Traducción de protocolos: estas técnicas reescriben los paquetes, convirtiendo
 las cabeceras de una versión a otra.
\end_layout

\begin_layout Standard
En las siguientes secciones describiremos cada técnica con mayor detenimiento.
\end_layout

\begin_layout Section
Dual Stack (RFC 4213)
\end_layout

\begin_layout Standard
El mecanismo más sencillo consiste en instalar ambas pilas de protocolos
 en un mismo nodo.
 Ambos protocolos operarán en paralelo.
 Las capas superiores elegirán el protocolo a usar en función de la dirección
 devuelta por el DNS, es decir, según el protocolo que soporte la aplicación
 de destino.
 El sistema operativo enviará el paquete a la pila que se le solicite.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/06-pila-dual.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Arquitectura de pila TCP/IP dual
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Resulta relativamente sencillo escribir una pila dual, ya que el único nivel
 alterado es el de red, no viéndose afectadas el resto de capas.
 Por tanto, se puede compartir una gran cantidad de código.
 Esto ha hecho que este mecanismo se convierta en el más usado, siendo soportado
 por la mayoría de los sistema operativos modernos.
\end_layout

\begin_layout Standard
En principio, este mecanismo sólo permite la comunicación entre nodos que
 soporten la misma versión de IP, pero no entre un nodo exclusivamente IPv4
 y otro exclusivamente IPv6.
 En estos casos necesitaremos mecanismos más sofisticados, como los que
 estudiaremos posteriormente.
\end_layout

\begin_layout Section
Túneles (RFC 4213)
\end_layout

\begin_layout Subsection
Introducción
\end_layout

\begin_layout Standard
El mecanismo de pila doble no es capaz de cubrir todos los casos, por lo
 que surge la necesidad de usar mecanismos de tunelado.
 Los túneles funcionan como una VPN, encapsulando un paquete dentro de otro
 de la misma capa de la pila.
 Se usan para atravesar zonas intermedias que no soportan el protocolo usado
 por los nodo originales.
 Los extremos de los túneles no tienen porqué corresponderse con los nodos
 terminales de la transmisión, sino que puede encontrarse en un punto medio
 del camino.
\end_layout

\begin_layout Standard
Los extremos del túnel deben ser nodos duales, ya que conectarán zonas con
 versiones distintas de IP.
 Cuando un paquete de la versión 
\emph on
A
\emph default
 llega al inicio del túnel, el router inicial le añadirá una cabecera de
 la versión 
\emph on
B
\emph default
 con la dirección de destino del final del túnel, y lo reenviará.
 Una vez que haya atravesado la zona intermedia, se eliminará la cabecera
 
\emph on
B
\emph default
 y se extraerá el paquete original, que seguirá su curso hacia su destino
 real.
 Durante su trayecto, un mismo paquete podrá atravesar varios túneles, e
 incluso se podrán establecer túneles anidados.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/07-tunelado.png
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Esquema de tunelado
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Los túneles se pueden clasificar de varias maneras.
 La más directa es atendiendo a los valores de 
\emph on
A
\emph default
 y 
\emph on
B
\emph default
.
 De esta manera tendremos:
\end_layout

\begin_layout Itemize
Túneles IPv6 dentro de IPv4: son los más comunes dada la situación actual.
\end_layout

\begin_layout Itemize
Túneles IPv4 dentro de IPv6: podrán darse en un futuro cuando la versión
 de IP predominante sea la 6.
\end_layout

\begin_layout Itemize
Túneles UDP: los túneles normales se identifican por medio del valor 41
 en el campo de protocolo.
 Algunos dispositivos bloquean estos paquetes, por lo que una alternativa
 es encapsularlos dentro de un datagrama UDP.
\end_layout

\begin_layout Standard
Otro criterio de clasificación atiende al tipo de nodos presentes en los
 extremos del túnel:
\end_layout

\begin_layout Itemize
Router-router: los extremos del túnel residen en dos routers intermedios.
\end_layout

\begin_layout Itemize
Host-router: el nodo de origen establece un túnel con un router intermedio,
 que a su vez se comunicará de manera directa con el destino.
\end_layout

\begin_layout Itemize
Router-host: caso simétrico al anterior, esta vez el túnel se establece
 entre el router y el nodo de destino.
\end_layout

\begin_layout Itemize
Host-host: en este caso, dos nodos duales crean un túnel que supone el camino
 entero de la comunicación.
 El protocolo encapsulado sólo verá un salto.
\end_layout

\begin_layout Standard
El último criterio de clasificación depende del proceso de configuración
 del túnel:
\end_layout

\begin_layout Itemize
Manual: implica establecer los extremos del túnel de manera explícita, ya
 sea por medio de un operador humano o a través de un servicio conocido
 como 
\emph on
broker de túneles
\emph default
.
\end_layout

\begin_layout Itemize
Automática: los extremos del túnel son deducidos por la propia infraestructura
 de red a partir de las direcciones IPv6 de origen o destino.
\end_layout

\begin_layout Subsection
Túnel IPv6 sobre IPv4 manual
\end_layout

\begin_layout Standard
Estos túneles añaden una cabecera IPv4 a un paquete IPv6, para que estos
 puedan ser enviados por una zona IPv4.
 Se suelen para establecer comunicaciones con ISP remotos a través de Internet.
 La cabecera que se añade tiene el siguiente formato:
\end_layout

\begin_layout Itemize
El valor del campo protocolo se pone a 41.
\end_layout

\begin_layout Itemize
Las direcciones de origen y destino se asignan a partir de la dirección
 de los extremos del túnel.
 Los extremos se configuran manualmente, o se derivan a partir de la dirección
 del próximo salto que seguirá la ruta.
\end_layout

\begin_layout Standard
Como resultado de añadir una cabecera adicional, la MTU de la ruta se reduce
 en 20 bytes.
 Esto puede provocar que un paquete tenga que fragmentarse al entrar en
 el túnel.
 En este caso, el nodo inicial del túnel deberá poner la bandera DF a cero.
\end_layout

\begin_layout Subsection
Túneles automáticos
\end_layout

\begin_layout Standard
Suelen usarse cuando el extremo final del túnel coincide con el de la comunicaci
ón.
 Su funcionamiento básico es el mismo que el de los túneles manuales.
 La diferencia radica en la manera en que se calcula la dirección de destino.
 Como el destino es el mismo para las direcciones IPv4 e IPv6, se puede
 derivar una a partir de la otra por medio de una dirección 
\emph on
IPv4-compatible IPv6
\emph default
 con el siguiente formato:
\begin_inset Formula \[
\mathsf{::a.b.c.d}\]

\end_inset


\end_layout

\begin_layout Standard
Donde 
\begin_inset Formula $\mathsf{a.b.c.d}$
\end_inset

 es una dirección IPv4 a la que se añaden 96 ceros.
 Estas direcciones se asignan sólo para su uso en túneles automáticos.
 El uso de este mecanismo se ha abandonado, ya que la configuración 
\emph on
6to4
\emph default
 lo resuelve de una manera más eficiente y genérica.
\end_layout

\begin_layout Subsection
Broker de túneles
\end_layout

\begin_layout Standard
Los 
\emph on
brokers de túneles
\emph default
 
\begin_inset LatexCommand citep
key "rfc3053"

\end_inset

 son servicios que ofrecen la configuración y gestión centralizada de un
 gran número de túneles.
 Se usan cuando hay que administrar muchos túneles.
 Por ejemplo, un ISP puede usar un broker para gestionar el uso de la red
 por parte de sus clientes, o para obtener estadísticas del uso de cada
 túnel.
 También son útiles para conectar pequeñas redes IPv6 aisladas a redes IPv6
 ya existentes.
\end_layout

\begin_layout Standard
Su funcionamiento se basa en el uso de una aplicación en el cliente, la
 existencia de uno o más servidores de túneles, y un servidor broker que
 reside en la zona IPv4.
 El cliente se conecta al servidor broker para solicitar la activación de
 un túnel.
 Una vez autorizado, proporcionará el resto de la información necesaria,
 como su dirección IPv4 o el tiempo de vida requerido para la conexión.
 El broker creará el túnel, registrará las direcciones de los extremos en
 el DNS, y enviará los parámetros de configuración al cliente para que este
 pueda iniciar la comunicación.
\end_layout

\begin_layout Standard
Las direcciones IPv6 asignadas por el broker serán siempre globales y pertenecer
án al espacio que se le haya asignado.
 Una vez que el cliente ya no necesite el túnel, se lo podrá notificar al
 servidor para que lo libere, y así no esté ocupado un túnel que no se está
 usando.
\end_layout

\begin_layout Subsection
Túneles 6to4
\end_layout

\begin_layout Standard
El mecanismo 
\emph on
6to4
\emph default
 
\begin_inset LatexCommand citep
key "rfc3056"

\end_inset

 es una generalización del tunelado automático.
 Se usa para conectar nodos IPv6 aislados con redes remotas a través de
 una infraestructura IPv4.
 Al igual que sucedía en los túneles automáticos, se encapsula un paquete
 IPv6 dentro de otro IPv4, cuya dirección se calcula a partir de la dirección
 
\emph on
6to4
\emph default
.
 Estas direcciones tienen el siguiente formato:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\mathsf{2002:aabb:ccdd:id\; subred:interfaz\; de\; red}\]

\end_inset


\end_layout

\begin_layout Standard
Donde 
\begin_inset Formula $\mathsf{aabb:ccdd}$
\end_inset

 es la representación hexadecimal de la dirección IPv4 pública del nodo
 en el que se desea instalar el mecanismo 
\emph on
6to4
\emph default
.
 Por tanto, este nodo debe ser accesible desde Internet v4.
 Se definen los siguientes elementos para 
\emph on
6to4
\emph default
:
\end_layout

\begin_layout Itemize
Host 6to4: es un nodo que posee al menos una dirección 
\emph on
6to4
\emph default
, y que desea comunicarse con un nodo IPv6 a través de una zona IPv4.
\end_layout

\begin_layout Itemize
Router 6to4: es un router dual que posee al menos una interfaz 
\emph on
6to4
\emph default
, y que permite reenviar tráfico a nodos y routers 
\emph on
6to4
\emph default
 encapsulando automáticamente los paquetes IPv6 sobre paquetes IPv4.
\end_layout

\begin_layout Itemize
Router de reenvío 6to4: es un router capaz de encaminar paquetes IPv6 entre
 direcciones 
\emph on
6to4
\emph default
 y nodos IPv6 nativos.
\end_layout

\begin_layout Standard
6to4 es el mecanismo de tunelado más usado actualmente.
 Su funcionamiento es el siguiente.
 Suponiendo que dos nodos deseen intercambiar tráfico IPv6, pueden darse
 tres casos:
\end_layout

\begin_layout Itemize
Si ambos nodos están dentro de la misma red, podrán comunicarse directamente
 sin necesidad de usar un túnel.
\end_layout

\begin_layout Itemize
El segundo caso es que ambos nodos estén en redes distintas, separadas por
 una zona IPv4.
 En ese caso, el nodo que inicia la comunicación preguntará la dirección
 (o direcciones) de la máquina destino al DNS, y elegirá la dirección correspond
iente al mecanismo 
\emph on
6to4
\emph default
.
 Los paquetes IPv6 llegarán al router frontera, donde serán encapsulados
 automáticamente, deduciendo las direcciones IPv4 de origen y destino a
 partir de las direcciones 
\emph on
6to4
\emph default
.
 Cuando el paquete llegue a la red de destino serán desencapsulados y entregados
 al nodo final.
\end_layout

\begin_layout Itemize
El tercer caso se da cuando una isla IPv6 quiere comunicarse con una red
 IPv6 nativa.
 En este caso, al llegar el paquete a la red de destino continuaría hasta
 el nodo final aprovechando la infraestructura IPv6 existente.
\end_layout

\begin_layout Subsection
Túneles DSTM
\end_layout

\begin_layout Standard
El mecanismo DSTM (
\emph on
Dual Stack Transition Mechanism
\emph default
) 
\begin_inset LatexCommand citep
key "dstm"

\end_inset

 se usa cuando un nodo presente en un océano IPv6 necesita comunicarse con
 una aplicación IPv4 remota.
 La solución más sencilla sería instalar una pila dual, pero esto obligaría
 a configurar también todos los routers intermedios.
 DSTM permite encapsular paquetes IPv4 dentro de IPv6.
 Está orientado a orientado a nodos duales individuales pertenecientes a
 una red IPv6.
\end_layout

\begin_layout Standard
DSTM funciona asignando una dirección IPv4 temporal al nodo que desea comunicars
e, y estableciendo el túnel que transportará los paquetes.
 La comunicación puede iniciarse tanto por el nodo local IPv6 como por el
 nodo remoto IPv4.
 El sistema se compone de tres elementos:
\end_layout

\begin_layout Itemize
El nodo DSTM, con una pila dual instalada.
 La pila IPv4 se configurará dinámicamente en el momento de iniciar la comunicac
ión.
\end_layout

\begin_layout Itemize
El router frontera que comunica las zonas de distinta versión, encargándose
 de la encapsulación de los paquetes.
\end_layout

\begin_layout Itemize
El servidor DSTM, que es un servidor DHCPv6 que asigna las direcciones IPv4
 temporales a los nodos que lo solicitan, y les proporciona la dirección
 del router frontera.
 Mantiene una tabla con las equivalencias entre direcciones IPv4 e IPv6.
\end_layout

\begin_layout Standard
La principal ventaja de este mecanismo es que es transparente al resto de
 la red, y que las direcciones IPv4 sólo se reservan en el momento de usarse,
 liberándose en cuanto dejan de ser necesarias.
\end_layout

\begin_layout Standard
Cuando un nodo IPv6 desea iniciar una comunicación IPv4 remota, realiza
 una solicitud al servidor.
 Éste notificará al router frontera la creación del nuevo túnel, y enviará
 al cliente su nueva dirección IPv4 y la dirección del router frontera.
 Si la petición se realiza al revés, es decir, un nodo IPv4 remoto desea
 iniciar una comunicación con un nodo IPv6 local, el servidor creará automáticam
ente el túnel si no existía de antes, notificará al nodo IPv6 su nueva dirección
, la registrará en el DNS, y la devolverá al nodo IPv4 para que pueda iniciar
 la comunicación.
\end_layout

\begin_layout Subsection
ISATAP
\end_layout

\begin_layout Standard
ISATAP (
\emph on
Intra-Site Automatic Tunnel Addressing Protocol
\emph default
) 
\begin_inset LatexCommand citep
key "rfc5214"

\end_inset

 es un mecanismo que permite que dos nodos duales puedan transmitir paquetes
 IPv6 por medio de una red local IPv4.
 Un nodo que quiera comunicarse por medio de ISATAP creará una dirección
 IPv6 virtual con la forma:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\mathsf{prefijo::5efe:aabb:ccdd}\]

\end_inset


\end_layout

\begin_layout Standard
Donde 
\begin_inset Formula $\mathsf{aabb:ccdd}$
\end_inset

 es la representación hexadecimal de la dirección IPv4 asignada al nodo,
 y 
\begin_inset Formula $\mathsf{prefijo}$
\end_inset

 es el identificador de 64 bits propio de la red.
 Todos los nodos de la misma red local comparten el mismo prefijo.
 Para descubrir el prefijo se buscará el router local por medio del protocolo
 
\emph on
Neighbor Discovery
\emph default
, que será enviado por broadcast.
 En caso de que el protocolo no sea capaz de descubrir ningún router, se
 debe configurar una lista manual de routers a los que se consultará periódicame
nte.
\end_layout

\begin_layout Subsection
Teredo
\end_layout

\begin_layout Standard
Teredo es un protocolo que permite establecer obtener conectividad IPv6
 a nodos situados detrás de un NAT.
 Los mecanismos tradicionales como 
\emph on
6to4
\emph default
 exigen que el nodo que desea establecer el túnel posea una dirección IPv4
 pública.
 Sin embargo, debido a la escasez de direcciones IPv4, muchos nodos se conectan
 a Internet a través de uno o más dispositivos NAT.
 En este caso la única dirección pública existente se asigna al dispositivo
 NAT, por lo que debería ser éste el que creara el túnel, lo cual no siempre
 es posible.
 Además, la mayoría de los dispositivos NAT sólo permiten el paso de paquetes
 TCP/UDP, y descartarían los paquetes con el protocolo 41.
\end_layout

\begin_layout Standard
Teredo resuelve este problema encapsulando los paquetes IPv6 dentro de datagrama
s UDP IPv4.
 Se compone de cuatro elementos:
\end_layout

\begin_layout Itemize
Cliente Teredo: es un nodo que desea se encuentra detrás de un NAT y quiere
 establecer conectividad IPv6 por medio de Teredo.
 Se le asignará una dirección de la forma 
\begin_inset Formula $\mathsf{2002::/32}$
\end_inset

.
\end_layout

\begin_layout Itemize
Servidor Teredo: es un nodo conocido, con una dirección IPv4 pública, que
 se encarga de la configuración inicial de los túneles.
 No reenvía ningún tipo de tráfico.
\end_layout

\begin_layout Itemize
Router de reenvío: actúa como el nodo extremo de un túnel.
 Se encarga de reenviar todo el tráfico que recibe de los clientes.
 Cada router de reenvío sirve a un rango de direcciones; sólo reenvía tráfico
 entre un cliente Teredo y una dirección perteneciente a su rango.
\end_layout

\begin_layout Itemize
Nodo de reenvío: es un nodo dual que actúa como router de reenvío de sí
 mismo.
 Se conecta a la Internet IPv4 por medio de una dirección pública o privada
 con NAT, y a la Internet IPv6 por medio de conexión nativa o un túnel 
\emph on
6to4
\emph default
.
\end_layout

\begin_layout Standard
Los servidores asignan direcciones IPv6 a sus clientes con el formato:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/08-teredo.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Esquema de direccionamiento Teredo
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Donde 
\begin_inset Quotes sld
\end_inset

servidor
\begin_inset Quotes srd
\end_inset

 es la dirección IPv4 pública del servidor en hexadecimal, 
\begin_inset Quotes sld
\end_inset

flags
\begin_inset Quotes srd
\end_inset

 es una serie de banderas que indican el tipo de NAT tras el que se encuentra
 el cliente, 
\begin_inset Quotes sld
\end_inset

puerto
\begin_inset Quotes srd
\end_inset

 es el número de puerto UDP asignado por el NAT a la conexión, con sus bits
 invertidos, y 
\begin_inset Quotes sld
\end_inset

cliente
\begin_inset Quotes srd
\end_inset

 es la dirección IPv4 pública del dispositivo NAT, también con sus bits
 invertidos.
\end_layout

\begin_layout Standard
Cuando un cliente desea obtener una dirección, envía un mensaje de solicitud
 IPv6 al servidor Teredo, encapsulado en un paquete UDP IPv4.
 Al atravesar el NAT, se efectuará la sustitución de dirección y puerto.
 El servidor determinará el tipo de NAT (cono o restringido), y devolverá
 la respuesta al cliente, incluyendo la dirección resultado de la traducción,
 para que éste construya su dirección IPv6.
 Para evitar que se cierre la entrada de NAT, el cliente enviará periódicamente
 paquetes UDP al servidor.
\end_layout

\begin_layout Standard
Si dos clientes Teredo quieren comunicarse, seguirán el siguiente proceso.
 El cliente que inicia la comunicación enviará un 
\emph on
paquete burbuja
\emph default
 al servidor del destinatario, cuya dirección IPv4 puede extraer de la dirección
 IPv6 del cliente.
 El servidor reenviará el paquete al destinatario, que se pondrá en contacto
 con el router de reenvío para poder así establecer la comunicación.
\end_layout

\begin_layout Standard
Cuando un cliente Teredo quiere comunicarse con un nodo IPv6 nativo, enviará
 un paquete ICMPv6 
\emph on
Echo Request
\emph default
 a través de su servidor.
 El servidor lo desencapsula y lo envía al destinatario.
 El destinatario responderá con un paquete 
\emph on
Echo Reply
\emph default
, que será dirigido hacia el router de reenvío Teredo más cercano.
 Este router se pondrá en contacto con el cliente Teredo, e iniciará así
 la comunicación.
\end_layout

\begin_layout Section
Traducción de protocolos
\end_layout

\begin_layout Subsection
Introducción
\end_layout

\begin_layout Standard
La traducción de protocolos es el tercer y último grupo de mecanismos de
 transición que existen.
 Estos mecanismos reciben un paquete para una versión dada de un protocolo,
 y los reescriben adaptándolos a otra versión.
 La traducción puede hacerse a nivel de red, de transporte o de aplicación.
\end_layout

\begin_layout Standard
Dentro de esta familia, los cuatro mecanismos más asentados son SIIT, TRT,
 NAT-PT y SOCKS.
 No obstante, hay que mencionar que existen otros mecanismos experimentales,
 como BIA 
\begin_inset LatexCommand citep
key "rfc3338"

\end_inset

, que no estudiaremos.
\end_layout

\begin_layout Subsection
Stateless IP/ICMP Translation (SIIT)
\end_layout

\begin_layout Standard
El mecanismo SIIT 
\begin_inset LatexCommand citep
key "rfc2765"

\end_inset

 permite que un nodo sólo IPv6 se pueda comunicar con un nodo sólo IPv4.
 Para ello, el nodo IPv6 necesita disponer de una dirección IPv4 global.
 A partir de ésta se le asignará una dirección 
\emph on
IPv4-translatable IPv6
\emph default
, cuyo formato fue descrito en la sección 3.5.
 La traducción se limita a las cabeceras IP e ICMP, y no realiza control
 de estado, por lo que cada paquete se traduce individualmente.
\end_layout

\begin_layout Standard
Cuando un nodo IPv6 desea enviar un paquete a un nodo IPv4, construye un
 datagrama con dirección de origen la 
\emph on
IPv4-translatable IPv6
\emph default
 propia, y dirección de destino la 
\emph on
IPv4-mapped IPv6
\emph default
 del destinatario.
 Cuando el router SIIT recibe el paquete, deduce las direcciones IPv4 correspond
ientes, reescribe el paquete, y lo reenvía por la Internet IPv4 hacia el
 destinatario.
 Si la comunicación es en sentido contrario, el router SIIT recibe un paquete
 IPv4, a partir del cual deduce las direcciones IPv6 correspondientes, reescribe
 el paquete, y lo envía por la zona IPv6.
\end_layout

\begin_layout Standard
Una limitación de SIIT es que no especifica la manera de obtener las direcciones
 IPv4, ni cómo realizar el enrutado.
 Además, requiere que cada nodo IPv6 disponga de una dirección IPv4 global.
 Tampoco tiene en cuenta el caso de que un paquete IPv4 deba fragmentarse
 al entrar en la red IPv6.
\end_layout

\begin_layout Subsection
Transport Relay Translator (TRT)
\end_layout

\begin_layout Standard
TRT 
\begin_inset LatexCommand citep
key "rfc3142"

\end_inset

 es un mecanismo que traduce no sólo la capaz de red, sino también la capa
 de transporte.
 El funcionamiento es el siguiente.
 Cuando un nodo inicial 
\emph on
A
\emph default
 desea establecer una comunicación TCP con un nodo 
\emph on
B
\emph default
 que pertenece a una red distinta, los paquetes son redirigidos hacia el
 sistema TRT, al que llamaremos 
\emph on
X
\emph default
.
 El sistema aceptará la conexión, aunque la dirección de destino no se correspon
da con la suya, y se presentará ante 
\emph on
A
\emph default
 como si fuera 
\emph on
B
\emph default
.
 A continuación, establecerá una conexión con 
\emph on
B
\emph default
 haciéndose pasar por 
\emph on
A
\emph default
.
 De esta manera, se crearán dos conexiones, 
\begin_inset Formula $A\leftrightarrow X$
\end_inset

 y 
\begin_inset Formula $X\leftrightarrow B$
\end_inset

.
\end_layout

\begin_layout Standard
Cuando un nodo IPv6 desee establecer una conexión con un nodo IPv4, se conectará
 a la dirección 
\begin_inset Formula $\mathsf{prefijo::a.b.c.d}$
\end_inset

, donde 
\begin_inset Formula $\mathsf{prefijo}$
\end_inset

 es el identificador de red de 64 bits del sistema TRT, y 
\begin_inset Formula $\mathsf{a.b.c.d}$
\end_inset

 es la dirección IPv4 de 32 bits del destinatario.
 El sistema TRT puede extraer automáticamente la dirección IPv4 y establecer
 la conexión.
\end_layout

\begin_layout Standard
La principal ventaja de TRT es que permite conectar un gran número de nodos
 IPv6 a través de una única dirección IPv4 global.
 Además, permite definir MTUs distintas para cada conexión, y resolver así
 el problema de la fragmentación.
 La principal desventaja es que, al centralizar todo el tráfico, consume
 mucho ancho de banda, lo que puede presentar problemas de escalabilidad.
\end_layout

\begin_layout Subsection
Network Address Translation - Port Translation (NAT-PT)
\end_layout

\begin_layout Standard
NAT-PT 
\begin_inset LatexCommand citep
key "rfc2766"

\end_inset

 es un mecanismo que permite a aplicaciones y nodos IPv6 nativos comunicarse
 con aplicaciones y nodos IPv4 nativos.
 El tráfico puede ser unidireccional o bidireccional.
 El mecanismo resulta transparente a los nodos, no requiriendo ninguna configura
ción por parte de estos, ni la instalación de una pila dual.
\end_layout

\begin_layout Standard
Su funcionamiento se basa en un router NAT-PT, que conecta las dos zonas
 y realiza la traducción.
 Este router dispone de un rango de direcciones IPv4 públicas, que asignará
 dinámicamente a los nodos IPv6 que lo solicite, guardando el estado de
 cada comunicación en una tabla.
 El router traduce tanto los paquetes IP como los puertos TCP/UDP, de ahí
 su nombre.
\end_layout

\begin_layout Standard
Cuando un nodo IPv6 quiera enviar un paquete a un nodo IPv4, usará como
 dirección de destino 
\begin_inset Formula $\mathsf{prefijo::a.b.c.d}$
\end_inset

, donde 
\begin_inset Formula $\mathsf{prefijo}$
\end_inset

 es el identificador de red de 64 bits del router NAT-PT, y 
\begin_inset Formula $\mathsf{a.b.c.d}$
\end_inset

 es la dirección IPv4 de 32 bits del destinatario.
 Al llegar el paquete al router, se realizará la traducción.
 El router sustituirá la dirección de origen por la que tenga almacenada
 en la tabla de sesiones, y extraerá la dirección de destino IPv4 de la
 cabecera IPv6.
 Si es necesario, también se traducirán los números de puerto.
 Cuando el nodo IPv4 quiera enviar un paquete al nodo IPv6, se realizará
 el proceso inverso.
\end_layout

\begin_layout Standard
Si el nodo que inicia la comunicación está en el lado IPv6, la sesión se
 puede iniciar dinámicamente cuando sea necesario.
 En cambio, si el nodo que establece la conexión está en el lado IPv4, es
 necesario reservar un par dirección-puerto, que será registrado en el DNS,
 y configurar una traducción estática a la dirección IPv6 interna.
\end_layout

\begin_layout Subsection
SOCKS
\end_layout

\begin_layout Standard
El mecanismo SOCKS 
\begin_inset LatexCommand citep
key "rfc3089"

\end_inset

 se instala entre la capa de aplicación y la de transporte, reemplazando
 la API de 
\emph on
sockets
\emph default
 y la resolución de nombres.
 Su uso originalmente permitía que las aplicaciones pudieran atravesar cortafueg
os de manera transparente y segura.
 Con el tiempo se han añadido diversas extensiones, que han desembocado
 en el uso de un servidor dual llamados SOCKS 64.
 El funcionamiento del mecanismo se divide en tres partes:
\end_layout

\begin_layout Itemize
Cada cliente debe tener instalada la biblioteca SOCKS, que se sitúa entre
 la aplicación y el nivel de transporte y modifica las comunicaciones con
 el servidor.
\end_layout

\begin_layout Itemize
El servidor SOCKS 64 actúa de puerta de enlace, encargándose de la traducción
 de protocolos y la resolución DNS.
\end_layout

\begin_layout Itemize
Los nodos sobre los que se ejecutan las aplicaciones redirigirán las comunicacio
nes a la biblioteca SOCKS instalada.
\end_layout

\begin_layout Standard
Así, cuando un nodo realice una llamada a la biblioteca de sockets, será
 interceptada por SOCKS, que la redirigirá al servidor correspondiente.
 Éste se encargará de traducir los protocolos, y de asignar una dirección
 privada al nodo si es necesario.
\end_layout

\begin_layout Section
Resumen
\end_layout

\begin_layout Standard
Como conclusión, haremos un resumen final de todas las técnicas expuestas:
\end_layout

\begin_layout Itemize
Doble pila: se basa en instalar ambas pilas de protocolos en cada nodo.
 Permite el intercambio de ambos tipos de paquetes.
 Si los nodos se encuentran en redes diferentes conectadas por zonas con
 distinta versión de IP, habrá que usar otro mecanismo.
\end_layout

\begin_layout Itemize
Túneles:
\end_layout

\begin_deeper
\begin_layout Itemize
Manuales: el usuario configura manualmente la dirección de los extremos
 del túnel.
\end_layout

\begin_layout Itemize
Automático: se establecen automáticamente a partir de una dirección 
\emph on
IPv4-compatible IPv6
\emph default
.
\end_layout

\begin_layout Itemize
Broker de túneles: consta de un servidor central que gestiona la creación
 de túneles, al que se conectan los clientes para solicitar la configuración.
\end_layout

\begin_layout Itemize
6to4: permite comunicar sitios IPv6 a través de zonas IPv4, por medio de
 direcciones de la forma 
\begin_inset Formula $\mathsf{2002:a.b.c.d::/48}$
\end_inset

.
\end_layout

\begin_layout Itemize
DSTM: permite la comunicación entre aplicaciones IPv4 a través de zonas
 IPv6.
\end_layout

\begin_layout Itemize
ISATAP: sirve para comunicar dos nodos duales por medio de IPv6 en una misma
 red IPv4.
 Usa direcciones con el formato 
\begin_inset Formula $\mathsf{prefijo::5efe:a.b.c.d}$
\end_inset

.
\end_layout

\begin_layout Itemize
Teredo: permite establecer conexiones IPv6 atravesando una red IPv4 con
 NAT.
 Debido a su complejidad, se usa como último recurso.
\end_layout

\end_deeper
\begin_layout Itemize
Traducción de protocolos:
\end_layout

\begin_deeper
\begin_layout Itemize
SIIT: traduce paquetes IP e ICMP sin guardar el estado de la conexión.
 Usa direcciones 
\emph on
IPv4-translatable IPv6
\emph default
.
\end_layout

\begin_layout Itemize
TRT: traduce conexiones TCP/UDP entre una zona IPv6 y otra zona IPv4, separándol
as en dos conexiones independientes.
\end_layout

\begin_layout Itemize
NAT-PT: conecta dos zonas con versiones de IP distintas sin necesidad de
 proporcionar una dirección IPv4 independiente a cada nodo IPv6.
\end_layout

\begin_layout Itemize
SOCKS: traduce paquetes a nivel de aplicación.
\end_layout

\end_deeper
\begin_layout Part
Análisis
\end_layout

\begin_layout Chapter
Informe de alcance y objetivos
\end_layout

\begin_layout Standard
Después de haber estudiado los aspectos teóricos de la migración de IPv4
 a IPv6, consideramos complidos los primeros objetivos del proyecto.
 Queda claro que es un problema complejo.
 Son muchas las posibles opciones a considerar, lo que dificulta en gran
 medida el trabajo de los administradores de red.
 Llegamos a la conclusión de que interesa crear una herramienta que automatice
 el proceso en la medida de lo posible.
\end_layout

\begin_layout Standard
Retomando los objetivos expuestos en el primer capítulo, nos centramos en
 los objetivos del desarrollo de la herramienta.
 Expondremos brevemente cada uno de ellos, para después describirlos en
 mayor profundidad:
\end_layout

\begin_layout Itemize
Formalizar matemáticamente el problema, de tal manera que pueda ser tratado
 por un ordenador.
\end_layout

\begin_layout Itemize
Definir una estrategia de resolución que permita tratar el problema de manera
 eficiente.
\end_layout

\begin_layout Itemize
Diseñar y desarrollar la aplicación que implementa la metodología anterior.
\end_layout

\begin_layout Standard
Como primer objetivo, planteamos el estudio de una metodología que permita
 formalizar el problema.
 Hasta ahora, los mecanismos de transición están definidos en lenguaje coloquial
, cosa que no puede ser entendida por una máquina.
 Si pretendemos automatizar el problema, debemos dar una definición matemática.
 Esta definición debe comprender todos los elementos que conforman un escenario
 de transición (aplicaciones, nodos terminales, y routers), así como un
 conjunto de reglas que permitan transformar un escenario hasta alcanzar
 una solución.
 Por tanto, deberemos estudiar los siguientes aspectos:
\end_layout

\begin_layout Itemize
Representación matemática de los escenarios.
\end_layout

\begin_layout Itemize
Simplificación de los escenarios, con el fin de obtener una representación
 más compacta que acelere su procesamiento posterior.
\end_layout

\begin_layout Itemize
Definición de una base de reglas, que caracterice cada uno de los mecanismos
 de transición.
 Cada regla definirá una transformación que se aplicará a un escenario concreto.
\end_layout

\begin_layout Standard
El segundo objetivo que planteamos es el estudio de una estrategia de resolución.
 Partiendo de una topología de red arbitraria, necesitamos poder encontrar
 todas las rutas posibles entre un nodo de origen y otro de destino.
 A partir de ahí, se deben evaluar todas las posibles soluciones para cada
 ruta en particular.
 El algoritmo debe ser los más eficiente posible.
 Los subobjetivos concretos de este apartado serán:
\end_layout

\begin_layout Itemize
Buscar un formato sencillo y flexible para almacenar topologías de red en
 disco.
\end_layout

\begin_layout Itemize
Definir un algoritmo de búsqueda que permita encontrar todas las rutas existente
s entre dos nodos de una topología.
\end_layout

\begin_layout Itemize
Definir un método para, a partir de una ruta lineal, buscar todas las soluciones
 resultado de aplicar la base de reglas.
\end_layout

\begin_layout Itemize
Obtener un sistema para evaluar y ordenar las soluciones obtenidas en base
 a diferentes criterios.
\end_layout

\begin_layout Standard
El tercer y último objetivo que planteamos es desarrollar una aplicación
 informática que implemente la anterior metodología, de tal manera que el
 administrador de red pueda introducir la topología deseada y los parámetros
 de búsqueda, y dejar que la aplicación encuentre todas las soluciones existente
s.
 En concreto, la aplicación debe ofrecer las siguientes opciones:
\end_layout

\begin_layout Itemize

\noun on
Gestionar topologías
\noun default
: el programa permitirá cargar, guardar, y crear nuevas topologías.
\end_layout

\begin_layout Itemize

\noun on
Editar topologías
\noun default
: a partir de una topología dada, permitirá añadir, editar y borrar nodos
 y enlaces.
\end_layout

\begin_layout Itemize

\noun on
Configurar costes
\noun default
: cada mecanismo de transición tendrá un coste asociado, que podrá ser configura
do por el usuario.
\end_layout

\begin_layout Itemize

\noun on
Buscar soluciones
\noun default
: el programa pedirá al usuario que introduzca las opciones de búsqueda.
 A continuación calculará todos los resultados, y mostrará un listado con
 las soluciones encontradas.
\end_layout

\begin_layout Itemize

\noun on
Ordenar soluciones
\noun default
: el programa permitirá ordenar las soluciones por diversos criterios de
 coste; por ejemplo, por latencia, ancho de banda consumido, etc.
\end_layout

\begin_layout Itemize

\noun on
Resaltar solución
\noun default
: indicará la ruta seguida por una solución en la topología, sin entrar
 en detalles.
\end_layout

\begin_layout Itemize

\noun on
Detallar solución
\noun default
: mostrará toda la información referente a los mecanismos que se han aplicado
 a un escenario para alcanzar la solución; por ejemplo, el tipo y los extremos
 de los túneles.
\end_layout

\begin_layout Standard

\end_layout

\begin_layout Chapter
Caracterización del problema
\end_layout

\begin_layout Section
Introducción
\end_layout

\begin_layout Standard
Hasta ahora, las decisiones sobre que mecanismos de transición se debían
 aplicar eran tomadas por personas.
 Nuestro objetivo es automatizar el problema, de manera que pueda ser resuelto
 por una máquina.
 Para ello necesitamos representar el problema de manera matemática.
 Al ser nuestro proyecto continuación de otro, heredaremos su metodología:
 la 
\emph on
Metodología MENINA
\emph default
 
\begin_inset LatexCommand citep
key "menina"

\end_inset

, que proporciona una notación para representar escenarios de red, y un
 álgebra para trabajar con ellos.
\end_layout

\begin_layout Standard
La representación de un problema debe tener en cuenta todos los elementos
 que lo componen; esto es, aplicaciones, nodos terminales, y red de interconexió
n.
 MENINA ofrece una representación abstracta de cada uno de estos tres componente
s.
 También formaliza los mecanismos de transición empleados, ofreciendo un
 conjunto de reglas que permiten refinar progresivamente un escenario de
 red hasta encontrar una solución.
 MENINA define tres tipos de componentes:
\end_layout

\begin_layout Itemize
Aplicaciones que se ejecutarán en los escenarios, usando una versión de
 IP concreta.
\end_layout

\begin_layout Itemize
Escenarios de red, que permiten la comunicación entre las aplicaciones.
 Están formados por los nodos terminales y la red de interconexión que hay
 entre ambos.
\end_layout

\begin_layout Itemize
Base de reglas que formaliza los mecanismos de transición, por medio de
 una definición algebraica.
\end_layout

\begin_layout Standard
Aunque se definen por separado, la metodología tiene en cuenta todos los
 elementos que forman la red en conjunto.
 A continuación veremos cada etapa del proceso con más detenimiento.
\end_layout

\begin_layout Section
Modelo conceptual
\end_layout

\begin_layout Subsection
Escenarios de red
\end_layout

\begin_layout Standard
MENINA trabaja con escenarios lineales; es decir, la red que comunica los
 nodos terminales es una secuencia lineal de routers intermedios.
 Por tanto, si partimos de un escenario con una topología arbitraria, deberemos
 convertirlo primero en un conjunto de escenarios lineales, buscando todos
 los caminos posibles entre el nodo de origen y el de destino.
\end_layout

\begin_layout Standard
Los escenarios se definen para todos los elementos que los forman: aplicaciones
 finales, nodos terminales, y red de interconexión.
 Por tanto, un escenario físico 
\begin_inset Formula $E_{f}$
\end_inset

 quedará representado como una tupla:
\begin_inset Formula \[
E_{f}=\left\langle A_{1},N_{1},RD_{f},N_{2},A_{2}\right\rangle \]

\end_inset


\end_layout

\begin_layout Standard
Donde 
\begin_inset Formula $A_{1}$
\end_inset

 y 
\begin_inset Formula $A_{2}$
\end_inset

 son las aplicaciones finales, 
\begin_inset Formula $N_{1}$
\end_inset

y 
\begin_inset Formula $N_{2}$
\end_inset

 son los nodos terminales sobre los que se ejecutan 
\begin_inset Formula $A_{1}$
\end_inset

 y 
\begin_inset Formula $A_{2}$
\end_inset

 respectivamente, y 
\begin_inset Formula $RD_{f}$
\end_inset

 es la red de destribución física.
 MENINA asume que las redes son simétricas (es decir, el camino de ida es
 el mismo que el de vuelta), y sólo se preocupa por el nivel IP, ya que
 el resto de niveles deberían funcionar de manera transparente a IP.
\end_layout

\begin_layout Subsection
Aplicaciones
\end_layout

\begin_layout Standard
Este proyecto sólo trata aplicaciones 
\emph on
unicast
\emph default
 donde las comunicaciones son 1 a 1.
 De cada aplicación sólo interesa saber la versión de IP que soporta:
\end_layout

\begin_layout Itemize
Aplicación exclusivamente IPv4, 
\begin_inset Formula $A_{4}$
\end_inset

.
\end_layout

\begin_layout Itemize
Aplicación exclusivamente IPv6, 
\begin_inset Formula $A_{6}$
\end_inset

.
\end_layout

\begin_layout Itemize
Aplicación dual, 
\begin_inset Formula $A_{d}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

 Puede usar ambos protocolos en función del nodo sobre el que se ejecute.
\end_layout

\begin_layout Standard
El conjunto de todos los tipos de aplicaciones posibles se representan en
 MENINA como 
\begin_inset Formula $\mathpzc{A}$
\end_inset

:
\begin_inset Formula \[
\mathpzc{A}=\left\{ A_{4},A_{6},A_{d}\right\} \]

\end_inset


\end_layout

\begin_layout Subsection
Nodos terminales
\end_layout

\begin_layout Standard
Al tratar los nodos sólo importa conocer su capacidad para usar diferentes
 versiones de IP; es decir, las pilas de protocolos que tienen instaladas.
 La metodología no tiene en cuenta el sistema operativo que esté instalado
 en cada nodo, pero al evaluar un escenario real habría que considerarlo,
 porque no todos los sistemas operativos ofrecen todos los mecanismos posibles.
\end_layout

\begin_layout Standard
Existen ciertos mecanismos de transición que se instalan en los nodos terminales
, dotándolos de capacidades especiales.
 En estos casos, MENINA usa la notación
\begin_inset Formula \[
Transici\acute{o}nNodo\left(N_{i}\right)=N_{j}\]

\end_inset

 donde 
\begin_inset Formula $N_{i}$
\end_inset

 y 
\begin_inset Formula $N_{j}$
\end_inset

 son nodos terminales.
 Estos mecanismos son independientes de la red, y sólo afectan al propio
 nodo.
 Para los casos que hemos estudiado, el único mecanismo existente es 
\emph on
IPv4-mapped IPv6
\emph default
, que permite que una aplicación IPv6 pueda comunicarse con otra aplicación
 IPv4.
\end_layout

\begin_layout Standard
Teniendo en cuenta todo lo anterior, se definen cuatro tipos de nodos:
\end_layout

\begin_layout Itemize
Nodo exclusivamente IPv4, 
\begin_inset Formula $N_{4}$
\end_inset

.
\end_layout

\begin_layout Itemize
Nodo exclusivamente IPv6, 
\begin_inset Formula $N_{6}$
\end_inset

.
\end_layout

\begin_layout Itemize
Nodo dual, 
\begin_inset Formula $N_{d}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

 Tiene instaladas ambas pilas de protocolos y puede ejecutar tanto aplicaciones
 IPv4 como IPv6.
\end_layout

\begin_layout Itemize
Nodo dual con direcciones IPv4-mapped IPv6, 
\begin_inset Formula $N_{d,MAP}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

 Es el resultado de aplicar el mecanismo 
\begin_inset Formula $Mapped\left(N_{d}\right)=N_{d,MAP}$
\end_inset

 a un nodo dual.
\end_layout

\begin_layout Standard
El conjunto de todos los tipos de nodos posibles se representan en MENINA
 como 
\begin_inset Formula $\mathpzc{N}$
\end_inset

:
\begin_inset Formula \[
\mathpzc{N}=\left\{ N_{4},N_{6},N_{d},N_{d,MAP}\right\} \]

\end_inset


\end_layout

\begin_layout Subsection
Routers intermedios
\end_layout

\begin_layout Standard
Los routers forman el camino que conecta los nodos terminales del escenario
 de red.
 La primera manera de clasificarlos sería atendiendo a la versión del protocolo
 IP que soportan.
\end_layout

\begin_layout Standard
Sin embargo, muchos routers añaden capacidades adicionales.
 La primera es la traducción de direcciones IPv4 o NAT, que sólo puede existir
 en los routers que tengan instalada la pila IPv4 (incluyendo los duales).
 La traducción de direcciones IPv6 no existe, por lo que no debemos preocuparnos
 por ella.
\end_layout

\begin_layout Standard
Existen otros mecanismos que se instalan en los routers, y se representan
 como
\begin_inset Formula \[
Transici\acute{o}nRouter\left(R_{i}\right)=R_{j}\]

\end_inset


\end_layout

\begin_layout Standard
donde 
\begin_inset Formula $R_{i}$
\end_inset

 y 
\begin_inset Formula $R_{j}$
\end_inset

 son routers intermedios.
 Estos mecanismos se usan para conectar dos redes adyacentes que usan versiones
 de IP distintas, por medio de traducción de paquetes.
 La traducción sólo se usa como último recurso, ya que implica modificar
 los paquetes y acarrea cierta pérdida de información.
 Para que un router soporte traducción debe ser forzosamente dual, ya que
 debe reconocer ambas versiones de IP.
 Los mecanismos de traducción que hemos estudiado son SIIT, TRT, NAT-PT,
 y SOCKS.
\end_layout

\begin_layout Standard
Teniendo en cuenta todo lo anterior, se definen los siguientes tipos de
 routers:
\end_layout

\begin_layout Itemize
Router exclusivamente IPv4, 
\begin_inset Formula $R_{4}$
\end_inset

.
\end_layout

\begin_layout Itemize
Router exclusivamente IPv6, 
\begin_inset Formula $R_{6}$
\end_inset

.
\end_layout

\begin_layout Itemize
Router dual, 
\begin_inset Formula $R_{d}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

Puede encaminar tanto tráfico IPv4 como IPv6.
\end_layout

\begin_layout Itemize
Router IPv4 con traducción de direcciones, 
\begin_inset Formula $R_{4}^{t}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

 Puede encaminar tráfico IPv4, y traducir direcciones IPv4 (NAT).
\end_layout

\begin_layout Itemize
Router dual con traducción de direcciones, 
\begin_inset Formula $R_{d}^{t}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

 Puede encaminar ambos protocolos, y traducir direcciones IPv4.
\end_layout

\begin_layout Itemize
Router dual con traducción de protocolos, 
\begin_inset Formula $R_{d,TP}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

 Es el resultado de aplicar un mecanismo de traducción a un router dual:
 
\begin_inset Formula $Traducci\acute{o}n\left(R_{d}\right)=R_{d,TP}$
\end_inset

.
\end_layout

\begin_layout Itemize
Router dual con traducción de protocolos y de direcciones, 
\begin_inset Formula $R_{d,TP}^{t}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

 Es el resultado de aplicar un mecanismo de traducción a un router dual
 con NAT: 
\begin_inset Formula $Traducci\acute{o}n\left(R_{d}^{t}\right)=R_{d,TP}^{t}$
\end_inset

.
\end_layout

\begin_layout Standard
El conjunto de todos los tipos de routers posibles se representan en MENINA
 como 
\begin_inset Formula $\mathpzc{R}$
\end_inset

:
\begin_inset Formula \[
\mathpzc{R}=\left\{ R_{4},R_{6},R_{d},R_{4}^{t},R_{d}^{t},R_{d,TP},R_{d,TP}^{t}\right\} \]

\end_inset


\end_layout

\begin_layout Subsection
Red de distribución
\end_layout

\begin_layout Standard
La red de distribución de un escenario es la secuencia de cero o más routers
 que forman el camino entre dos nodos terminales.
 MENINA define para la conexión de dos routers el símbolo 
\begin_inset Formula $\leftrightarrow$
\end_inset

, de tal modo que la conexión de dos routers 
\begin_inset Formula $R_{i}$
\end_inset

 y 
\begin_inset Formula $R_{j}$
\end_inset

 sería:
\begin_inset Formula \[
R_{i}\leftrightarrow R_{j}\qquad\textrm{donde}\; R_{i},R_{j}\in\mathpzc{R}\]

\end_inset


\end_layout

\begin_layout Standard
Para indicar que un router se conecta linealmente con uno o más routers,
 sin indicar la cantidad exacta, se utiliza la notación:
\begin_inset Formula \[
R_{i}\left(\leftrightarrow R_{j}\right)\star\qquad\textrm{donde}\; R_{i},R_{j}\in\mathpzc{R}\]

\end_inset


\end_layout

\begin_layout Standard
De esta manera, podemos representar la red de distribución de cualquier
 escenario:
\begin_inset Formula \[
RD_{f}\in\left\{ \emptyset,R_{i}\left(\leftrightarrow R_{j}\right)\star\right\} \qquad\textrm{donde}\; R_{i},R_{j}\in\mathpzc{R}\]

\end_inset


\end_layout

\begin_layout Standard
La conexión entre nodos terminales y routers también se representa con el
 símbolo 
\begin_inset Formula $\leftrightarrow$
\end_inset

.
 Por tanto, tenemos 
\begin_inset Formula $N_{i}\leftrightarrow N_{j}$
\end_inset

 para conectar dos nodos directamente sin pasar por routers intermedios,
 y 
\begin_inset Formula $N_{i}\leftrightarrow R_{j}$
\end_inset

 y 
\begin_inset Formula $R_{i}\leftrightarrow N_{j}$
\end_inset

 para comunicar un nodo terminal y un router.
\end_layout

\begin_layout Subsection
Representación de los escenarios
\end_layout

\begin_layout Standard
Vista ya la representación de cada elemento de un escenario por separado,
 podemos definir un escenario completo.
\end_layout

\begin_layout Standard
La ejecución de una aplicación sobre un nodo terminal se representa con
 el símbolo 
\begin_inset Formula $\diamond$
\end_inset

, de tal manera que si una aplicación 
\begin_inset Formula $A_{i}$
\end_inset

 se ejecuta sobre un nodo 
\begin_inset Formula $N_{j}$
\end_inset

, la representación sería:
\begin_inset Formula \[
A_{i}\diamond N_{j}\qquad\textrm{donde}\; A_{i}\in\mathpzc{A},\; N_{j}\in\mathpzc{N}\]

\end_inset


\end_layout

\begin_layout Standard
Finalmente, un escenario de transición 
\begin_inset Formula $E_{f}$
\end_inset

 que comunica dos aplicaciones 
\begin_inset Formula $A_{1}$
\end_inset

 y 
\begin_inset Formula $A_{2}$
\end_inset

 quedaría representado así:
\begin_inset Formula \[
\begin{array}{c}
E_{f}=\left\langle A_{1},N_{1},RD_{f},N_{2},A_{2}\right\rangle \\
\Downarrow\\
\left.\begin{array}{l}
A_{1}\diamond N_{1}\left(\leftrightarrow R_{i}\right)\star\leftrightarrow N_{2}\diamond A_{2}\\
\textrm{donde}\; A_{1},A_{2}\in\mathpzc{A},\; N_{1},N_{2}\in\mathpzc{N},\; R_{i}\in\mathpzc{R}\end{array}\right.\end{array}\]

\end_inset


\end_layout

\begin_layout Section
Formalización
\end_layout

\begin_layout Standard
Una vez descrito el escenario, la segunda fase de la metodología es la formaliza
ción.
 El resultado es un nuevo escenario equivalente al primero, pero más compacto.
 Para ello, se reconocen patrones dentro de la red, y se sustituyen por
 otros más simples.
 Al hacer esto se pierde la correspondencia con la red física, quedándonos
 con una representación abstracta.
 La formalización sólo trata la red de distribución, no teniendo en cuenta
 ni las aplicaciones ni los nodos terminales.
\end_layout

\begin_layout Standard
El proceso de formalización se divide a su vez en dos etapas: creación de
 zonas y definición de los operadores de conexión.
 Estudiaremos ambas a continuación.
\end_layout

\begin_layout Subsection
Creación de zonas
\end_layout

\begin_layout Standard
La primera etapa busca agrupar secuencias de nodos del mismo tipo en una
 única zona común que será tratada como una sola entidad.
 Dentro de una zona se cumplen dos propiedades: cualquier nodo puede ser
 alcanzado desde cualquier otro nodo, y los paquetes IP no se modifican.
 Las zonas se caracterizan por la versión de IP que usan, por lo que podemos
 distinguir cuatro tipos distintos:
\end_layout

\begin_layout Itemize
Zona IPv4 (
\begin_inset Formula $Z_{4}$
\end_inset

).
\begin_inset Formula $-$
\end_inset

 Es una subred que sólo soporta tráfico IPv4, y que no realiza traducción
 de direcciones (NAT).
 La transformación resultante es la siguiente:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
R_{4}\left(\leftrightarrow R_{4}\right)\star=Z_{4}\\
\Downarrow\\
A1\diamond N1\leftrightarrow R_{4}\left(\leftrightarrow R_{4}\right)\star\leftrightarrow N2\diamond A2=A1\diamond N1\leftrightarrow Z_{4}\leftrightarrow N2\diamond A2\end{array}\]

\end_inset


\end_layout

\begin_layout Itemize
Zona IPv6 (
\begin_inset Formula $Z_{6}$
\end_inset

).
\begin_inset Formula $-$
\end_inset

 Es una subred que sólo soporta tráfico IPv4.
 La transformación quedaría así:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
R_{6}\left(\leftrightarrow R_{6}\right)\star=Z_{6}\\
\Downarrow\\
A1\diamond N1\leftrightarrow R_{6}\left(\leftrightarrow R_{6}\right)\star\leftrightarrow N2\diamond A2=A1\diamond N1\leftrightarrow Z_{6}\leftrightarrow N2\diamond A2\end{array}\]

\end_inset


\end_layout

\begin_layout Itemize
Zona dual (
\begin_inset Formula $Z_{d}$
\end_inset

).
\begin_inset Formula $-$
\end_inset

 Es una subred que soporta tanto tráfico IPv4 como IPv6, pero sin traducción
 de direcciones.
 La transformación del escenario sería así.
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
R_{d}\left(\leftrightarrow R_{d}\right)\star=Z_{d}\\
\Downarrow\\
A1\diamond N1\leftrightarrow R_{d}\left(\leftrightarrow R_{d}\right)\star\leftrightarrow N2\diamond A2=A1\diamond N1\leftrightarrow Z_{d}\leftrightarrow N2\diamond A2\end{array}\]

\end_inset


\end_layout

\begin_layout Itemize
Zona vacía.
\begin_inset Formula $-$
\end_inset

 Es un tipo especial de zona que surge cuando los nodos terminales se conectan
 directamente el uno al otro, sin que haya un router intermedio.
 En este caso, al no haber restricciones de ningún tipo, se puede tomar
 la zona más genérica posible; esto es, una zona dual.
 Por tanto, la transformación sería la siguiente:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
A1\diamond N1\leftrightarrow N2\diamond A2=A1\diamond N1\leftrightarrow Z_{d}\leftrightarrow N2\diamond A2\]

\end_inset


\end_layout

\begin_layout Subsection
Definición de operadores de conexión
\end_layout

\begin_layout Standard
La segunda etapa busca unificar zonas adyacentes por medio de operadores
 de conexión, que suelen realizar funciones de traducción.
 Estos operadores se definen en función del tráfico que soportan.
 En MENINA existen cinco tipos de operadores, cada uno con un símbolo correspond
iente:
\end_layout

\begin_layout Itemize
Operador de conexión dual (
\begin_inset Formula $\otimes_{d}$
\end_inset

).
\begin_inset Formula $-$
\end_inset

 Permite conectar dos zonas IPv4 ó IPv6 a través de una zona dual:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
Z_{i}\leftrightarrow R_{d}\left(\leftrightarrow R_{d}\right)\star\leftrightarrow Z_{j}=Z_{i}\leftrightarrow Z_{d}\leftrightarrow Z_{j}=Z_{i}\otimes_{d}Z_{j}\\
\textrm{\qquad donde}\; Z_{i},Z_{j}\in\left\{ Z_{4},Z_{6}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Itemize
Operador de conexión IPv4 con traducción de direcciones IPv4 (
\begin_inset Formula $\odot_{4}$
\end_inset

).
\begin_inset Formula $-$
\end_inset

 Permite conectar dos zonas IPv4, realizando una traducción de direcciones
 (NAT):
\end_layout

\begin_layout Standard
\begin_inset Formula \[
Z_{i}\leftrightarrow R_{4}^{t}\leftrightarrow Z_{j}=Z_{i}\odot_{4}Z_{j}\]

\end_inset


\end_layout

\begin_layout Itemize
Operador de conexión dual con traducción de direcciones IPv4 (
\begin_inset Formula $\odot_{d}$
\end_inset

).
\begin_inset Formula $-$
\end_inset

 Combina los dos operadores anteriores, permitiendo el paso de tráfico IPv4
 e IPv6 y traduciendo direcciones IPv4:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
Z_{i}\leftrightarrow\left(Z_{d}\leftrightarrow\right)\star R_{d}^{t}\left(\leftrightarrow Z_{d}\right)\star\leftrightarrow Z_{j}=Z_{i}\odot_{d}Z_{j}\\
\textrm{\qquad donde}\; Z_{i},Z_{j}\in\left\{ Z_{4},Z_{6}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Itemize
Operador de conexión dual con traducción de protocolos IPv4 e IPv6 (
\begin_inset Formula $\boxtimes_{d}$
\end_inset

).
\begin_inset Formula $-$
\end_inset

 Permite el paso de ambos protocolos, y además puede traducir de IPv4 a
 IPv6 y viceversa:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
Z_{i}\leftrightarrow\left(Z_{d}\leftrightarrow\right)\star R_{d,TP}\left(\leftrightarrow Z_{d}\right)\star\leftrightarrow Z_{j}=Z_{i}\boxtimes_{d}Z_{j}\\
\textrm{\qquad donde}\; Z_{i},Z_{j}\in\left\{ Z_{4},Z_{6}\right\} ,Z_{i}\neq Z_{j}\end{array}\]

\end_inset


\end_layout

\begin_layout Itemize
Operador de conexión dual con traducción de direcciones IPv4 y traducción
 de protocolos IPv4 e IPv6 (
\begin_inset Formula $\boxdot_{d}$
\end_inset

).
\begin_inset Formula $-$
\end_inset

 Es el operador más genérico, ya que soporta las operaciones de todos los
 anteriores: 
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
Z_{i}\leftrightarrow\left(Z_{d}\leftrightarrow\right)\star R_{d,TP}^{t}\left(\leftrightarrow Z_{d}\right)\star\leftrightarrow Z_{j}=Z_{i}\boxdot_{d}Z_{j}\\
\textrm{\qquad donde}\; Z_{i},Z_{j}\in\left\{ Z_{4},Z_{6}\right\} ,Z_{i}\neq Z_{j}\end{array}\]

\end_inset


\end_layout

\begin_layout Section
Canonización
\end_layout

\begin_layout Standard
Si bien la fase de formalización simplifica la representación de un escenario,
 éste se puede simplificar aún mas mediante la canonización.
 La forma canónica de un escenario se define como la forma más simple posible,
 resultado de aplicar las siguientes reglas de reescritura:
\end_layout

\begin_layout Itemize
Conexión de zonas IPv4 utilizando 
\begin_inset Formula $\otimes_{d}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

 El resultado es una nueva zona IPv4 que engloba a las anteriores, y que
 opera como una zona básica:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
Z_{4}\left(\otimes_{d}Z_{4}\right)\star=Z_{4}\]

\end_inset


\end_layout

\begin_layout Itemize
Conexión de zonas IPv4 utilizando 
\begin_inset Formula $\odot_{d}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

 Puesto que sólo se usa el direccionamiento IPv4, se puede simplificar a
 un operador IPv4 con traducción de direcciones:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
Z_{4}\left(\odot_{d}Z_{4}\right)=Z_{4}\odot_{4}Z_{4}\]

\end_inset


\end_layout

\begin_layout Itemize
Conexión de zonas IPv4 utilizando 
\begin_inset Formula $\boxdot_{d}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

 Como sólo se usa el direccionamiento IPv4, se puede descartar la capacidad
 para traducir protocolos, obteniendo el mismo resultado que en el caso
 anterior:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
Z_{4}\left(\boxdot_{d}Z_{4}\right)=Z_{4}\odot_{4}Z_{4}\]

\end_inset


\end_layout

\begin_layout Itemize
Conexión de zonas IPv6 utilizando 
\begin_inset Formula $\otimes_{d}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

 Mismo caso que para IPv4.
 El resultado es una nueva zona IPv6 que engloba a las anteriores, y que
 opera como una zona básica:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
Z_{6}\left(\otimes_{d}Z_{6}\right)\star=Z_{6}\]

\end_inset


\end_layout

\begin_layout Itemize
Conexión de zonas IPv6 utilizando 
\begin_inset Formula $\boxtimes_{d}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

 Como ambas zonas son IPv6, se puede descartar la capacidad para traducir
 protocolos, obteniendo una zona IPv6 básica:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
Z_{6}\left(\boxtimes_{d}Z_{6}\right)\star=Z_{6}\left(\otimes_{d}Z_{6}\right)\star=Z_{6}\]

\end_inset


\end_layout

\begin_layout Itemize
Conexión de zonas IPv6 utilizando 
\begin_inset Formula $\odot_{d}$
\end_inset

 ó 
\begin_inset Formula $\boxdot_{d}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

 Al igual que en el caso, al ser ambas zonas del mismo tipo no es necesaria
 la capacidad para traducir protocolos.
 Por otro lado, la capacidad para traducir direcciones sólo se aplica a
 IPv4, por lo que también se puede descartar:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
Z_{6}\boxdot_{d}Z_{6}=Z_{6}\odot_{d}Z_{6}=Z_{6}\]

\end_inset


\end_layout

\begin_layout Itemize
Conexión de zonas duales utilizando 
\begin_inset Formula $\otimes_{d}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

 Como ocurría con las 
\begin_inset Formula $Z_{4}$
\end_inset

 y las 
\begin_inset Formula $Z_{6}$
\end_inset

, el resultado es una nueva zona que contiene a las anteriores, y que opera
 como una zona básica.
\end_layout

\begin_layout Standard
\begin_inset Formula \[
Z_{d}\left(\otimes_{d}Z_{d}\right)\star=Z_{d}\]

\end_inset


\end_layout

\begin_layout Itemize
Conexión de una zona dual en una posición intermedia utilizando 
\begin_inset Formula $\otimes_{d}$
\end_inset

.
\begin_inset Formula $-$
\end_inset

 Como las zonas duales permiten tanto el tráfico IPv4 como IPv6, si encontramos
 una secuencia de zonas duales no terminales entre dos zonas de cualquier
 tipo, podemos descartarlas:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
Z_{i}\otimes_{d}Z_{d}\left(\otimes_{d}Z_{d}\right)\star\otimes_{d}Z_{j}=Z_{i}\otimes_{d}Z_{j}\\
\textrm{\qquad donde}\; Z_{i},Z_{j}\in\left\{ Z_{4},Z_{6},Z_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Section
Túneles
\end_layout

\begin_layout Standard
Una vez que tenemos un escenario formalizado y canonizado, podemos empezar
 a aplicar reglas de transformación que nos permitan alcanzar la conectividad
 entre los nodos terminales.
 Estas reglas vienen en forma de tres tipos de túneles que se establecen
 entre diferentes partes del escenario: túneles entre zonas, entre zonas
 y nodos terminales, y entre los dos nodos terminales.
 Al aplicar estas reglas buscamos convertir una red heterogénea en una red
 homogénea, simplificando al máximo el escenario.
 A continuación veremos cada regla con más detalle.
\end_layout

\begin_layout Subsection
Túneles entre zonas intermedias
\end_layout

\begin_layout Standard
Estos mecanismos se aplican a las zonas intermedias que forman la red de
 interconexión del escenario.
 El objetivo es que dos zonas con la misma versión de IP se puedan comunicar
 a través de una zona con una versión distinta, estableciendo para ello
 un túnel.
 Existen tres clases de tunelado, que veremos a continuación: túneles manuales,
 broker de túneles, y túneles automáticos 
\emph on
6to4
\emph default
.
\end_layout

\begin_layout Subsubsection
Túneles manuales
\end_layout

\begin_layout Standard
Se distinguen tres tipos de túneles, en función del tráfico que va a pasar
 por la zona intermedia: IPv4 dentro de IPv6, IPv6 dentro de IPv4, e IPv6
 dentro de IPv4 con UDP:
\end_layout

\begin_layout Itemize
IPv4 dentro de IPv6.
\begin_inset Formula $-$
\end_inset

 Dos zonas IPv4 quieren comunicarse a través de una zona IPv6.
 Si había traducción de direcciones, el túnel debe respetarla:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
T_{v6\left(v4\right)}\left(A1\diamond N1\leftrightarrow\underline{Z_{4}op_{1}Z_{6}op_{2}Z_{4}}\leftrightarrow N2\diamond A2\right)=A1\diamond N1\leftrightarrow Z_{4}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1},op_{2}\in\left\{ \otimes_{d},\boxtimes_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
T_{v6\left(v4\right)}\left(A1\diamond N1\leftrightarrow\underline{Z_{4}op_{1}Z_{6}op_{2}Z_{4}}\leftrightarrow N2\diamond A2\right)=A1\diamond N1\leftrightarrow Z_{4}\odot_{4}Z_{4}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1}\in\left\{ \otimes_{d},\boxtimes_{d}\right\} ,op_{2}\in\left\{ \odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
T_{v6\left(v4\right)}\left(A1\diamond N1\leftrightarrow\underline{Z_{4}op_{1}Z_{6}op_{2}Z_{4}}\leftrightarrow N2\diamond A2\right)=A1\diamond N1\leftrightarrow Z_{4}\odot_{4}Z_{4}\odot_{4}Z_{4}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1},op_{2}\in\left\{ \odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Itemize
IPv6 dentro de IPv4.
\begin_inset Formula $-$
\end_inset

 Dos zonas IPv6 quieren comunicarse a través de una zona IPv4.
 Este caso es más sencillo ya que no hay traducción de direcciones:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
T_{v4\left(v6\right)}\left(A1\diamond N1\leftrightarrow\underline{Z_{6}op_{1}Z_{4}op_{2}Z_{6}}\leftrightarrow N2\diamond A2\right)=A1\diamond N1\leftrightarrow Z_{6}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1},op_{2}\in\left\{ \otimes_{d},\boxtimes_{d},\odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Itemize
IPv6 dentro de UDP IPv4.
\begin_inset Formula $-$
\end_inset

 Este mecanismo se usa cuando dos zonas IPv6 quieren comunicarse a través
 de una o más zonas IPv4 que emplean traducción de direcciones.
 Para ello se deben usar paquetes UDP, y así poder atravesar el NAT:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
T_{udp\left(v4\left(v6\right)\right)}\left(A1\diamond N1\leftrightarrow\underline{Z_{6}op_{1}Z_{4}\left(\odot_{4}Z_{4}\right)\star op_{2}Z_{6}}\leftrightarrow N2\diamond A2\right)=A1\diamond N1\leftrightarrow Z_{6}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1},op_{2}\in\left\{ \otimes_{d},\boxtimes_{d},\odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Subsubsection
Broker de túneles
\end_layout

\begin_layout Standard
El broker de túneles es mur parecido al caso anterior, con las mismas situacione
s.
 La diferencia es que ahora los túneles se configuran de manera automática.
 Como antes, distinguimos tres tipos de túneles:
\end_layout

\begin_layout Itemize
IPv4 dentro de IPv6:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
Broker_{v6\left(v4\right)}\left(A1\diamond N1\leftrightarrow\underline{Z_{4}op_{1}Z_{6}op_{2}Z_{4}}\leftrightarrow N2\diamond A2\right)=A1\diamond N1\leftrightarrow Z_{4}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1},op_{2}\in\left\{ \otimes_{d},\boxtimes_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
Broker_{v6\left(v4\right)}\left(A1\diamond N1\leftrightarrow\underline{Z_{4}op_{1}Z_{6}op_{2}Z_{4}}\leftrightarrow N2\diamond A2\right)=A1\diamond N1\leftrightarrow Z_{4}\odot_{4}Z_{4}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1}\in\left\{ \otimes_{d},\boxtimes_{d}\right\} ,op_{2}\in\left\{ \odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
Broker_{v6\left(v4\right)}\left(A1\diamond N1\leftrightarrow\underline{Z_{4}op_{1}Z_{6}op_{2}Z_{4}}\leftrightarrow N2\diamond A2\right)=A1\diamond N1\leftrightarrow Z_{4}\odot_{4}Z_{4}\odot_{4}Z_{4}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1},op_{2}\in\left\{ \odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Itemize
IPv6 dentro de IPv4:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
Broker_{v4\left(v6\right)}\left(A1\diamond N1\leftrightarrow\underline{Z_{6}op_{1}Z_{4}op_{2}Z_{6}}\leftrightarrow N2\diamond A2\right)=A1\diamond N1\leftrightarrow Z_{6}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1},op_{2}\in\left\{ \otimes_{d},\boxtimes_{d},\odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Itemize
IPv6 dentro de UDP IPv4:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
Broker_{udp\left(v4\left(v6\right)\right)}\left(A1\diamond N1\leftrightarrow\underline{Z_{6}op_{1}Z_{4}\left(\odot_{4}Z_{4}\right)\star op_{2}Z_{6}}\leftrightarrow N2\diamond A2\right)=A1\diamond N1\leftrightarrow Z_{6}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1},op_{2}\in\left\{ \otimes_{d},\boxtimes_{d},\odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Standard

\end_layout

\begin_layout Subsubsection
Túneles 6to4
\end_layout

\begin_layout Standard
Este mecanismo establece un túnel automático que permite al tráfico IPv6
 atravesar una zona IPv4, siempre que ésta no emplee traducción de direcciones.
 Es por tanto un mecanismo de transición entre zonas:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
6to4\left(A1\diamond N1\leftrightarrow\underline{Z_{6}op_{1}Z_{4}op_{2}Z_{6}}\leftrightarrow N2\diamond A2\right)=A1\diamond N1\leftrightarrow Z_{6}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1},op_{2}\in\left\{ \otimes_{d},\boxtimes_{d},\odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Subsection
Túneles entre una zona y un nodo terminal
\end_layout

\begin_layout Standard
Estos mecanismos permiten a un nodo terminal con una determinada versión
 de IP comunicarse con una zona intermedia de la red de interconexión que
 usa la misma versión de IP, a través de zonas con una versión de IP distinta.
 Según el estudio que se hizo, se distinguen cinco tipos de tunelado: túneles
 manuales, broker de túneles, DSTM, Teredo, e ISATAP.
\end_layout

\begin_layout Subsubsection
Túneles manuales
\end_layout

\begin_layout Standard
Estos túneles son muy similares a los que se establecían entre zonas intermedias.
 Al igual que sucedía con aquellos, podemos distinguir tres casos en función
 de la zona intermedia que encaminará el tráfico:
\end_layout

\begin_layout Itemize
IPv4 dentro de IPv6.
\begin_inset Formula $-$
\end_inset

 Un nodo dual quiere intercambiar tráfico IPv4 a través de una zona IPv6.
 Si hay traducción de direcciones, el túnel debe mantenerla:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
T_{v6\left(v4\right)}\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{6}op_{1}Z_{4}}\leftrightarrow N2\diamond A2\right)=A1\diamond N_{d}\leftrightarrow Z_{4}\leftrightarrow N2\diamond A2\\
\textrm{\qquad donde}\; op_{1}\in\left\{ \otimes_{d},\boxtimes_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
T_{v6\left(v4\right)}\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{6}op_{1}Z_{4}}\leftrightarrow N2\diamond A2\right)=A1\diamond N_{d}\leftrightarrow Z_{4}\odot_{4}Z_{4}\leftrightarrow N2\diamond A2\\
\textrm{\qquad donde}\; op_{1}\in\left\{ \odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Itemize
IPv6 dentro de IPv4.
\begin_inset Formula $-$
\end_inset

 Un nodo dual quiere intercambiar tráfico IPv6 a través de una zona IPv4,
 que no usa traducción de direcciones:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
T_{v4\left(v6\right)}\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{4}op_{1}Z_{6}}\leftrightarrow N2\diamond A2\right)=A1\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1}\in\left\{ \otimes_{d},\boxtimes_{d},\odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Itemize
IPv6 dentro de UDP IPv4.
\begin_inset Formula $-$
\end_inset

 Un nodo dual quiere intercambiar tráfico IPv6 a través de una zona IPv4,
 que usa traducción de direcciones.
 Para poder atravesar el NAT, se encapsulan los datagramas IPv6 dentro de
 paquetes UDP:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
T_{udp\left(v4\left(v6\right)\right)}\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{4}\left(\odot_{4}Z_{4}\right)\star op_{1}Z_{6}}\leftrightarrow N2\diamond A2\right)=A1\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1}\in\left\{ \otimes_{d},\boxtimes_{d},\odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Subsubsection
Broker de túneles
\end_layout

\begin_layout Standard
Al igual que ocurría con los túneles entre zonas intermedias, el broker
 de túneles proporciona configuración automática para los túneles que se
 acaban de ver.
 Se distinguen tres casos:
\end_layout

\begin_layout Itemize
IPv4 dentro de IPv6:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
Broker_{v6\left(v4\right)}\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{6}op_{1}Z_{4}}\leftrightarrow N2\diamond A2\right)=A1\diamond N_{d}\leftrightarrow Z_{4}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1}\in\left\{ \otimes_{d},\boxtimes_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
Broker_{v6\left(v4\right)}\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{6}op_{1}Z_{4}}\leftrightarrow N2\diamond A2\right)=A1\diamond N_{d}\leftrightarrow Z_{4}\odot_{4}Z_{4}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1}\in\left\{ \odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Itemize
IPv6 dentro de IPv4:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
Broker_{v4\left(v6\right)}\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{4}op_{1}Z_{6}}\leftrightarrow N2\diamond A2\right)=A1\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1}\in\left\{ \otimes_{d},\boxtimes_{d},\odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Itemize
IPv6 dentro de UDP IPv4:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
Broker_{udp\left(v4\left(v6\right)\right)}\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{4}\left(\odot_{4}Z_{4}\right)\star op_{1}Z_{6}}\leftrightarrow N2\diamond A2\right)=A1\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1}\in\left\{ \otimes_{d},\boxtimes_{d},\odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Subsubsection
DSTM
\end_layout

\begin_layout Standard
DSTM permite a un nodo dual comunicarse con una zona IPv4, atravesando una
 zona IPv6 por medio de un túnel.
 Si el operador intermedio realiza traducción de direcciones, el escenario
 resultante lo conservará:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
DSTM\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{6}op_{1}Z_{4}}\leftrightarrow N2\diamond A2\right)=A1\diamond N1\leftrightarrow Z_{4}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1}\in\left\{ \otimes_{d},\boxtimes_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
DSTM\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{6}op_{1}Z_{4}}\leftrightarrow N2\diamond A2\right)=A1\diamond N1\leftrightarrow Z_{4}op_{1}Z_{4}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1}\in\left\{ \odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Subsubsection
Teredo
\end_layout

\begin_layout Standard
Teredo es un mecanismo que permite que un nodo dual se pueda comunicar con
 una zona IPv6, atravesando una zona IPv4, cuando en ésta zona se realiza
 traducción de direcciones.
 Para ello se encapsulan los paquetes IPv6 dentro de UDP IPv4:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
Teredo\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{4}\left(\odot_{4}Z_{4}\right)\star op_{1}Z_{6}}\leftrightarrow N2\diamond A2\right)=A1\diamond N1\leftrightarrow Z_{6}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1}\in\left\{ \otimes_{d},\boxtimes_{d},\odot_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Subsubsection
ISATAP
\end_layout

\begin_layout Standard
ISATAP configura túneles IPv6 dentro de IPv4, normalmente dentro de una
 misma red en la que no existe traducción de direcciones:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
ISATAP\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{4}op_{1}Z_{6}}\leftrightarrow N2\diamond A2\right)=A1\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N2\diamond A2\\
\textrm{donde}\; op_{1}\in\left\{ \otimes_{d},\boxtimes_{d}\right\} \end{array}\]

\end_inset


\end_layout

\begin_layout Subsection
Túneles entre nodos terminales
\end_layout

\begin_layout Standard
Estos mecanismos se aplican sobre escenarios cuya red de interconexión tiene
 una única zona.
 Permiten que dos nodos terminales con la misma versión de IP se comuniquen
 a través de una zona con una versión distinta.
 Encontramos dos tipos de tunelado: manual e ISATAP.
\end_layout

\begin_layout Subsubsection
Túneles manuales
\end_layout

\begin_layout Standard
Como en los casos anteriores, se dan tres tipos de túneles en función del
 tráfico que pasa a través de la zona intermedia:
\end_layout

\begin_layout Itemize
IPv4 dentro de IPv6.
\begin_inset Formula $-$
\end_inset

 Dos nodos duales quieren intercambiar tráfico IPv4 a través de una zona
 IPv6:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
T_{v6\left(v4\right)}\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{d}}\diamond A2\right)=A1\diamond N_{d}\leftrightarrow Z_{4}\leftrightarrow N_{d}\diamond A2\]

\end_inset


\end_layout

\begin_layout Itemize
IPv6 dentro de IPv4.
\begin_inset Formula $-$
\end_inset

 Dos nodos duales quieren intercambiar tráfico IPv6 a través de una zona
 IPv4:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
T_{v4\left(v6\right)}\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{4}\leftrightarrow N_{d}}\diamond A2\right)=A1\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{d}\diamond A2\]

\end_inset


\end_layout

\begin_layout Itemize
IPv6 dentro de UDP IPv4.
\begin_inset Formula $-$
\end_inset

 Dos nodos duales quieren comunicarse a través de una zona IPv4 con NAT,
 para lo que encapsulan datagramas IPv6 dentro de paquetes UDP:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
T_{udp\left(v4\left(v6\right)\right)}\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{4}\left(\odot_{4}Z_{4}\right)\star\leftrightarrow N_{d}}\diamond A2\right)=A1\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{d}\diamond A2\]

\end_inset


\end_layout

\begin_layout Subsubsection
ISATAP
\end_layout

\begin_layout Standard
ISATAP configura túneles IPv6 dentro de IPv4, normalmente dentro de una
 misma red en la que no existe traducción de direcciones.
 En este caso se aplica entre los dos nodos terminales:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
ISATAP\left(A1\diamond\underline{N_{d}\leftrightarrow Z_{4}\leftrightarrow N_{d}}\diamond A2\right)=A1\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{d}\diamond A2\]

\end_inset


\end_layout

\begin_layout Section
Modificaciones sobre redes finales
\end_layout

\begin_layout Standard
La última fase del proceso es la modificación sobre redes finales.
 Una vez que se han terminado de aplicar todas las transformaciones posibles,
 y ya no quedan más opciones, pueden darse tres situaciones:
\end_layout

\begin_layout Itemize
Que el escenario no ofrezca ningún tipo de conectividad.
\end_layout

\begin_layout Itemize
Que el escenario permita la conexión directa de los dos nodos terminales.
\end_layout

\begin_layout Itemize
Que el escenario no permita la conexión directa, pero ésta pueda alcanzarse
 modificando alguno de los nodos terminales.
\end_layout

\begin_layout Standard
Si nos encontramos en el último caso, se aplicará alguna de las reglas que
 se verán a continuación.
 Estas reglas se clasifican a su vez en cuatro categorías, según el tipo
 de red que nos encontremos: redes básicas e irreducibles, redes de dos
 zonas, de tres zonas, y fragmentos intermedios de la red.
\end_layout

\begin_layout Subsection
Redes básicas
\end_layout

\begin_layout Standard
Las redes básicas son aquellas que no se pueden reducir.
 Esto incluye los tres tipos de redes de una sola zona (
\begin_inset Formula $Z_{4}$
\end_inset

, 
\begin_inset Formula $Z_{6}$
\end_inset

 y 
\begin_inset Formula $Z_{d}$
\end_inset

), así como las redes IPv4 con traducción de direcciones (
\begin_inset Formula $Z_{4}\odot_{4}Z_{4}$
\end_inset

).
 Por otro lado, podemos encontrar tres combinaciones de aplicaciones: que
 ambas sean IPv4, que ambas sean IPv6, o que usen versiones distintas de
 IP.
 Esto nos da un total de doce combinaciones, que expondremos por separado.
\end_layout

\begin_layout Subsubsection
Zonas IPv4 con aplicaciones IPv4
\end_layout

\begin_layout Standard
Expondremos en primer lugar los escenarios en los que se puede establecer
 la conectividad:
\end_layout

\begin_layout Itemize
Escenario solución 1:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
A_{4}\diamond N_{4}\leftrightarrow Z_{4}\leftrightarrow N_{4}\diamond A_{4}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario solución 2:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
A_{4}\diamond N_{4}\leftrightarrow Z_{4}\leftrightarrow N_{d}\diamond A_{4}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario solución 3:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
A_{4}\diamond N_{d}\leftrightarrow Z_{4}\leftrightarrow N_{d}\diamond A_{4}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
A continuación expondremos los escenarios en los que no se puede establecer
 la conectividad:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 En caso de tener una aplicación IPv4 sobre un nodo IPv6, éste se transformará
 en dual por medio de la instalación del mecanismo Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{6}\leftrightarrow Z_{4}\leftrightarrow N_{i}\diamond A_{4}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} \end{array}\right.\\
\Downarrow\\
N_{6}\rightarrow N_{d}:\quad A_{4}\diamond N_{d}\leftrightarrow Z_{4}\leftrightarrow N_{i}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection
Zonas IPv4 con aplicaciones IPv6
\end_layout

\begin_layout Standard
Expondremos en primer lugar los escenarios en los que se puede establecer
 la conectividad:
\end_layout

\begin_layout Itemize
Escenario solución 1:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
A_{6}\diamond N_{d,MAP}\leftrightarrow Z_{4}\leftrightarrow N_{d,MAP}\diamond A_{6}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
A continuación expondremos los escenarios en los que no se puede establecer
 la conectividad:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 En caso de tener una aplicación 
\begin_inset Formula $A_{6}$
\end_inset

 sobre un nodo 
\begin_inset Formula $N_{4}$
\end_inset

 ó 
\begin_inset Formula $N_{6}$
\end_inset

 conectado a una zona 
\begin_inset Formula $Z_{4}$
\end_inset

, deberá transformarse el nodo en dual mediante la instalación del mecanismo
 Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{6}\diamond N_{j}\leftrightarrow Z_{4}\leftrightarrow N_{i}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; N_{j}\in\left\{ N_{4},N_{6}\right\} \end{array}\right.\\
\Downarrow\\
N_{j}\rightarrow N_{d}:\quad A_{6}\diamond N_{d}\leftrightarrow Z_{4}\leftrightarrow N_{i}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 En caso de que ambas aplicaciones se ejecuten sobre nodos duales, hay dos
 opciones.
 La primera sería instalar el mecanismo Mapped sobre ambos nodos, mientras
 que la segunda sería crear un túnel IPv6 en IPv4:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
A_{6}\diamond N_{d}\leftrightarrow Z_{4}\leftrightarrow N_{d}\diamond A_{6}\\
\Downarrow\\
\left.\begin{array}{l}
N_{d}\rightarrow N_{d,MAP}:\quad A_{6}\diamond N_{d,MAP}\leftrightarrow Z_{4}\leftrightarrow N_{d,MAP}\diamond A_{6}\\
T_{v4\left(v6\right)}\left(A_{6}\diamond\underline{N_{d}\leftrightarrow Z_{4}\leftrightarrow N_{d}}\diamond A_{6}\right)=A_{6}\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{d}\diamond A_{6}\end{array}\right.\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection
Zonas IPv4 con aplicaciones heterogéneas
\end_layout

\begin_layout Standard
Expondremosen primer lugar los escenarios en los que se puede establecer
 la conectividad:
\end_layout

\begin_layout Itemize
Escenario solución 1: 
\begin_inset Formula \[
A_{4}\diamond N_{4}\leftrightarrow Z_{4}\leftrightarrow N_{d,MAP}\diamond A_{6}\]

\end_inset


\end_layout

\begin_layout Itemize
Escenario solución 2: 
\begin_inset Formula \[
A_{4}\diamond N_{d}\leftrightarrow Z_{4}\leftrightarrow N_{d,MAP}\diamond A_{6}\]

\end_inset


\end_layout

\begin_layout Standard
A continuación expondremos los escenarios en los que no se puede establecer
 la conectividad:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 Si una aplicación se ejecuta sobre un nodo con distinta versión de IP,
 éste deberá transformarse en dual mediante la instalación del mecanismo
 Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{6}\leftrightarrow Z_{4}\leftrightarrow N_{i}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} \end{array}\right.\\
\Downarrow\\
N_{6}\rightarrow N_{d}:\quad A_{4}\diamond N_{d}\leftrightarrow Z_{4}\leftrightarrow N_{i}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 Si la versión de IP de un nodo terminal es distinta de la zona a la que
 se conecta o de la aplicación que ejecuta, deberá transformarse en dual
 mediante la instalación del mecanismo Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard

\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{4}\leftrightarrow N_{j}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; N_{j}\in\left\{ N_{4},N_{6}\right\} \end{array}\right.\\
\Downarrow\\
N_{j}\rightarrow N_{d}:\quad A_{4}\diamond N_{i}\leftrightarrow Z_{4}\leftrightarrow N_{d}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 3.
 Si la aplicación 
\begin_inset Formula $A_{6}$
\end_inset

 se ejecuta sobre un nodo dual, podrá instalarse el mecanismo Mapped:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{4}\leftrightarrow N_{d}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{d}\right\} \end{array}\right.\\
\Downarrow\\
N_{d}\rightarrow N_{d,MAP}:\quad A_{4}\diamond N_{i}\leftrightarrow Z_{4}\leftrightarrow N_{d,MAP}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection
Zonas IPv6 con aplicaciones IPv4
\end_layout

\begin_layout Standard
El primer caso para zonas IPv6 que podemos encontrar es que las aplicaciones
 sean IPv4.
 En esta situación las únicas soluciones posibles son transformar la aplicación
 en dual (lo que queda fuera del alcance de nuestro proyecto), o transformar
 los nodos terminales en duales para posteriormente crear un túnel, y así
 llegar a una de las situaciones expuestas anteriormente.
 Veamos en primer lugar los escenarios en los que se puede establecer conectivid
ad:
\end_layout

\begin_layout Itemize
Escenario solución 1: 
\begin_inset Formula \[
A_{4}\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{d}\diamond N_{4}\]

\end_inset


\end_layout

\begin_layout Standard
A continuación expondremos los escenarios en los que no se puede establecer
 la conectividad:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 Si la versión de IP del nodo difiere de la aplicación o de la red, deberá
 instalarse el mecanismo Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{j}\leftrightarrow Z_{6}\leftrightarrow N_{i}\diamond A_{4}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; N_{j}\in\left\{ N_{4},N_{6}\right\} \end{array}\right.\\
\Downarrow\\
N_{j}\rightarrow N_{d}:\quad A_{4}\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{i}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 Si ambos nodos son ya de por sí duales, se puede establecer un túnel IPv4
 en IPv6:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
A_{4}\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{d}\diamond A_{4}\\
\Downarrow\\
T_{v6\left(v4\right)}\left(A_{4}\diamond\underline{N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{d}}\diamond A_{4}\right)=A_{4}\diamond N_{d}\leftrightarrow Z_{4}\leftrightarrow N_{d}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection
Zonas IPv6 con aplicaciones IPv6
\end_layout

\begin_layout Standard
Otro caso que podemos encontrar es que las aplicaciones sean IPv6.
 Si los nodos terminales son IPv6 o duales, no habrá problemas:
\end_layout

\begin_layout Itemize
Escenario solución 1: 
\begin_inset Formula \[
A_{6}\diamond N_{6}\leftrightarrow Z_{6}\leftrightarrow N_{6}\diamond A_{6}\]

\end_inset


\end_layout

\begin_layout Itemize
Escenario solución 2: 
\begin_inset Formula \[
A_{6}\diamond N_{6}\leftrightarrow Z_{6}\leftrightarrow N_{d}\diamond A_{6}\]

\end_inset


\end_layout

\begin_layout Itemize
Escenario solución 3: 
\begin_inset Formula \[
A_{6}\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{d}\diamond A_{6}\]

\end_inset


\end_layout

\begin_layout Standard
Veamos los escenarios en los que no se puede establecer la conectividad:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 Si alguno de los nodos es IPv4, habrá que recurrir a la instalación del
 mecanismo Dual Stack
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{6}\diamond N_{4}\leftrightarrow Z_{6}\leftrightarrow N_{i}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} \end{array}\right.\\
\Downarrow\\
N_{4}\rightarrow N_{d}:\quad A_{6}\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{i}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection
Zonas IPv6 con aplicaciones heterogéneas
\end_layout

\begin_layout Standard
El último caso que podemos encontrar es que las dos aplicaciones usen versiones
 de IP distintas.
 Este caso es problemático, porque la única manera de alcanzar una solución
 es transformar los dos nodos terminales en duales, así como la aplicación
 IPv4 en dual.
 Como ya se dijo antes, esto queda fuera del ámbito de nuestro proyecto.
 De todas maneras, estudiaremos las transformaciones necesarias para acercar
 el escenario lo más posible a la solución final.
 Veamos en primer lugar los escenarios sobre los que se podría establecer
 la conectividad:
\end_layout

\begin_layout Itemize
Escenario solución 1: 
\begin_inset Formula \[
A_{6}\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{d}\diamond A_{4}\]

\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
Nota: transformar 
\begin_inset Formula $A_{4}$
\end_inset

 en 
\begin_inset Formula $A_{d}$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
Veamos ahora los escenarios en los que no se puede establecer la conectividad:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 En caso de que la versión de IP de la aplicación y del nodo terminal sean
 diferentes, se instalará el mecanismo Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{6}\diamond N_{4}\leftrightarrow Z_{6}\leftrightarrow N_{i}\diamond A_{4}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} \end{array}\right.\\
\Downarrow\\
N_{4}\rightarrow N_{d}:\quad A_{6}\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{i}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 Si la versión de IP de un nodo terminal es diferente de la zona a la que
 se conecta, se instalará el mecanismo Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{6}\diamond N_{i}\leftrightarrow Z_{6}\leftrightarrow N_{j}\diamond A_{4}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\quad N_{j}\in\left\{ N_{4},N_{6}\right\} \end{array}\right.\\
\Downarrow\\
N_{j}\rightarrow N_{d}:\quad A_{6}\diamond N_{i}\leftrightarrow Z_{6}\leftrightarrow N_{d}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 3.
 Si ambos nodos terminales son duales, se puede instalar un túnel para crear
 una zona virtual IPv4, encontrándonos así uno de los casos expuestos anteriorme
nte:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
A_{6}\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{d}\diamond A_{4}\\
\Downarrow\\
T_{v6\left(v4\right)}\left(A_{6}\diamond\underline{N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{d}}\diamond A_{4}\right)=A_{6}\diamond N_{d}\leftrightarrow Z_{4}\leftrightarrow N_{d}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection
Zonas duales con aplicaciones IPv4
\end_layout

\begin_layout Standard
Si ambas aplicaciones son IPv4, la zona dual se comportará como si fuera
 también IPv4.
 Por tanto, se transformará la 
\begin_inset Formula $Z_{d}$
\end_inset

 en 
\begin_inset Formula $Z_{4}$
\end_inset

, y se considerará el escenario igual que en el apartado 6.6.1.1:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
A_{4}\diamond N_{i}\leftrightarrow Z_{d}\leftrightarrow N_{j}\diamond A_{4}=A_{4}\diamond N_{i}\leftrightarrow Z_{4}\leftrightarrow N_{j}\diamond A_{4}\]

\end_inset


\end_layout

\begin_layout Subsubsection
Zonas duales con aplicaciones IPv6
\end_layout

\begin_layout Standard
Si ambas aplicaciones son IPv6, la zona dual se comportará como si fuera
 también IPv6.
 Por tanto, se transformará la 
\begin_inset Formula $Z_{d}$
\end_inset

 en 
\begin_inset Formula $Z_{4}$
\end_inset

, y se considerará el escenario igual que en el apartado 6.6.1.5:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
A_{6}\diamond N_{i}\leftrightarrow Z_{d}\leftrightarrow N_{j}\diamond A_{6}=A_{6}\diamond N_{i}\leftrightarrow Z_{6}\leftrightarrow N_{j}\diamond A_{6}\]

\end_inset


\end_layout

\begin_layout Subsubsection
Zonas duales con aplicaciones heterogéneas
\end_layout

\begin_layout Standard
Si las aplicaciones son heterogéneas, no podemos decidir a priori que tipo
 de encaminamiento usar.
 En ese caso, la única opción es tratar las dos alternativas posibles:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
A_{4}\diamond N_{i}\leftrightarrow Z_{d}\leftrightarrow N_{j}\diamond A_{6}=\left\{ \begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{4}\leftrightarrow N_{j}\diamond A_{6}\\
A_{4}\diamond N_{i}\leftrightarrow Z_{6}\leftrightarrow N_{j}\diamond A_{6}\end{array}\right.\]

\end_inset


\end_layout

\begin_layout Subsubsection
Zonas IPv4 con traducción de direcciones
\end_layout

\begin_layout Standard
En este caso, si al menos una de las dos aplicaciones es IPv4, se tratará
 como si hubiera una única zona IPv4.
 Sólo cuando ambas aplicaciones sean IPv6 habrá que tratar el escenario
 de manera especial.
 La situación ideal es que ambos nodos terminales soporten NAT, en cuyo
 caso se podrá establecer conectividad directa:
\end_layout

\begin_layout Itemize
Escenario solución 1: 
\begin_inset Formula \[
A_{6}\diamond N_{d,MAP}\leftrightarrow Z_{4}\odot_{4}Z_{4}\leftrightarrow N_{d,MAP}\diamond A_{6}\]

\end_inset


\end_layout

\begin_layout Standard
A continuación expondremos los escenarios en los que no se puede establecer
 la conectividad:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 Si tenemos una aplicación 
\begin_inset Formula $A_{6}$
\end_inset

 nodo 
\begin_inset Formula $N_{4}$
\end_inset

 ó 
\begin_inset Formula $N_{6}$
\end_inset

 conectado a una zona 
\begin_inset Formula $Z_{4}$
\end_inset

, deberemos transformar el nodo en dual mediante la instalación del mecanismo
 Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{6}\diamond N_{j}\leftrightarrow Z_{4}\odot_{4}Z_{4}\leftrightarrow N_{i}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; N_{j}\in\left\{ N_{4},N_{6}\right\} \end{array}\right.\\
\Downarrow\\
N_{j}\rightarrow N_{d}:\quad A_{6}\diamond N_{d}\leftrightarrow Z_{4}\odot_{4}Z_{4}\leftrightarrow N_{i}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 Si ambos nodos son duales, tenemos dos opciones.
 La primera sería instalar el mecanismo Mapped en ambos, mientras que la
 segunda sería usar un túnel Teredo:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
A_{6}\diamond N_{d}\leftrightarrow Z_{4}\odot_{4}Z_{4}\leftrightarrow N_{d}\diamond A_{6}\\
\Downarrow\\
\left.\begin{array}{l}
N_{d}\rightarrow N_{d,MAP}:\quad A_{6}\diamond N_{d,MAP}\leftrightarrow Z_{4}\leftrightarrow N_{d,MAP}\diamond A_{6}\\
Teredo\left(A_{6}\diamond\underline{N_{d}\leftrightarrow Z_{4}\odot_{4}Z_{4}\leftrightarrow N_{d}}\diamond A_{6}\right)=A_{6}\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{d}\diamond A_{6}\end{array}\right.\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection
Redes de dos zonas
\end_layout

\begin_layout Standard
Una vez estudiadas las redes básicas, el siguiente paso es extender nuestro
 estudio a las redes de dos zonas.
 Así, podrán enlazarse redes 
\begin_inset Formula $Z_{4}$
\end_inset

y 
\begin_inset Formula $Z_{6}$
\end_inset

, dándose los siguientes casos:
\end_layout

\begin_layout Itemize
Composición de zonas IPv4
\end_layout

\begin_layout Itemize
Composición de zonas IPv6
\end_layout

\begin_layout Itemize
Composición de zonas IPv4 e IPv6
\end_layout

\begin_layout Standard
Dos zonas IPv4 pueden conectarse por medio de cualquiera de los operadores
 de conexión ya vistos, pues todos soportan tráfico IPv4.
 Se dan los siguientes casos, que ya han sido estudiados anteriormente:
\end_layout

\begin_layout Itemize
\begin_inset Formula $Z_{4}\otimes_{d}Z_{4}=Z_{4}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $Z_{4}\odot_{4}Z_{4}=Z_{4}\odot_{4}Z_{4}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $Z_{4}\odot_{d}Z_{4}=Z_{4}\odot_{4}Z_{4}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $Z_{4}\boxtimes_{d}Z_{4}=Z_{4}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $Z_{4}\boxdot_{d}Z_{4}=Z_{4}\odot_{4}Z_{4}$
\end_inset


\end_layout

\begin_layout Standard
De la misma manera, dos zonas IPv6 pueden conectarse por medio de cualquier
 operador, excepto 
\begin_inset Formula $\odot_{4}$
\end_inset

, que sólo soporta tráfico IPv4.
 Tenemos los siguientes casos, que ya han sido estudiados:
\end_layout

\begin_layout Itemize
\begin_inset Formula $Z_{6}\otimes_{d}Z_{6}=Z_{6}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $Z_{6}\odot_{d}Z_{6}=Z_{6}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $Z_{6}\boxtimes_{d}Z_{6}=Z_{6}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $Z_{6}\boxdot_{d}Z_{6}=Z_{6}$
\end_inset


\end_layout

\begin_layout Standard
El último caso es más complicado, ya que hay que entrar a considerar las
 aplicaciones usadas.
 Como en las redes básicas, puede ocurrir que ambas aplicaciones sean IPv4,
 que ambas sean IPv6, o que sean heterogéneas.
 Veamos cada situación por separado.
\end_layout

\begin_layout Subsubsection
Composición de zonas con aplicaciones IPv4
\end_layout

\begin_layout Standard
En este caso no se puede establecer conectividad de manera directa.
 Expondremos por tanto sólo los escenarios sin conectividad:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 Si la versión de IP del nodo terminal y de la aplicación son diferentes,
 se instalará el mecanismo Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{j}\diamond A_{4}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; N_{j}\in\left\{ N_{4},N_{6}\right\} ,\; op\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
N_{j}\rightarrow N_{d}:\quad A_{4}\diamond N_{i}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{d}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 Si la versión de IP del nodo terminal y de la aplicación son diferentes,
 se instalará el mecanismo Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{6}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{d}\diamond A_{4}\\
\textrm{donde}\; op\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
N_{6}\rightarrow N_{d}:\quad A_{4}\diamond N_{d}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{d}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 3.
 Si el nodo terminal que conecta con la zona IPv6 es dual, se puede establecer
 un túnel IPv4 en IPv6, para convertir la red en una sola zona homogénea:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{d}\diamond A_{4}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{d}\right\} ,\; op\in\left\{ \otimes_{d},\boxtimes_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(A_{4}\diamond N_{i}\leftrightarrow\underline{Z_{4}opZ_{6}\leftrightarrow N_{d}}\diamond A_{4}\right)=A_{4}\diamond N_{i}\leftrightarrow Z_{4}\leftrightarrow N_{d}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 4.
 Si el nodo terminal que conecta con la zona IPv6 es dual, se puede establecer
 un túnel IPv4 en IPv6.
 Se respetará la traducción de direcciones si la hay:
\end_layout

\begin_deeper
\begin_layout Standard

\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{d}\diamond A_{4}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{d}\right\} ,\; op\in\left\{ \odot_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(A_{4}\diamond N_{i}\leftrightarrow\underline{Z_{4}opZ_{6}\leftrightarrow N_{d}}\diamond A_{4}\right)=A_{4}\diamond N_{d}\leftrightarrow Z_{4}\odot_{4}Z_{4}\leftrightarrow N_{d}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection
Composición de zonas con aplicaciones IPv6
\end_layout

\begin_layout Standard
En este caso sí nos encontramos con escenarios en los que se puede establecer
 la conectividad:
\end_layout

\begin_layout Itemize
Escenario solución 1:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
A_{6}\diamond N_{d,MAP}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{6}\diamond A_{6}\\
\textrm{donde}\; op\in\left\{ \boxtimes_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario solución 2:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{l}
A_{6}\diamond N_{d,MAP}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{d}\diamond A_{6}\\
\textrm{donde}\; op\in\left\{ \boxtimes_{d},\boxdot_{d}\right\} \end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
A continuación trataremos los escenarios sin conectividad:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 Si la versión de IP del nodo terminal y de la aplicación son diferentes,
 se instalará el mecanismo Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{6}\diamond N_{j}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{i}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; N_{j}\in\left\{ N_{4},N_{6}\right\} ,\; op\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
N_{j}\rightarrow N_{d}:\quad A_{6}\diamond N_{d}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{i}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 Si la versión de IP del nodo terminal y de la aplicación son diferentes,
 se instalará el mecanismo Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{6}\diamond N_{i}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{4}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
N_{4}\rightarrow N_{d}:\quad A_{6}\diamond N_{i}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{d}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 3.
 Cuando el nodo terminal que conecta con la zona 
\begin_inset Formula $Z_{4}$
\end_inset

, surgen dos opciones.
 La primera es crear un túnel IPv6 en IPv4, mientras que la segunda opción,
 sólo si el operador es 
\begin_inset Formula $\left\{ \otimes_{d},\odot_{d}\right\} $
\end_inset

, es instalar el mecanismo Mapped:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{6}\diamond N_{d}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{i}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{6},N_{d}\right\} ,\; op\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
\left.\begin{array}{l}
T_{v4(v6)}=\left(A_{6}\diamond\underline{N_{d}\leftrightarrow Z_{4}opZ_{6}}\leftrightarrow N_{i}\diamond A_{6}\right)=A_{6}\diamond N_{d}\leftrightarrow Z_{6}\leftrightarrow N_{i}\diamond A_{6}\\
N_{d}\rightarrow N_{d,MAP},\;\left\{ \otimes_{d},\odot_{d}\right\} \rightarrow\left\{ \boxtimes_{d},\boxdot_{d}\right\} :\quad A_{6}\diamond N_{d,MAP}\leftrightarrow Z_{4}trad(op)Z_{6}\leftrightarrow N_{i}\diamond A_{6}\end{array}\right.\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection
Composición de zonas con aplicaciones heterogéneas
\end_layout

\begin_layout Standard
Cuando las aplicaciones finales son diferentes, pueden darse dos casos bien
 diferenciados:
\end_layout

\begin_layout Itemize
\begin_inset Formula $A_{4}$
\end_inset

 se ejecuta sobre la zona 
\begin_inset Formula $Z_{4}$
\end_inset

, y 
\begin_inset Formula $A_{6}$
\end_inset

 sobre la zona 
\begin_inset Formula $Z_{6}$
\end_inset

.
\end_layout

\begin_layout Itemize
\begin_inset Formula $A_{4}$
\end_inset

 se ejecuta sobre la zona 
\begin_inset Formula $Z_{6}$
\end_inset

, y 
\begin_inset Formula $A_{6}$
\end_inset

 sobre la zona 
\begin_inset Formula $Z_{4}$
\end_inset

.
\end_layout

\begin_layout Standard
Veremos en primer lugar los escenarios con conectividad para el primer caso:
\end_layout

\begin_layout Itemize
Escenario solución 1: 
\begin_inset Formula \[
A_{4}\diamond N_{4}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{6}\diamond A_{6}\]

\end_inset


\end_layout

\begin_layout Itemize
Escenario solución 2: 
\begin_inset Formula \[
A_{4}\diamond N_{4}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{d}\diamond A_{6}\]

\end_inset


\end_layout

\begin_layout Itemize
Escenario solución 3: 
\begin_inset Formula \[
A_{4}\diamond N_{d}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{6}\diamond A_{6}\]

\end_inset


\end_layout

\begin_layout Itemize
Escenario solución 4: 
\begin_inset Formula \[
A_{4}\diamond N_{d}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{d}\diamond A_{6}\]

\end_inset


\end_layout

\begin_layout Standard
Expondremos a continuación los escenarios sin conectividad para el primer
 caso:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 Si un nodo terminal no es compatible con la aplicación, se instalará el
 mecanismo Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{6}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{i}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
N_{6}\rightarrow N_{d}:\quad A_{4}\diamond N_{d}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{i}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 Si un nodo terminal no es compatible con la zona a la que se conecta, se
 instalará el mecanismo Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{4}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{d}\right\} ,\; op\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
N_{4}\rightarrow N_{d}:\quad A_{4}\diamond N_{i}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{d}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 3.
 Si el operador de conexión no soporta traducción de protocolos, se transformará
 el nodo de la zona IPv6 en dual para posteriormente poder crear un túnel:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{6}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op\in\left\{ \otimes_{d},\odot_{d}\right\} \end{array}\right.\\
\Downarrow\\
N_{6}\rightarrow N_{d}:\quad A_{4}\diamond N_{i}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{d}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 4.
 Si ambos nodos terminales son compatibles con sus aplicaciones correspondientes
, y el operador de conexión no soporta traducción de protocolos, se sustituirá
 por uno que sí lo haga:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{j}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{i}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{6},N_{d}\right\} ,\; N_{j}\in\left\{ N_{4},N_{d}\right\} ,\; op\in\left\{ \otimes_{d},\odot_{d}\right\} \end{array}\right.\\
\Downarrow\\
A_{4}\diamond N_{j}\leftrightarrow Z_{4}trad(op)Z_{6}\leftrightarrow N_{i}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 5.
 Si el nodo de la zona IPv6 es dual, y el operador no soporta traducción
 de direcciones, se creará un túnel IPv4 en IPv6:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{d}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{6},N_{d}\right\} ,\; op\in\left\{ \otimes_{d},\boxtimes_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v4(v6)}\left(A_{4}\diamond N_{i}\leftrightarrow\underline{Z_{4}opZ_{6}\leftrightarrow N_{d}}\diamond A_{6}\right)=A_{4}\diamond N_{i}\leftrightarrow Z_{4}\leftrightarrow N_{d}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 6.
 Si el nodo de la zona IPv6 es dual, y el operador sí soporta traducción
 de direcciones, se creará un túnel IPv4 en IPv6 que respete la traducción:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{4}opZ_{6}\leftrightarrow N_{d}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{6},N_{d}\right\} ,\; op\in\left\{ \odot_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v4(v6)}\left(A_{4}\diamond N_{i}\leftrightarrow\underline{Z_{4}opZ_{6}\leftrightarrow N_{d}}\diamond A_{6}\right)=A_{4}\diamond N_{i}\leftrightarrow Z_{4}\odot_{4}Z_{4}\leftrightarrow N_{d}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
En el segundo caso no hay escenarios con conectividad directa, por lo que
 sólo veremos aquellos sin conectividad:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 Si un nodo terminal no es compatible con la aplicación o con la zona a
 la que se conecta, se instalará el mecanismo Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{6}opZ_{4}\leftrightarrow N_{j}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6}\right\} ,\; N_{j}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
N_{i}\rightarrow N_{d}:\quad A_{4}\diamond N_{d}\leftrightarrow Z_{6}opZ_{4}\leftrightarrow N_{j}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 Si un nodo terminal no es compatible con la aplicación o con la zona a
 la que se conecta, se instalará el mecanismo Dual Stack:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{d}\leftrightarrow Z_{6}opZ_{4}\leftrightarrow N_{i}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6}\right\} ,\; op\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
N_{i}\rightarrow N_{d}:\quad A_{4}\diamond N_{d}\leftrightarrow Z_{6}opZ_{4}\leftrightarrow N_{d}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 3.
 Si ambos nodos terminales son duales, y el operador no soporta traducción
 de direcciones, se creará un túnel IPv4 en IPv6:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{d}\leftrightarrow Z_{6}opZ_{4}\leftrightarrow N_{d}\diamond A_{6}\\
\textrm{donde}\; op\in\left\{ \otimes_{d},\boxtimes_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(A_{4}\diamond\underline{N_{d}\leftrightarrow Z_{6}opZ_{4}}\leftrightarrow N_{d}\diamond A_{6}\right)=A_{4}\diamond N_{d}\leftrightarrow Z_{4}\leftrightarrow N_{d}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 4: Si ambos nodos terminales son duales, y el operador
 sí soporta traducción de direcciones, se creará un túnel IPv4 en IPv6 que
 respete la traducción:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{d}\leftrightarrow Z_{6}opZ_{4}\leftrightarrow N_{d}\diamond A_{6}\\
\textrm{donde}\; op\in\left\{ \odot_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(A_{4}\diamond\underline{N_{d}\leftrightarrow Z_{6}opZ_{4}}\leftrightarrow N_{d}\diamond A_{6}\right)=A_{4}\diamond N_{d}\leftrightarrow Z_{4}\odot_{4}Z_{4}\leftrightarrow N_{d}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection
Redes de tres zonas
\end_layout

\begin_layout Standard
El último tipo de escenario que consideraremos por separado es aquel que
 tiene tres zonas.
 Podemos encontrar dos situaciones: dos zonas IPv4 con una zona IPv6 entre
 medias, y viceversa.
 En ninguno de estos casos podremos establecer una conexión directa, por
 lo que todos los escenarios serán sin conectividad.
 Trataremos cada caso por separado.
\end_layout

\begin_layout Subsubsection
Composición de zonas IPv4 - IPv6 - IPv4
\end_layout

\begin_layout Standard
Veamos en primer lugar el comportamiento de estas redes para aplicaciones
 IPv4:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 Se creará un túnel IPv4 en IPv6 que atraviese la zona 
\begin_inset Formula $Z_{6}$
\end_inset

 intermedia:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{4}op_{1}Z_{6}op_{2}Z_{4}\leftrightarrow N_{j}\diamond A_{4}\\
\textrm{donde}\; N_{i},N_{j}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1},op_{2}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(A_{4}\diamond N_{i}\leftrightarrow\underline{Z_{4}op_{1}Z_{6}op_{2}Z_{4}}\leftrightarrow N_{j}\diamond A_{4}\right)=A_{4}\diamond N_{i}\leftrightarrow Z_{4}\leftrightarrow N_{j}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 Si uno de los nodos terminales es dual, se creará un túnel IPv6 en IPv4
 del nodo a la zona 
\begin_inset Formula $Z_{6}$
\end_inset

 intermedia:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{4}op_{1}Z_{6}op_{2}Z_{4}\leftrightarrow N_{d}\diamond A_{4}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1},op_{2}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v4(v6)}\left(A_{4}\diamond N_{i}\leftrightarrow Z_{4}op_{1}\underline{Z_{6}op_{2}Z_{4}\leftrightarrow N_{d}}\diamond A_{4}\right)=A_{4}\diamond N_{i}\leftrightarrow Z_{4}op_{1}Z_{6}\leftrightarrow N_{d}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
A continuación expondremos el problema para aplicaciones IPv6:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 Se creará un túnel IPv4 en IPv6 que atraviese la zona 
\begin_inset Formula $Z_{6}$
\end_inset

 intermedia:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{6}\diamond N_{i}\leftrightarrow Z_{4}op_{1}Z_{6}op_{2}Z_{4}\leftrightarrow N_{j}\diamond A_{6}\\
\textrm{donde}\; N_{i},N_{j}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1},op_{2}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(A_{6}\diamond N_{i}\leftrightarrow\underline{Z_{4}op_{1}Z_{6}op_{2}Z_{4}}\leftrightarrow N_{j}\diamond A_{6}\right)=A_{6}\diamond N_{i}\leftrightarrow Z_{4}\leftrightarrow N_{j}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 Si uno de los nodos terminales es dual, se creará un túnel IPv6 en IPv4
 del nodo a la zona 
\begin_inset Formula $Z_{6}$
\end_inset

 intermedia:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{6}\diamond N_{i}\leftrightarrow Z_{4}op_{1}Z_{6}op_{2}Z_{4}\leftrightarrow N_{d}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1},op_{2}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v4(v6)}\left(A_{6}\diamond N_{i}\leftrightarrow Z_{4}op_{1}\underline{Z_{6}op_{2}Z_{4}\leftrightarrow N_{d}}\diamond A_{6}\right)=A_{6}\diamond N_{i}\leftrightarrow Z_{4}op_{1}Z_{6}\leftrightarrow N_{d}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
Por último, veamos los casos para aplicaciones heterogéneas:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 Se creará un túnel IPv4 en IPv6 que atraviese la zona 
\begin_inset Formula $Z_{6}$
\end_inset

 intermedia:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{4}op_{1}Z_{6}op_{2}Z_{4}\leftrightarrow N_{j}\diamond A_{6}\\
\textrm{donde}\; N_{i},N_{j}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1},op_{2}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(A_{4}\diamond N_{i}\leftrightarrow\underline{Z_{4}op_{1}Z_{6}op_{2}Z_{4}}\leftrightarrow N_{j}\diamond A_{6}\right)=A_{4}\diamond N_{i}\leftrightarrow Z_{4}\leftrightarrow N_{j}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 Si la aplicación 
\begin_inset Formula $A_{6}$
\end_inset

 se ejecuta sobre un nodo dual, se creará un túnel IPv6 en IPv4 del nodo
 a la zona 
\begin_inset Formula $Z_{6}$
\end_inset

 intermedia:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{4}op_{1}Z_{6}op_{2}Z_{4}\leftrightarrow N_{d}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1},op_{2}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v4(v6)}\left(A_{4}\diamond N_{i}\leftrightarrow Z_{4}op_{1}\underline{Z_{6}op_{2}Z_{4}\leftrightarrow N_{d}}\diamond A_{6}\right)=A_{4}\diamond N_{i}\leftrightarrow Z_{4}op_{1}Z_{6}\leftrightarrow N_{d}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 3.
 Si la aplicación 
\begin_inset Formula $A_{4}$
\end_inset

 se ejecuta sobre un nodo dual, se creará un túnel IPv6 en IPv4 del nodo
 a la zona 
\begin_inset Formula $Z_{6}$
\end_inset

 intermedia:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{d}\leftrightarrow Z_{4}op_{1}Z_{6}op_{2}Z_{4}\leftrightarrow N_{i}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1},op_{2}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v4(v6)}\left(A_{4}\diamond\underline{N_{d}\leftrightarrow Z_{4}op_{1}Z_{6}}op_{2}Z_{4}\leftrightarrow N_{i}\diamond A_{6}\right)=A_{4}\diamond N_{d}\leftrightarrow Z_{6}op_{2}Z_{4}\leftrightarrow N_{i}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection
Composición de zonas IPv6 - IPv4 - IPv6
\end_layout

\begin_layout Standard
Veamos en primer lugar el comportamiento de estas redes para aplicaciones
 IPv4:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 Se creará un túnel IPv6 dentro de IPv4 que atraviese la zona 
\begin_inset Formula $Z_{4}$
\end_inset

 intermedia:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{6}op_{1}Z_{4}op_{2}Z_{6}\leftrightarrow N_{j}\diamond A_{4}\\
\textrm{donde}\; N_{i},N_{j}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1},op_{2}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v4(v6)}\left(A_{4}\diamond N_{i}\leftrightarrow\underline{Z_{6}op_{1}Z_{4}op_{2}Z_{6}}\leftrightarrow N_{j}\diamond A_{4}\right)=A_{4}\diamond N_{i}\leftrightarrow Z_{6}\leftrightarrow N_{j}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 Si un nodo terminal es dual, y la zona 
\begin_inset Formula $Z_{6}$
\end_inset

 conecta con la zona 
\begin_inset Formula $Z_{4}$
\end_inset

 por medio de un operador sin traducción de direcciones, se creará un túnel
 IPv4 dentro de IPv6:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{6}op_{1}Z_{4}op_{2}Z_{6}\leftrightarrow N_{d}\diamond A_{4}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} ,\; op2\left\{ \otimes_{d},\boxtimes_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(A_{4}\diamond N_{i}\leftrightarrow Z_{6}op_{1}\underline{Z_{4}op_{2}Z_{6}\leftrightarrow N_{d}}\diamond A_{4}\right)=A_{4}\diamond N_{i}\leftrightarrow Z_{6}op_{1}Z_{4}\leftrightarrow N_{d}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 3.
 Si un nodo terminal es dual, y la zona 
\begin_inset Formula $Z_{6}$
\end_inset

 conecta con la zona 
\begin_inset Formula $Z_{4}$
\end_inset

 por medio de un operador con traducción de direcciones, se creará un túnel
 IPv4 dentro de IPv6 con traducción:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{6}op_{1}Z_{4}op_{2}Z_{6}\leftrightarrow N_{d}\diamond A_{4}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} ,\; op2\left\{ \odot_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(A_{4}\diamond N_{i}\leftrightarrow Z_{6}op_{1}\underline{Z_{4}op_{2}Z_{6}\leftrightarrow N_{d}}\diamond A_{4}\right)=A_{4}\diamond N_{i}\leftrightarrow Z_{6}op_{1}Z_{4}\odot_{4}Z_{4}\leftrightarrow N_{d}\diamond A_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
A continuación expondremos el problema para aplicaciones IPv6:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 Se creará un túnel IPv6 dentro de IPv4 que atraviese la zona 
\begin_inset Formula $Z_{4}$
\end_inset

 intermedia:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{6}\diamond N_{i}\leftrightarrow Z_{6}op_{1}Z_{4}op_{2}Z_{6}\leftrightarrow N_{j}\diamond A_{6}\\
\textrm{donde}\; N_{i},N_{j}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1},op_{2}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v4(v6)}\left(A_{6}\diamond N_{i}\leftrightarrow\underline{Z_{6}op_{1}Z_{4}op_{2}Z_{6}}\leftrightarrow N_{j}\diamond A_{6}\right)=A_{6}\diamond N_{i}\leftrightarrow Z_{6}\leftrightarrow N_{j}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 Si un nodo terminal es dual, y la zona 
\begin_inset Formula $Z_{6}$
\end_inset

 conecta con la zona 
\begin_inset Formula $Z_{4}$
\end_inset

 por medio de un operador sin traducción de direcciones, se creará un túnel
 IPv4 dentro de IPv6:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{6}\diamond N_{i}\leftrightarrow Z_{6}op_{1}Z_{4}op_{2}Z_{6}\leftrightarrow N_{d}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} ,\; op_{2}\in\left\{ \otimes_{d},\boxtimes_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(A_{6}\diamond N_{i}\leftrightarrow Z_{6}op_{1}\underline{Z_{4}op_{2}Z_{6}\leftrightarrow N_{d}}\diamond A_{6}\right)=A_{6}\diamond N_{i}\leftrightarrow Z_{6}op_{1}Z_{4}\leftrightarrow N_{d}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 3.
 Si un nodo terminal es dual, y la zona 
\begin_inset Formula $Z_{6}$
\end_inset

 conecta con la zona 
\begin_inset Formula $Z_{4}$
\end_inset

 por medio de un operador con traducción de direcciones, se creará un túnel
 IPv4 dentro de IPv6 con traducción:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{6}\diamond N_{i}\leftrightarrow Z_{6}op_{1}Z_{4}op_{2}Z_{6}\leftrightarrow N_{d}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} ,\; op_{2}\in\left\{ \odot_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(A_{6}\diamond N_{i}\leftrightarrow Z_{6}op_{1}\underline{Z_{4}op_{2}Z_{6}\leftrightarrow N_{d}}\diamond A_{6}\right)=A_{6}\diamond N_{i}\leftrightarrow Z_{6}op_{1}Z_{4}\odot_{4}Z_{4}\leftrightarrow N_{d}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
Por último, veamos los casos para aplicaciones heterogéneas:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 Se creará un túnel IPv6 dentro de IPv4 que atraviese la zona 
\begin_inset Formula $Z_{4}$
\end_inset

 intermedia:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{6}op_{1}Z_{4}op_{2}Z_{6}\leftrightarrow N_{j}\diamond A_{6}\\
\textrm{donde}\; N_{i},N_{j}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1},op_{2}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v4(v6)}\left(A_{4}\diamond N_{i}\leftrightarrow\underline{Z_{6}op_{1}Z_{4}op_{2}Z_{6}}\leftrightarrow N_{j}\diamond A_{6}\right)=A_{4}\diamond N_{i}\leftrightarrow Z_{6}\leftrightarrow N_{j}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 Si la aplicación 
\begin_inset Formula $A_{6}$
\end_inset

 se ejecuta sobre un nodo dual, y éste se conecta a una zona 
\begin_inset Formula $Z_{6}$
\end_inset

 que se comunica con la zona 
\begin_inset Formula $Z_{4}$
\end_inset

 por medio de un operador sin traducción de direcciones, se creará un túnel
 IPv4 dentro de IPv6:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{6}op_{1}Z_{4}op_{2}Z_{6}\leftrightarrow N_{d}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} ,\; op_{2}\in\left\{ \otimes_{d},\boxtimes_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(A_{4}\diamond N_{i}\leftrightarrow Z_{6}op_{1}\underline{Z_{4}op_{2}Z_{6}\leftrightarrow N_{d}}\diamond A_{6}\right)=A_{4}\diamond N_{i}\leftrightarrow Z_{6}op_{1}Z_{4}\leftrightarrow N_{d}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 3.
 Como en el caso anterior, pero esta vez si el operador soporta traducción
 de direcciones, el túnel también lo hará:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{i}\leftrightarrow Z_{6}op_{1}Z_{4}op_{2}Z_{6}\leftrightarrow N_{d}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} ,\; op_{2}\in\left\{ \odot_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(A_{4}\diamond N_{i}\leftrightarrow Z_{6}op_{1}\underline{Z_{4}op_{2}Z_{6}\leftrightarrow N_{d}}\diamond A_{6}\right)=A_{4}\diamond N_{i}\leftrightarrow Z_{6}op_{1}Z_{4}\odot_{4}Z_{4}\leftrightarrow N_{d}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 4.
 Si la aplicación 
\begin_inset Formula $A_{4}$
\end_inset

 se ejecuta sobre un nodo dual, y éste se conecta a una zona 
\begin_inset Formula $Z_{6}$
\end_inset

 que se comunica con la zona 
\begin_inset Formula $Z_{4}$
\end_inset

 por medio de un operador sin traducción de direcciones, se creará un túnel
 IPv4 dentro de IPv6:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{d}\leftrightarrow Z_{6}op_{1}Z_{4}op_{2}Z_{6}\leftrightarrow N_{i}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1}\in\left\{ \otimes_{d},\boxtimes_{d}\right\} ,\; op_{2}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(A_{4}\diamond\underline{N_{d}\leftrightarrow Z_{6}op_{1}Z_{4}}op_{2}Z_{6}\leftrightarrow N_{i}\diamond A_{6}\right)=A_{4}\diamond N_{d}\leftrightarrow Z_{4}op_{2}Z_{6}\leftrightarrow N_{i}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 5.
 Como en el caso anterior, pero esta vez si el operador soporta traducción
 de direcciones, el túnel también lo hará:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
A_{4}\diamond N_{d}\leftrightarrow Z_{6}op_{1}Z_{4}op_{2}Z_{6}\leftrightarrow N_{i}\diamond A_{6}\\
\textrm{donde}\; N_{i}\in\left\{ N_{4},N_{6},N_{d}\right\} ,\; op_{1}\in\left\{ \odot_{d},\boxdot_{d}\right\} ,\; op_{2}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(A_{4}\diamond\underline{N_{d}\leftrightarrow Z_{6}op_{1}Z_{4}}op_{2}Z_{6}\leftrightarrow N_{i}\diamond A_{6}\right)=A_{4}\diamond N_{d}\leftrightarrow Z_{4}\odot_{4}Z_{4}op_{2}Z_{6}\leftrightarrow N_{i}\diamond A_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection
Partes de escenarios
\end_layout

\begin_layout Standard
No es viable contemplar todos los tamaños de escenario posibles, ya que
 su número es infinito.
 Por tanto, necesitamos algún método para poder simplificar los escenarios
 que tengan más de tres zonas, con el objetivo de reducirlos hasta el punto
 de que se pueda aplicar alguna de las reglas vistas anteriormente.
 Veremos reglas de partes de escenario, que se aplican sólo a los nodos
 intermedios de la red de interconexión.
 No hará falta tener en cuenta ni las aplicaciones ni los nodos terminales.
 Estas reglas se aplicarán en todas las posiciones posibles usando un algoritmo
 de búsqueda de patrones:
\end_layout

\begin_layout Itemize
Escenario no solución 1.
 Se creará un túnel IPv4 en IPv6:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
Z_{4}op_{1}Z_{6}op_{2}Z_{4}\\
\textrm{donde}\; op_{1},op_{2}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v6(v4)}\left(Z_{4}op_{1}Z_{6}op_{2}Z_{4}\right)=Z_{4}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Escenario no solución 2.
 Se creará un túnel IPv6 en IPv4:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
Z_{6}op_{1}Z_{4}op_{2}Z_{6}\\
\textrm{donde}\; op_{1},op_{2}\in\left\{ \otimes_{d},\odot_{d},\boxtimes_{d},\boxdot_{d}\right\} \end{array}\right.\\
\Downarrow\\
T_{v4(v6)}\left(Z_{6}op_{1}Z_{4}op_{2}Z_{6}\right)=Z_{6}\end{array}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Chapter
Conclusiones del análisis
\end_layout

\begin_layout Standard
Una vez estudiado el problema, podemos proceder a extraer las conclusiones
 apropiadas.
 Con ello pretendemos establecer una serie de criterios que nos resultarán
 de ayuda posteriormente en la fase de diseño, así como resumir lo expuesto
 en esta parte:
\end_layout

\begin_layout Itemize
El proceso de migración es muy complejo, ya que son muchas las posibles
 alternativas a considerar.
 Por tanto, resultaría interesante crear un programa que facilitara, en
 la medida de lo posible, el trabajo del administrador de red.
\end_layout

\begin_layout Itemize
La metodología MENINA es un ejemplo de buena ingeniería del software, al
 formalizar el problema y así poder tratarlo de manera rigurosa.
\end_layout

\begin_layout Itemize
MENINA sólo trabaja con escenarios lineales, pero sabemos que todas las
 redes reales tienen topologías mucho más complejas.
 Por tanto, necesitaremos encontrar una manera de transformar una topología
 arbitraria en una secuencia de uno o más escenarios lineales.
\end_layout

\begin_layout Itemize
Las reglas para la creación de túneles entre nodos terminales son problemáticas,
 porque al conservar la longitud de los escenarios, es posible que la aplicación
 de una secuencia concreta de reglas sobre un escenario devuelva el escenario
 original.
 Si se vuelven a aplicar, el programa entraría en un bucle infinito.
 Por tanto, estas reglas se reservarán para el final, y sólo se podrá aplicar
 una sobre un escenario.
\end_layout

\begin_layout Itemize
La metodología MENINA representa los escenarios de manera matemática, usando
 multitud de símbolos.
 Esto implica que tendremos que buscar un lenguaje de programación que permita
 definir y manipular de la manera más sencilla posible estructuras de datos
 complejas.
\end_layout

\begin_layout Itemize
El proceso de búsqueda de soluciones es no determinista; es decir, tomando
 un escenario concreto, podremos aplicarle varias reglas en diferentes puntos.
 Esto favorece el uso de un lenguaje que facilite el no determinismo.
\end_layout

\begin_layout Itemize
En una topología grande el número de rutas entre dos nodos puede ser muy
 elevado, y cada ruta puede generar gran cantidad de soluciones.
 Por tanto, interesa usar un lenguaje que ofrezca un alto rendimiento.
\end_layout

\begin_layout Part
Diseño
\end_layout

\begin_layout Chapter
Entradas y salidas
\end_layout

\begin_layout Section
Introducción
\end_layout

\begin_layout Standard
En este capítulo se busca definir cómo será la interfaz de usuario, y las
 acciones que éste podrá llevar a cabo.
 Para ello partiremos de un diagrama de casos de uso, que definirá el modelo
 de comportamiento de la aplicación.
 A continuación, definiremos el formato que debe tener la entrada y la salida
 de datos.
 Por último, modelaremos la interfaz de usuario, intentando que sea lo más
 sencilla y atractiva posible.
\end_layout

\begin_layout Section
Diagrama de casos de uso
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/09-casos-de-uso.png
	scale 60

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Diagrama de casos de uso
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Paragraph
Actores
\end_layout

\begin_layout Itemize
Usuario: el único tipo de usuario al que se dirige la herramienta es el
 administrador de red, por lo que no se consideran más actores.
\end_layout

\begin_layout Paragraph
Casos de uso
\end_layout

\begin_layout Itemize
Gestionar topologías: este caso de uso se corresponde con las necesidades
 de cualquier programa de guardar y restaurar sus datos.
\end_layout

\begin_deeper
\begin_layout Itemize
Cargar topología: permite leer topologías desde un fichero almacenado en
 disco.
\end_layout

\begin_layout Itemize
Guardar topología: permite escribir la topología actualmente en memoria
 a un fichero en disco.
\end_layout

\begin_layout Itemize
Crear topología: con esta opción el usuario podrá crear una topología en
 blanco, sin ningún nodo.
\end_layout

\end_deeper
\begin_layout Itemize
Editar topologías: este será el caso de uso principal, ya que permitirá
 al usuario modificar la topología para adaptarla a sus necesidades.
\end_layout

\begin_deeper
\begin_layout Itemize
Añadir nodo: crea un nuevo nodo, asignándole el protocolo seleccionado en
 ese momento.
\end_layout

\begin_layout Itemize
Borrar nodo: elimina un nodo que ya no es necesario.
\end_layout

\begin_layout Itemize
Editar nodo: permite elegir el tipo de protocolo que soportará el nodo.
\end_layout

\begin_layout Itemize
Añadir enlace: crea un nuevo enlace que conectará dos nodos existentes.
\end_layout

\begin_layout Itemize
Borrar enlace: elimina un enlace que ya no es necesario.
\end_layout

\begin_layout Itemize
Editar enlace: permite configurar los parámetros de latencia, ancho de banda,
 etc.
 de un enlace.
\end_layout

\end_deeper
\begin_layout Itemize
Configurar costes: permite establecer el coste asociado a cada mecanismo
 de transición, según diversos criterios como latencia, ancho de banda,
 etc.
\end_layout

\begin_layout Itemize
Buscar soluciones: este caso de uso sólo podrá ejecutarse sobre escenarios
 que tengan al menos un nodo.
\end_layout

\begin_deeper
\begin_layout Itemize
Configurar nodos terminales: establece a qué routers están conectados los
 nodos terminales, y los protocolos que soportan ellos y las aplicaciones
 que ejecutan.
\end_layout

\begin_layout Itemize
Configurar parámetros: permite establecer opciones de optimización de escenarios
, para recortar el exceso de soluciones en topologías muy complejas.
\end_layout

\end_deeper
\begin_layout Itemize
Mostrar soluciones: con este caso de uso el usuario podrá visualizar los
 resultados obtenidos con diferentes grados de detalle.
\end_layout

\begin_deeper
\begin_layout Itemize
Resaltar solución: indicará la ruta seguida en la topología por una solución
 particular.
\end_layout

\begin_layout Itemize
Detallar solución: indicará los túneles que se han creado y sus extremos,
 así como otros mecanismos de transición, para una solución particular.
\end_layout

\end_deeper
\begin_layout Section
Entradas
\end_layout

\begin_layout Standard
La única entrada que tomará el sistema será la configuración de la topología.
 Por motivos de eficiencia y simplicidad, la base de reglas estará integrada
 en el propio código del programa, por lo que no se considera como entrada.
\end_layout

\begin_layout Standard
La primera manera de configurar la topología será usar la propia interfaz
 visual del programa.
 El usuario contará con una ventana de edición que representará la posición
 de cada router y enlace en el espacio, así como un panel para configurar
 los atributos de estos y elegir la apariencia gráfica.
\end_layout

\begin_layout Standard
La segunda manera será cargar la topología desde un fichero almacenado en
 disco.
 Este fichero se guardará en formato GML, que explicaremos más adelante.
 Añadiremos una serie de extensiones al formato para guardar los datos propios
 de nuestra aplicación.
\end_layout

\begin_layout Standard
Hay que tener en cuenta que la definición de las topologías sólo incluirá
 la disposición de los routers intermedios, pero no incluirá información
 sobre los nodos terminales o las aplicaciones.
 Por tanto, habrá que configurar estos parámetros por separado antes de
 realizar una búsqueda de soluciones.
\end_layout

\begin_layout Section
Salidas
\end_layout

\begin_layout Standard
La salida consistirá en un listado con las soluciones encontradas para un
 escenario dado.
 Podrá mostrarse de manera gráfica o mediante texto, aprovechando los caracteres
 Unicode para representar los operadores y símbolos especiales.
 Cada una de las soluciones contendrá los siguientes campos:
\end_layout

\begin_layout Itemize
Ruta seguida en la topología.
\end_layout

\begin_layout Itemize
Escenario inicial, antes de aplicar ninguna regla.
\end_layout

\begin_layout Itemize
Escenario final con conectividad, después de aplicar las reglas necesarias.
\end_layout

\begin_layout Itemize
Lista con las reglas que ha hecho falta aplicar para llegar del estado inicial
 al final.
\end_layout

\begin_layout Itemize
Costes de la solución según diversos criterios.
\end_layout

\begin_layout Section
Interfaz de usuario
\end_layout

\begin_layout Subsection
Ventana de edición
\end_layout

\begin_layout Standard
La ventana de edición constituirá la interfaz de trabajo principal.
 Implementará directamente los casos de uso 
\noun on
Gestionar topologías
\noun default
 y 
\noun on
Editar topologías
\noun default
, y permitirá el acceso al resto de casos de uso.
\end_layout

\begin_layout Standard
La ventana de constará de cuatro secciones.
 La primera de ellas será la 
\emph on
barra de menús
\emph default
, situada en la parte superior, desde la que se podrá acceder al resto de
 diálogos.
 La segunda estará situada en la parte izquierda, y se dividirá a su vez
 en tres subsecciones:
\end_layout

\begin_layout Itemize

\emph on
Modo de edición
\emph default
: permitirá elegir la operación a realizar, entre las cuatro posibles (creación
 y edición de routers y enlaces).
\end_layout

\begin_layout Itemize

\emph on
Configuración de la apariencia gráfica
\emph default
: aquí se podrá elegir el color con el que se representará cada tipo de
 router, según su protocolo (IPv4, IPv6, dual, etc).
\end_layout

\begin_layout Itemize

\emph on
Edición de atributos
\emph default
: si se ha seleccionado una operación de edición, aquí se podrán establecer
 los nuevos valores del elemento seleccionado, como el protocolo de un router
 o la latencia de un enlace.
\end_layout

\begin_layout Standard
La tercera sección será el 
\emph on
área de edición
\emph default
, situada en la parte central.
 Ofrecerá una representación gráfica de la topología de red.
 El usuario podrá seleccionar los elementos con el ratón para editarlos
 y desplazarlos a su antojo.
 Igualmente, al crear nuevos routers y enlaces se podrá usar el ratón para
 establecer su posición inicial.
 También se ofrecerá una función de zoom, para ajustar el campo de visión.
\end_layout

\begin_layout Standard
La cuarta y última sección será el 
\emph on
listado de soluciones
\emph default
, situado en la parte derecha.
 Inicialmente estará vacía, hasta que el usuario haga una búsqueda.
 En ese momento mostrará las soluciones encontradas, ordenadas por coste.
 Cada solución estará formada por una columna con la ruta, y una columna
 para cada tipo de coste.
 Pinchando en las columnas de coste se podrán reordenar los resultados según
 convenga.
 Al seleccionar una solución, se resaltará la ruta seguida en el área de
 edición.
 Al hacer doble click sobre una solución, se invocará el diálogo de presentación
 de solución, para mostrarla con más detalle.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/10-ventana-edicion.png
	lyxscale 50
	scale 23

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Esquema de la ventana de edición
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Configuración de costes
\end_layout

\begin_layout Standard
Este diálogo permitirá al usuario establecer el coste de cada mecanismo
 de transición.
 Consistirá en una ventana con varias pestañas, una por cada tipo de coste.
 El contenido de cada pestaña será el mismo, una secuencia de campos de
 entrada en los que el usuario podrá introducir los valores deseados.
 La aplicación comprobará que el contenido de los campos sea siempre numérico
 y no negativo.
\end_layout

\begin_layout Standard
Además, el diálogo contará con dos botones: 
\emph on
Aceptar
\emph default
, que guardará las modificaciones, y 
\emph on
Cancelar
\emph default
, que las descartará.
 Por otro lado, cuando la aplicación se empiece a ejecutar, se inicializarán
 los costes a sus valores predeterminados.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/11-configuracion-costes.png
	lyxscale 50
	scale 23

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Esquema de la configuración de costes
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Diálogo de búsqueda
\end_layout

\begin_layout Standard
Este diálogo permitirá al usuario iniciar al proceso de búsqueda de soluciones,
 para lo cual primero tendrá que establecer varios parámetros.
 Los parámetros se agruparán en tres secciones.
\end_layout

\begin_layout Standard
La sección superior contendrá las opciones relativas al nodo de origen.
 El usuario podrá establecer a que router está conectado el nodo terminal,
 el tipo de aplicación que ejecuta (
\begin_inset Formula $A_{4}$
\end_inset

, 
\begin_inset Formula $A_{6}$
\end_inset

, 
\begin_inset Formula $A_{d}$
\end_inset

), y los protocolos que soporta el nodo (
\begin_inset Formula $N_{4}$
\end_inset

, 
\begin_inset Formula $N_{6}$
\end_inset

, 
\begin_inset Formula $N_{d}$
\end_inset

, 
\begin_inset Formula $N_{d,MAP}$
\end_inset

).
\end_layout

\begin_layout Standard
La sección media será similar a la superior, pero en esta ocasión establecerá
 las opciones relativas al nodo de destino.
 En ambos casos, la aplicación comprobará que los valores introducidos son
 correctos, para que, por ejemplo, no se seleccione un router que no existe.
\end_layout

\begin_layout Standard
La tercera sección permitirá elegir si se va a usar algún algoritmo de optimizac
ión.
 Estos algoritmos permiten recortar el número de soluciones obtenidas en
 caso de que éste sea excesivo.
 Se ofrecerán varios algoritmos, que el usuario podrá combinar como desee.
\end_layout

\begin_layout Standard
El botón 
\emph on
Aceptar
\emph default
 guardará los parámetros para la siguiente vez, y lanzará el proceso de
 búsqueda.
 Al terminar, rellenará el campo 
\emph on
listado de soluciones
\emph default
 de la ventana de edición con los resultados obtenidos.
 Se dará al usuario la opción de cancelar la búsqueda en todo momento si
 ve que tarda demasiado.
 El botón 
\emph on
Cancelar
\emph default
 descartará los parámetros y volverá a la ventana de edición.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/12-dialogo-busqueda.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Esquema del diálogo de búsqueda
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Presentación de una solución
\end_layout

\begin_layout Standard
Este diálogo mostrará toda la información relativa a una solución.
 En concreto, se indicará la ruta seguida, el coste total según los diferentes
 criterios, los mecanismos que se han tenido que aplicar, detallando los
 extremos de los túneles, y el escenario final que se alcanza después de
 aplicar las reglas.
 Se procurará que la representación sea lo más visual posible, para facilitar
 su comprensión.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/13-presentacion-solucion.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Esquema de la presentación de una solución
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Chapter
Casos de uso detallados
\end_layout

\begin_layout Section
Introducción
\end_layout

\begin_layout Standard
En las siguientes secciones definiremos con mayor detalle cada caso de uso.
 Indicaremos, para cada uno de ellos, si depende de algún otro caso, los
 actores que intervienen, las precondiciones que debe cumplir el programa
 antes de que se llame al caso de uso, las postcondiciones que se cumplirán
 cuando el caso de uso haya terminado de ejecutarse, el flujo normal de
 ejecución, los posibles flujos alternativos que pueden darse si el usuario
 cancela la acción o surge alguna situación excepcional, y las observaciones
 adicionales que estimemos necesario.
\end_layout

\begin_layout Section
Casos de uso principales
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Gestionar topologías
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Permite al usuario llevar el control de las topologías que tiene almacenadas
 en el disco duro.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Extiende los casos de uso 
\begin_inset Quotes sld
\end_inset

Cargar topología
\begin_inset Quotes srd
\end_inset

, 
\begin_inset Quotes sld
\end_inset

Guardar topología
\begin_inset Quotes srd
\end_inset

, y 
\begin_inset Quotes sld
\end_inset

Crear topología
\begin_inset Quotes srd
\end_inset

.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Ninguna.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
La nueva topología se marcará como no modificada.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si el programa se invoca sin ningún argumento, se ejecutará automáticamente
 
\begin_inset Quotes sld
\end_inset

Crear topología
\begin_inset Quotes srd
\end_inset

.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si el programa se invoca con un argumento, que corresponderá con la ruta
 de un fichero de topología, se ejecutará automáticamente 
\begin_inset Quotes sld
\end_inset

Cargar topología
\begin_inset Quotes srd
\end_inset

.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Editar topologías
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Permite al usuario manipular la topología cargada en ese momento.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Extiende los casos de uso 
\begin_inset Quotes sld
\end_inset

Añadir nodo
\begin_inset Quotes srd
\end_inset

, 
\begin_inset Quotes sld
\end_inset

Borrar nodo
\begin_inset Quotes srd
\end_inset

, 
\begin_inset Quotes sld
\end_inset

Editar nodo
\begin_inset Quotes srd
\end_inset

, 
\begin_inset Quotes sld
\end_inset

Añadir enlace
\begin_inset Quotes srd
\end_inset

, 
\begin_inset Quotes sld
\end_inset

Borrar enlace
\begin_inset Quotes srd
\end_inset

, y 
\begin_inset Quotes sld
\end_inset

Editar enlace
\begin_inset Quotes srd
\end_inset

.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Ninguna.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
La topología se guardará como modificada.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario seleccionará la acción a realizar en el panel de 
\emph on
modo de edición
\emph default
 de la interfaz.
 A continuación, usará el ratón para manipular los elementos deseados dentro
 del 
\emph on
área de edición
\emph default
.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Configurar costes
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Permite establecer el coste de cada mecanismo de transición, para cada uno
 de los criterios considerados.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Ninguna.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Guardará la nueva tabla de costes, o la dejará como estaba si el usuario
 canceló la operación.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El diálogo mostrará los valor que habían sido configurados anteriormente.
 El usuario introducirá los nuevos costes, y pulsará en el botón 
\emph on
aceptar
\emph default
.
 Se guardarán los valores.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si el usuario pulsa el botón 
\emph on
cancelar
\emph default
, se descartarán las modificaciones.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
La primera vez que se ejecute este caso de uso se inicializarán los costes
 a un valor predeterminado.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Buscar soluciones
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Lanza el proceso de búsqueda de soluciones, calcula el coste asociado a
 cada una, y devuelve el resultado al usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Extiende los casos de uso 
\begin_inset Quotes sld
\end_inset

Configurar nodos terminales
\begin_inset Quotes srd
\end_inset

 y 
\begin_inset Quotes sld
\end_inset

Configurar parámetros
\begin_inset Quotes srd
\end_inset

.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
La topología debe contar al menos con un router.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Devolverá la lista de soluciones encontradas.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se ejecutarán los dos casos de uso extendidos, para que el usuario introduzca
 los parámetros de la búsqueda.
 Cuando el usuario pulse el botón 
\emph on
aceptar
\emph default
, se llamará a la función de búsqueda de soluciones, y se devolverá una
 lista con los resultados encontrados.
 Se guardarán los parámetros para la siguiente vez.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si el usuario pulsa el botón 
\emph on
cancelar
\emph default
 durante la fase de configuración o durante la búsqueda, se parará el proceso.
 No se guardarán las modificaciones, y se devolverá como resultado una lista
 vacía.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Este caso de uso puede devolver una lista vacía en dos circunstancias: si
 no se puede encontrar ninguna solución, o si el usuario canceló la operación.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Mostrar soluciones
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Ofrece al usuario la información relativa a las soluciones encontradas,
 con diferentes grados de detalle.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Extiende los casos de uso 
\begin_inset Quotes srd
\end_inset

Resaltar solución
\begin_inset Quotes srd
\end_inset

 y 
\begin_inset Quotes sld
\end_inset

Detallar solución
\begin_inset Quotes srd
\end_inset

.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Sólo se podrá invocar después de haber ejecutado 
\begin_inset Quotes sld
\end_inset

Buscar soluciones
\begin_inset Quotes srd
\end_inset

.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Mostrará en pantalla los resultados encontrados por el caso de uso anterior.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Una vez que el usuario haya ejecutado el caso de uso 
\begin_inset Quotes sld
\end_inset

Buscar soluciones
\begin_inset Quotes srd
\end_inset

, se rellenará el 
\emph on
listado de soluciones
\emph default
 con los resultados.
\end_layout

\begin_layout Standard
Si el usuario hace un click sobre una solución, se llamará al caso de uso
 
\begin_inset Quotes sld
\end_inset

Resaltar solución
\begin_inset Quotes srd
\end_inset

.
 Si hace doble click, se llamará a 
\begin_inset Quotes sld
\end_inset

Detallar solución
\begin_inset Quotes srd
\end_inset

.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si el usuario pincha sobre una de las columnas de la tabla, se reordenarán
 las soluciones en función de esa columna.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Section
Casos de uso extendidos
\end_layout

\begin_layout Subsection
Extendidos de Gestionar topologías
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cargar topología
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Lee un fichero que contiene la descripción de la topología.
 Sólo se considera la disposición de los routers y los enlaces entre estos.
 No se guarda la información relativa a los nodos terminales.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
La ruta seleccionada es válida.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
La topología se ha cargado y mostrado en pantalla.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario elegirá la ruta, se leerá el fichero, y se mostrará la topología
 en pantalla.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si el fichero contiene algún error, se mostrará un mensaje al usuario.
\end_layout

\begin_layout Standard
Si el usuario cancela la operación, se volverá a la topología que ya estaba
 cargada.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si la topología actual ha sido modificada y aún no se ha guardado en disco,
 se preguntará al usuario si quiere hacerlo antes de cargar la nueva.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Guardar topología
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Escribe un fichero que contiene la descripción de la topología.
 Sólo se considera la disposición de los routers y los enlaces entre estos.
 No se guarda la información relativa a los nodos terminales.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
La ruta seleccionada es válida.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se ha guardado la topología en el fichero.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario elegirá el nombre del fichero, y éste se escribirá en el disco.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si el fichero ya existe, se preguntará al usuario si quiere sobreescribirlo.
\end_layout

\begin_layout Standard
Si se produce algún error (disco lleno, permisos insuficientes, etc.), se
 mostrará un mensaje de error al usuario.
\end_layout

\begin_layout Standard
Si el usuario cancela la operación, no se realizará ninguna escritura.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Después de guardar una topología que estaba marcada como modificada, dejará
 de estarlo.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Crear topología
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Crea un nuevo fichero de topología, inicialmente vacío.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Ninguna.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se ha inicializado una nueva topología con los valores predeterminados.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se crea una topología completamente vacía, sin ningún router ni enlace.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si la topología actual ha sido modificada y aún no se ha guardado en disco,
 se preguntará al usuario si quiere hacerlo antes de crear la nueva.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Subsection
Extendidos de Editar topologías
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Añadir nodo
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Crea un nuevo router en la posición actual del puntero del ratón, asignándole
 el protocolo seleccionado.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario ha seleccionado un protocolo.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se ha agregado un nuevo router al escenario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario pincha en las coordenadas deseadas para el nuevo router, y éste
 se añade.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cada router tendrá un identificador numérico, que será generado automáticamente
 a partir de una secuencia global creciente.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Borrar nodo
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Elimina el router seleccionado.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se han seleccionado uno o más routers.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se han borrado los routers seleccionado.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario hace click sobre un router, seleccionándolo.
 Podrá seleccionar varios manteniendo pulsada la tecla 
\noun on
Shift
\noun default
.
 A continuación pulsa la tecla 
\noun on
Suprimir
\noun default
, y los routers se borran.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si el usuario pulsa sobre un espacio vacío, se deseleccionan los routers
 y se cancela la operación.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cuando se seleccione un router, se resaltará mostrándolo de otro color.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Editar nodo
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Permite cambiar el tipo de protocolo soportado por los routers seleccionados,
 así como desplazarlos a una nueva posición.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se han seleccionado uno o más nodos.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se ha cambiado el protocolo de los routers seleccionados.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario elige uno o más routers, igual que en el caso de uso anterior.
 A continuación, elige el nuevo protocolo de una lista desplegable.
 Se actualizan los atributos de los routers seleccionados.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si el usuario pulsa sobre un espacio vacío, se deseleccionan los routers
 y se cancela la operación.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cuando se seleccione un router, se resaltará mostrándolo de otro color.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Añadir enlace
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Crea un nuevo enlace entre los dos routers seleccionados.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El escenario posee al menos dos routers.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se ha agregado un nuevo enlace al escenario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario pulsará sobre un router, marcándolo como el origen.
 A continuación pulsará sobre el segundo router, y se creará el enlace.
 
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si el usuario pulsa sobre un espacio vacío antes de elegir el router de
 destino, se borrará la selección y se cancelará la operación.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cuando se seleccione el primer router, se resaltará mostrándolo de otro
 color.
 Después de crear el enlace se borrará la selección.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Borrar enlace
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Elimina los enlaces seleccionados.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se han seleccionado uno o más enlaces.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se han borrado los enlaces seleccionados.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario hace click sobre un enlace, seleccionándolo.
 Podrá seleccionar varios manteniendo pulsada la tecla 
\noun on
Shift
\noun default
.
 A continuación pulsa la tecla 
\noun on
Suprimir
\noun default
, y los enlaces se borran.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si el usuario pulsa sobre un espacio vacío, se deseleccionan los enlaces
 y se cancela la operación.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cuando se seleccione un enlace, se resaltará mostrándolo de otro color.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Editar enlace
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Permite modificar los parámetros de latencia, ancho de banda, etc., de los
 enlaces seleccionados.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se han seleccionado uno o más enlaces.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se han cambiado los atributos de los enlaces seleccionados.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario elige uno o más enlaces, igual que en el caso de uso anterior.
 A continuación, introduce los nuevos atributos.
 Los enlaces seleccionados se actualizan automáticamente.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si el usuario pulsa sobre un espacio vacío, se deseleccionan los enlaces
 y se cancela la operación.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cuando se seleccione un enlace, se resaltará mostrándolo de otro color.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Subsection
Extendidos de Buscar soluciones
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Configurar nodos terminales
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Permite elegir los routers origen y destino de la ruta, los protocolos soportado
s por los nodos terminales, y el tipo de aplicaciones que ejecutan.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
La topología posee al menos un router.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Devolverá los parámetros introducidos por el usuario, comprobando que los
 routers indicados existen en la topología.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario introducirá los valores deseados, pulsará el botón 
\emph on
aceptar
\emph default
, y se devolverán los valores.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si el usuario pulsa el botón 
\emph on
cancelar
\emph default
, se terminará el caso de uso sin devolver nada.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El valor inicial de los parámetros será:
\end_layout

\begin_layout Itemize
\begin_inset Formula $R_{origen}=1$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $R_{destino}=1$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $N_{origen}=N_{4}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $N_{destino}=N_{4}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $A_{origen}=A_{4}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $A_{destino}=A_{4}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Configurar parámetros
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Permite elegir los algoritmos de poda de soluciones que se usarán para acelerar
 la búsqueda.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Ninguna.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Devolverá los parámetros introducidos por el usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario introducirá los valores deseados, pulsará el botón 
\emph on
aceptar
\emph default
, y se devolverán los valores.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Si el usuario pulsa el botón 
\emph on
cancelar
\emph default
, se terminará el caso de uso sin devolver nada.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Inicialmente todas las opciones estarán desactivadas.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Subsection
Extendidos de Mostrar soluciones
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resaltar solución
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Indica la ruta seguida por una solución, sin entrar en detalles.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario ha ejecutado antes el caso de uso 
\begin_inset Quotes sld
\end_inset

Buscar soluciones
\begin_inset Quotes srd
\end_inset

.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se ha actualizado el 
\emph on
área de edición
\emph default
 para resaltar la ruta seguida.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario hará un solo click sobre una entrada de la lista de resultados,
 y se resaltarán los enlaces entre los routers por los que pasa la solución.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Para resaltar un enlace, se mostrará de un color que contraste con los demás.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="35mm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="105mm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre del caso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Detallar solución
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resumen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Indica la ruta seguida por una solución, su coste, la secuencia de mecanismos
 de transición que se han aplicado, y el resultado final que se alcanza.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dependencias
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Actores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Precondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario ha ejecutado antes el caso de uso 
\begin_inset Quotes sld
\end_inset

Buscar soluciones
\begin_inset Quotes srd
\end_inset

.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Postcondiciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Se ha abierto una nueva ventana con toda la información.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Curso normal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
El usuario hará doble click sobre una entrada de la lista de resultados,
 y se abrirá el diálogo de presentación de solución para mostrar la información.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cursos alternativos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Observaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Chapter
Estructura del programa
\end_layout

\begin_layout Section
Introducción
\end_layout

\begin_layout Standard
En este capítulo definiremos la manera en la que estará estructurado el
 programa.
 Ésta es una de las partes más complejas del desarrollo, ya que son muchas
 las posibilidades a considerar.
 Hemos procurado elegir aquellas que hagan el programa más eficiente, pero
 manteniendo la implementación sencilla, modular y abierta a futuras modificacio
nes.
\end_layout

\begin_layout Standard
En primer lugar, describiremos la manera de almacenar topologías.
 A continuación, expondremos la estrategia de resolución que usará el programa,
 con el objetivo de aplicar la base de reglas a los escenarios.
 Después definiremos el flujo de ejecución del programa, suponiendo un uso
 normal del mismo.
 También expondremos los tipos de datos abstractos.
 Por último, mostraremos la jerarquía de módulos del programa en forma de
 diagramas.
\end_layout

\begin_layout Section
Almacenamiento de las topologías
\end_layout

\begin_layout Standard
Para almacenar las topologías en disco usaremos el formato GML (
\emph on
Graph Modelling Language
\emph default
)
\begin_inset Foot
status open

\begin_layout Standard
http://www.infosun.fim.uni-passau.de/Graphlet/GML/gml-tr.html
\end_layout

\end_inset

.
 Es un formato muy sencillo, basado en texto estructurado jerárquicamente.
\end_layout

\begin_layout Standard
Un documento GML se define como una lista de pares clave--valor.
 Las claves son cadenas de texto que empiezan por una letra, seguida de
 un número arbitrario de letras y dígitos.
 Los valores pueden ser números enteros, números reales, cadenas de texto,
 o listas anidadas.
 La definición sintáctica completa de GML es la siguiente:
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Standard

GML        ::= List
\end_layout

\begin_layout Standard

List       ::= (whitespace* Key whitespace+ Value)*
\end_layout

\begin_layout Standard

Value      ::= Integer | Real | String | '[' List ']'
\end_layout

\begin_layout Standard

Key        ::= [ a-z A-Z ] [ a-z A-Z 0-9 ]* 
\end_layout

\begin_layout Standard

Integer    ::= sign digit+
\end_layout

\begin_layout Standard

Real       ::= sign digit* '.' digit* mantissa 
\end_layout

\begin_layout Standard

String     ::= '"' instring '"'
\end_layout

\begin_layout Standard

sign       ::= empty | '+' | '-'
\end_layout

\begin_layout Standard

digit      ::= [0-9]
\end_layout

\begin_layout Standard

Mantissa   ::= empty | 'E' sign digit
\end_layout

\begin_layout Standard

instring   ::= ASCII - {'&','"'} | '&' character+ ';'
\end_layout

\begin_layout Standard

whitespace ::= space | tabulator | newline
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Definición sintáctica de GML
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
La sintaxis dada permite representar estructuras arbóreas arbitrarias.
 Para representar grafos, se definen las claves 
\emph on
\noun on
graph
\emph default
\noun default
, 
\emph on
\noun on
node
\emph default
\noun default
 y 
\emph on
\noun on
edge
\emph default
\noun default
.
 El valor asociado con una clave 
\emph on
\noun on
graph
\emph default
\noun default
 será una lista de elementos de tipo 
\emph on
\noun on
node
\emph default
\noun default
, 
\emph on
\noun on
edge
\emph default
\noun default
, y otros atributos arbitrarios.
 Los valores para las claves 
\emph on
\noun on
node
\emph default
\noun default
 y 
\emph on
\noun on
edge
\emph default
\noun default
 serán listas con los atributos de los nodos y arcos, respectivamente.
 La estructura topológica del grafo se modela con los atributos 
\emph on
\noun on
id
\emph default
\noun default
 para los nodos y 
\emph on
\noun on
source
\emph default
\noun default
 y 
\emph on
\noun on
target
\emph default
\noun default
 para los arcos: 
\emph on
\noun on
id
\emph default
\noun default
 asigna un número a cada nodo, que es referenciado por 
\emph on
\noun on
source
\emph default
\noun default
 y 
\emph on
\noun on
target
\emph default
\noun default
.
 El siguiente código define una topología de ejemplo, un anillo con tres
 nodos:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Standard

graph [
\end_layout

\begin_layout Standard

        directed 0
\end_layout

\begin_layout Standard

        node [
\end_layout

\begin_layout Standard

                id 1
\end_layout

\begin_layout Standard

                protocol "R4"
\end_layout

\begin_layout Standard

        ]
\end_layout

\begin_layout Standard

        node [
\end_layout

\begin_layout Standard

                id 2
\end_layout

\begin_layout Standard

                protocol "R4"
\end_layout

\begin_layout Standard

        ]
\end_layout

\begin_layout Standard

        node [
\end_layout

\begin_layout Standard

                id 3
\end_layout

\begin_layout Standard

                protocol "R4"
\end_layout

\begin_layout Standard

        ]
\end_layout

\begin_layout Standard

        edge [
\end_layout

\begin_layout Standard

                source 1
\end_layout

\begin_layout Standard

                target 2
\end_layout

\begin_layout Standard

        ]
\end_layout

\begin_layout Standard

        edge [
\end_layout

\begin_layout Standard

                source 2
\end_layout

\begin_layout Standard

                target 3
\end_layout

\begin_layout Standard

        ]
\end_layout

\begin_layout Standard

        edge [
\end_layout

\begin_layout Standard

                source 3
\end_layout

\begin_layout Standard

                target 1
\end_layout

\begin_layout Standard

        ]
\end_layout

\begin_layout Standard

]
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Ejemplo de grafo en GML
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
GML define una serie de atributos estándar, algunos de los cuales son de
 uso obligado por cualquier aplicación, y otros que son de uso opcional.
 Representaremos la ruta a un atributo con la notación 
\begin_inset Formula $k_{1},k_{2},\ldots,k_{n}$
\end_inset

, donde 
\begin_inset Formula $k_{i}$
\end_inset

 es una clave.
 A continuación enumeramos los atributos que usará nuestra aplicación:
\end_layout

\begin_layout Itemize

\noun on
.graph
\noun default
 
\emph on
lista
\emph default
 -- Define un grafo.
\end_layout

\begin_layout Itemize

\noun on
.graph.node
\noun default
 
\emph on
lista
\emph default
 -- Define un nodo.
 Cada nodo debe contener un atributo .graph.node.id, cuyo valor será único
 dentro del grafo.
\end_layout

\begin_layout Itemize

\noun on
.graph.edge
\noun default
 
\emph on
lista
\emph default
 -- Define un arco.
 Cada arco debe tener los atributos 
\emph on
\noun on
.graph.edge.source
\emph default
\noun default
 y 
\emph on
\noun on
.graph.edge.target
\emph default
\noun default
, que harán referencia a nodos existentes en el grafo.
\end_layout

\begin_layout Itemize

\noun on
.graph.edge.source
\noun default
 
\emph on
entero
\emph default
 -- Define el nodo de origen de un arco.
\end_layout

\begin_layout Itemize

\noun on
.graph.edge.targe
\noun default
t 
\emph on
entero
\emph default
 -- Define el nodo de destino de un arco.
\end_layout

\begin_layout Itemize

\noun on
.graph.directed
\noun default
 
\emph on
entero
\emph default
 -- Su valor es 1 si el grafo es dirigido, y 0 si no lo es.
\end_layout

\begin_layout Itemize
.
\noun on
id
\noun default
 
\emph on
entero
\emph default
 -- Asigna un identificador a un objeto, normalmente un nodo.
\end_layout

\begin_layout Itemize

\noun on
.label
\noun default
 
\emph on
texto
\emph default
 -- Asigna una etiqueta a un objeto.
\end_layout

\begin_layout Itemize

\noun on
.name
\noun default
 
\emph on
texto
\emph default
 -- Asigna un nombre a un objeto.
\end_layout

\begin_layout Itemize

\noun on
.graphics
\noun default
 
\emph on
lista
\emph default
 -- Describe los atributos gráficos para dibujar un objeto, en nuestro caso
 un nodo.
 Dentro de este atributo usaremos la clave 
\noun on
center
\noun default
, que define la posición espacial del nodo, y se compone a su vez de los
 atributos X e Y.
\end_layout

\begin_layout Standard
Además de los valores estándar, GML permite a las aplicaciones definir sus
 propios atributos.
 Hemos añadido los siguientes:
\end_layout

\begin_layout Itemize

\noun on
.node.protocol
\noun default
 
\emph on
texto
\emph default
 -- Define los protocolos que soporta un router.
 Los valores permitidos son:
\end_layout

\begin_deeper
\begin_layout Itemize
R4 -- Router IPv4.
\end_layout

\begin_layout Itemize
R6 -- Router IPv6.
\end_layout

\begin_layout Itemize
Rd -- Router dual.
\end_layout

\begin_layout Itemize
R4_td -- Router IPv4 con traducción de direcciones.
\end_layout

\begin_layout Itemize
Rd_td -- Router dual con traducción de direcciones.
\end_layout

\begin_layout Itemize
Rd_tp -- Router dual con traducción de protocolos.
\end_layout

\begin_layout Itemize
Rd_tptd -- Router dual con traducción de protocolos y direcciones.
\end_layout

\end_deeper
\begin_layout Itemize

\noun on
.edge.latency
\noun default
 
\emph on
real
\emph default
 -- Define la latencia de un enlace.
\end_layout

\begin_layout Itemize

\noun on
.edge.bandwidth
\noun default
 
\emph on
real
\emph default
 -- Define el ancho de banda del que dispone un enlace.
\end_layout

\begin_layout Itemize

\noun on
.edge.metric
\noun default
 
\emph on
real
\emph default
 -- Permite asignar un coste arbitrario a un enlace, según una métrica definida
 por el usuario.
\end_layout

\begin_layout Standard
Hasta aquí hemos visto cómo se estructura un fichero GML.
 Queda por definir el proceso de carga.
 Lo dividiremos en dos partes: conversión de texto a un árbol sintáctico,
 y extracción del grafo.
 El proceso de almacenamiento se hará al revés.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/16-procesamiento-gml.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Carga y almacenamiento de topologías
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
El proceso de extracción se hará de manera recursiva.
 Necesitaremos una función que convierta de GML a cada tipo de elemento
 (grafo, nodo y arco).
 Partiendo de un grafo vacío, los pasos a seguir serán los siguientes:
\end_layout

\begin_layout Itemize
Buscar la clave 
\noun on
graph
\noun default
 en el árbol, y procesar sus hijos.
\end_layout

\begin_layout Itemize
Si se encuentra la clave 
\noun on
directed
\noun default
, leer su valor.
 Si no, se supone que el grafo es no dirigido.
\end_layout

\begin_layout Itemize
Para cada clave 
\noun on
node
\noun default
 encontrada, procesarla de manera recursiva, y añadir el nodo resultante
 al grafo.
\end_layout

\begin_layout Itemize
Para cada clave 
\noun on
edge
\noun default
 encontrada, procesarla de manera recursiva, y añadir el arco resultante
 al grafo.
\end_layout

\begin_layout Itemize
Añadir el resto de atributos no reconocidos, sin procesarlos.
\end_layout

\begin_layout Standard
La conversión de grafo a árbol sintáctico se hará justo al revés:
\end_layout

\begin_layout Itemize
Generar un elemento de tipo 
\noun on
graph
\noun default
.
\end_layout

\begin_layout Itemize
Añadir la clave 
\noun on
directed
\noun default
, con su valor correspondiente.
\end_layout

\begin_layout Itemize
Para cada nodo del grafo, convertirlo a un árbol de manera recursiva, y
 añadir una clave 
\noun on
node
\noun default
 con el valor resultante.
\end_layout

\begin_layout Itemize
Para cada arco del grafo, convertirlo a un árbol de manera recursiva, y
 añadir una clave 
\noun on
edge
\noun default
 con el valor resultante.
\end_layout

\begin_layout Itemize
Añadir el resto de atributos.
\end_layout

\begin_layout Standard

\end_layout

\begin_layout Section
Estrategia de resolución
\end_layout

\begin_layout Standard
Los problemas de búsqueda se suelen modelar conceptualmente como un proceso
 de tres pasos: generación de un espacio de soluciones con estructura de
 árbol, poda del árbol, y recorrido de las hojas para obtener las soluciones
 finales.
 El problema es que, para cualquier problema no trivial, el árbol de soluciones
 puede ser muy grande, potencialmente infinito.
 Por tanto, necesitaremos definir algún criterio de poda que permita eliminar
 resultados innecesarios.
\end_layout

\begin_layout Standard
La primera etapa de la resolución es la obtención de escenarios lineales
 a partir de la topología.
 El programa contará con una función que tome como entrada un grafo y los
 extremos de las rutas, y devuelva como resultado una lista con todas las
 rutas encontradas.
 Las rutas serán a su vez una lista de los nodos por los que pasa.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/17-busqueda-rutas.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Esquema de búsqueda rutas
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
La segunda etapa será la aplicación de reglas.
 El primer paso será tomar las redes de distribución física encontradas
 en la etapa anterior, y construir los escenarios de transición.
 Este paso es muy sencillo, ya que los escenarios son tuplas de cinco elementos,
 de los cuales las aplicaciones finales y los nodos terminales son comunes:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\begin_inset Formula \[
\forall a_{1},a_{2}\in\mathpzc{A},\;\forall n_{1},n_{2}\in\mathpzc{N}\Longrightarrow escenarios=\left\{ \left\langle a_{1},n_{1},red,n_{2},a_{2}\right\rangle \mid red\in rutas\right\} \]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Esquema de generación de escenarios de transición
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Una vez tengamos los escenarios de transición, habrá que resolver cada uno
 por separado.
 Para ello, primero se formalizará y canonizará el escenario, con el fin
 de simplificarlo lo más posible.
 A continuación se aplicarán las reglas de creación de túneles y las de
 modificación sobre redes finales.
\end_layout

\begin_layout Standard
Hay que tener en cuenta que algunas reglas, como las de creación de túneles
 entre nodos terminales, sólo se deben aplicar al final, cuando ya no queden
 más opciones, y como mucho una vez por escenario.
 Esto se debe a que existen pares de reglas recíprocas, es decir, dos reglas
 
\begin_inset Formula $R_{1}$
\end_inset

 y 
\begin_inset Formula $R_{2}$
\end_inset

 que aplicadas secuencialmente a un escenario 
\begin_inset Formula $E$
\end_inset

 darían el escenario original, 
\begin_inset Formula $R_{2}\left(R_{1}\left(E\right)\right)=E$
\end_inset

.
 Si aplicamos estas reglas sin cuidado, el programa entrará en un bucle
 infinito.
\end_layout

\begin_layout Standard
Por tanto, dividiremos la aplicación de la base de reglas en tres etapas:
\end_layout

\begin_layout Itemize
Túneles entre zonas intermedias, y entre zonas y nodos terminales.
\end_layout

\begin_layout Itemize
Túneles entre nodos terminales.
\end_layout

\begin_layout Itemize
Mecanismos de modificación de escenarios finales.
\end_layout

\begin_layout Standard
La aplicación de la base de reglas a un escenario tendrá como resultado
 una lista de escenarios modificados.
 Habrá que repetir el proceso de manera recursiva para cada nuevo escenario.
 El proceso terminará cuando no se pueda aplicar ninguna regla más.
 El resultado final será la obtención de una lista de soluciones candidatas
 a partir de cada escenario:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/19-busqueda-soluciones.png
	lyxscale 50
	scale 20

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Esquema de búsqueda de soluciones
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Después de resolver los escenarios, tendremos una lista de listas de soluciones.
 El último paso será concatenarlas en un sola lista, evaluar el coste de
 cada solución individual, y ordenarlas de acuerdo con el criterio establecido
 por el usuario.
\end_layout

\begin_layout Section
Flujo de ejecución
\end_layout

\begin_layout Standard
La ejecución normal de la aplicación se compondrá de cuatro fases, que se
 ejecutarán secuencialmente.
 En primer lugar, el usuario cargará el fichero de topología, o creará uno
 nuevo.
 A continuación configurará la topología, editando los routers y enlaces.
 Después podrá configurar, si así lo desea, los costes asociados a cada
 mecanismo de transición.
 Por último, lanzará el proceso de búsqueda de soluciones.
 Cuando éste termine, mostrará en pantalla los resultados.
 Cada fase se puede descomponer en varias subtareas, como se muestra en
 el diagrama:
\end_layout

\begin_layout Standard

\newpage

\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/20-flujo aplicacion.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Flujo de la aplicación
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Tipos de datos
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="3cm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="11cm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Valor
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Utilidad
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Representación de un valor en un árbol GML
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Definición
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Standard

data Valor = VI Int
\end_layout

\begin_layout Standard

           | VR Double
\end_layout

\begin_layout Standard

           | VS String
\end_layout

\begin_layout Standard

           | VM Atributos
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Operaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\noun on
leerGML (texto): Valor
\noun default
 -- Convierte una cadena de texto en un árbol GML.
\end_layout

\begin_layout Standard

\noun on
escribirGML (valor): Texto
\noun default
 -- Convierte un árbol GML en una cadena de texto
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="3cm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="11cm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Atributos
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Utilidad
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Lista de pares clave--valor en un árbol GML
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Definición
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Standard

type Atributos = [(String, Valor)]
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Operaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="3cm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="11cm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Vector
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Utilidad
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Coordenadas de un punto en el espacio euclídeo de tres dimensiones.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Atributos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\noun on
x: Real
\noun default
 -- Valor de la coordenada X.
\end_layout

\begin_layout Standard

\noun on
y: Real
\noun default
 -- Valor de la coordenada Y.
\end_layout

\begin_layout Standard

\noun on
z: Real
\noun default
 -- Valor de la coordenada Z.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Operaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\noun on
sumar (v1, v2): Vector
\noun default
 -- Devuelve un vector cuyas coordenadas son la suma de 
\emph on
v1
\emph default
 y 
\emph on
v2
\emph default
.
\end_layout

\begin_layout Standard

\noun on
distancia_vv (v1, v2): Real
\noun default
 -- Calcula la distancia entre dos vectores.
\end_layout

\begin_layout Standard

\noun on
distancia_lv (v0, v1, v2): Real
\noun default
 -- Calcula la distancia entre el vector 
\emph on
v0
\emph default
 y la línea definida por 
\emph on
v1
\emph default
 y 
\emph on
v2
\emph default
.
\end_layout

\begin_layout Standard

\noun on
distancia_pv (v, n, p): Real
\noun default
 -- Calcula la distancia entre el vector 
\emph on
v
\emph default
 y el plano de centro 
\emph on
n
\emph default
 y normal 
\emph on
p
\emph default
.
\end_layout

\begin_layout Standard

\noun on
toGML (vector): Valor
\noun default
 -- Convierte un vector a su representación en GML.
\end_layout

\begin_layout Standard

\noun on
fromGML (ast): Vector
\noun default
 -- Extrae un vector de un árbol sintáctico GML.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="3cm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="11cm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Router
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Utilidad
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Tipo enumerado que define los diferentes tipos de routers posibles.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Definición
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Standard

data Router = R4
\end_layout

\begin_layout Standard

            | R6
\end_layout

\begin_layout Standard

            | Rd
\end_layout

\begin_layout Standard

            | R4_td
\end_layout

\begin_layout Standard

            | Rd_td
\end_layout

\begin_layout Standard

            | Rd_tp
\end_layout

\begin_layout Standard

            | Rd_tptd
\end_layout

\begin_layout Standard

            | Z4
\end_layout

\begin_layout Standard

            | Z6
\end_layout

\begin_layout Standard

            | Zd
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Operaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="3cm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="11cm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nodo
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Utilidad
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Representación de un nodo del grafo (router).
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Atributos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\noun on
ident: Entero
\noun default
 -- Identificador del nodo.
\end_layout

\begin_layout Standard

\noun on
protocolo: Router
\noun default
 -- Tipo de protocolo que soporta el nodo.
\end_layout

\begin_layout Standard

\noun on
posicion: Vector
\noun default
 -- Posición del nodo en el espacio.
\end_layout

\begin_layout Standard

\noun on
nombre: Texto
\noun default
 -- Nombre del nodo.
\end_layout

\begin_layout Standard

\noun on
etiqueta: Texto
\noun default
 -- Etiqueta que se mostrará si el nodo no tiene nombre.
\end_layout

\begin_layout Standard

\noun on
atr_nodo: Atributos
\noun default
 -- Resto de atributos presentes en el fichero GML y no procesados por nuestra
 aplicación.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Operaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\noun on
toGML (nodo): Valor
\noun default
 -- Convierte un nodo a su representación en GML.
\end_layout

\begin_layout Standard

\noun on
fromGML (ast): Nodo
\noun default
 -- Extrae un nodo de un árbol sintáctico GML.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="3cm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="11cm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Arco
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Utilidad
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Representación de un arco entre dos nodos del grafo.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Atributos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\noun on
origen: Entero
\noun default
 -- Nodo inicial del arco.
\end_layout

\begin_layout Standard

\noun on
destino: Entero
\noun default
 -- Nodo final del arco.
\end_layout

\begin_layout Standard

\noun on
latencia: Real
\noun default
 -- Coste por latencia del arco.
\end_layout

\begin_layout Standard

\noun on
anchoBanda: Real
\noun default
 -- Coste por ancho de banda del arco.
\end_layout

\begin_layout Standard

\noun on
metrica: Real
\noun default
 -- Coste definido por el usuario.
\end_layout

\begin_layout Standard

\noun on
atr_arco
\noun default
 -- Resto de atributos presentes en el fichero GML y no procesados por nuestra
 aplicación.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Operaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\noun on
toGML (arco): Valor
\noun default
 -- Convierte un arco a su representación en GML.
\end_layout

\begin_layout Standard

\noun on
fromGML (ast): Arco
\noun default
 -- Extrae un arco de un árbol sintáctico GML.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="3cm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="11cm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Grafo
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Utilidad
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Representación en memoria de una topología.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Atributos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\noun on
nodos: Map Entero Nodo
\noun default
 -- Array asociativo de nodos, ordenados por identificador.
\end_layout

\begin_layout Standard

\noun on
arcos: Map Entero [Arco]
\noun default
 -- Array asociativo de arcos, ordenados por identificador del nodo origen.
\end_layout

\begin_layout Standard

\noun on
dirigido: Booleano
\noun default
 -- Indica si el grafo es dirigido o no.
\end_layout

\begin_layout Standard

\noun on
atr_grafo: Atributos
\noun default
 -- Resto de atributos presentes en el fichero GML y no procesados por nuestra
 aplicación.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Operaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\noun on
vacio: Grafo
\noun default
 -- Crea un grafo vacío.
\end_layout

\begin_layout Standard

\noun on
insertarNodo (grafo, nodo): Grafo
\noun default
 -- Añade un nodo a un grafo.
\end_layout

\begin_layout Standard

\noun on
insertarArco (grafo, arco): Grafo
\noun default
 -- Añade un arco a un grafo.
\end_layout

\begin_layout Standard

\noun on
borrarNodo (grafo, id): Grafo
\noun default
 -- Borra el nodo cuyo identificador es 
\emph on
id
\emph default
.
\end_layout

\begin_layout Standard

\noun on
borrarArco (grafo, origen, destino): Grafo
\noun default
 -- Borra el arco que parte del nodo 
\emph on
origen
\emph default
 y llega a 
\emph on
destino
\emph default
.
\end_layout

\begin_layout Standard

\noun on
buscarNodo (grafo, vector): Nodo
\noun default
 -- Busca el nodo que se encuentra en la posición 
\emph on
vector
\emph default
.
\end_layout

\begin_layout Standard

\noun on
buscarArco (grafo, vector): Arco
\noun default
 -- Busca el arco que se encuentra en la posición 
\emph on
vector
\emph default
.
\end_layout

\begin_layout Standard

\noun on
buscarRutas (grafo, origen, destino, opciones): [[Entero]]
\noun default
 -- Busca todas las rutas existentes entre los nodos 
\emph on
origen
\emph default
 y 
\emph on
destino
\emph default
.
\end_layout

\begin_layout Standard

\noun on
toGML (grafo): Valor
\noun default
 -- Convierte un grafo a su representación en GML.
\end_layout

\begin_layout Standard

\noun on
fromGML (ast): Grafo
\noun default
 -- Extrae un grafo de un árbol sintáctico GML.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="3cm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="11cm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Aplicación
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Utilidad
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Tipo enumerado que define los diferentes tipos de aplicaciones existentes.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Definición
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Standard

data Aplicacion = A4
\end_layout

\begin_layout Standard

                | A6
\end_layout

\begin_layout Standard

                | Ad
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Operaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="3cm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="11cm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
NodoTerminal
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Utilidad
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Tipo enumerado que define los diferentes tipos de nodos terminales existentes.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Definición
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Standard

data NodoTerminal = N4
\end_layout

\begin_layout Standard

                  | N6
\end_layout

\begin_layout Standard

                  | Nd
\end_layout

\begin_layout Standard

                  | Nmap
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Operaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="3cm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="11cm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Conexión
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Utilidad
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Tipo enumerado que define los diferentes tipos de operadores de conexión
 existentes.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Definición
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Standard

data Conexion = Directa
\end_layout

\begin_layout Standard

              | OpD
\end_layout

\begin_layout Standard

              | Op4_td
\end_layout

\begin_layout Standard

              | OpD_td
\end_layout

\begin_layout Standard

              | OpD_tp
\end_layout

\begin_layout Standard

              | OpD_tptd
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Operaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="3cm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="11cm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Red
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Utilidad
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Representación de la red de distribución de un escenario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Definición
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Standard

type Red = [(Conexion, Router)]
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Operaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="3cm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="11cm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Escenario
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Utilidad
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Representación de un escenario de transición.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Definición
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Standard

type Escenario = (Aplicacion,
\end_layout

\begin_layout Standard

                  NodoTerminal,
\end_layout

\begin_layout Standard

                  Red,
\end_layout

\begin_layout Standard

                  NodoTerminal,
\end_layout

\begin_layout Standard

                  Aplicacion)
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Operaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="3cm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="11cm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
TipoCambio
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Utilidad
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Tipo enumerado que define los diferentes tipos de cambios que se pueden
 producir al aplicar una regla a un escenario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Definición
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Standard

data TipoCambio = ZZ_manual_4en6
\end_layout

\begin_layout Standard

                | ZZ_manual_6en4
\end_layout

\begin_layout Standard

                | ZZ_manual_udp
\end_layout

\begin_layout Standard

                ...
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Operaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="3cm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="11cm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Cambio
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Utilidad
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Representación de los cambios resultado de aplicar una regla a un escenario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Atributos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\noun on
tipo: TipoCambio
\noun default
 -- Regla aplicada.
\end_layout

\begin_layout Standard

\noun on
inicio: Entero
\noun default
 -- Posición del nodo a partir del cual se empieza a aplicar la regla.
\end_layout

\begin_layout Standard

\noun on
antes: Entero
\noun default
 -- Número de nodos a los que se aplica la regla.
\end_layout

\begin_layout Standard

\noun on
despues: Entero
\noun default
 -- Número de nodos después de aplicar la regla
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Operaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\noun on
mostrar (escenario, cambio)
\noun default
 -- Muestra en pantalla el resultado de aplicar un cambio a un escenario.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features islongtable="true">
<column alignment="left" valignment="top" leftline="true" width="3cm" special=">{\columncolor{lightgray}\centering}c">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="11cm">
<row topline="true" endhead="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nombre
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Solución
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Utilidad
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Representación de una solución resultado del proceso de búsqueda.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Atributos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\noun on
ruta: [Entero]
\noun default
 -- Lista de los identificadores de los nodos por los que pasa la ruta.
\end_layout

\begin_layout Standard

\noun on
inicial: Escenario
\noun default
 -- Escenario original, antes de aplicar ninguna regla.
\end_layout

\begin_layout Standard

\noun on
final: Escenario
\noun default
 -- Escenario resultante de aplicar las reglas.
\end_layout

\begin_layout Standard

\noun on
cambios: [Cambio]
\noun default
 -- Lista de reglas que se aplican para llegar al escenario final.
\end_layout

\begin_layout Standard

\noun on
coste_lat: Real
\noun default
 -- Coste de la solución por latencia.
\end_layout

\begin_layout Standard

\noun on
coste_bw: Real
\noun default
 -- Coste de la solución por ancho de banda.
\end_layout

\begin_layout Standard

\noun on
coste_met: Real
\noun default
 -- Coste de la solución por métrica definida por el usuario.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Operaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\noun on
buscarSoluciones (grafo, origen, destino, opciones): [Solucion]
\noun default
 -- Busca todas las soluciones posibles para conectar los nodos 
\emph on
origen
\emph default
 y 
\emph on
destino
\emph default
.
\end_layout

\begin_layout Standard

\noun on
calcularCoste (solucion): Solucion
\noun default
 -- Evalúa el coste de una solución.
\end_layout

\begin_layout Standard

\noun on
ordenar_lat (soluciones): [Solucion]
\noun default
 -- Ordena una lista de soluciones por latencia.
\end_layout

\begin_layout Standard

\noun on
ordenar_bw (soluciones): [Solucion]
\noun default
 -- Ordena una lista de soluciones por ancho de banda.
\end_layout

\begin_layout Standard

\noun on
ordenar_met (soluciones): [Solucion]
\noun default
 -- Ordena una lista de soluciones por métrica.
\end_layout

\begin_layout Standard

\noun on
mostrar (solucion)
\noun default
 -- Muestra una solución en pantalla.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Section
Diagrama de módulos
\end_layout

\begin_layout Standard
El programa se organiza en tres grandes bloques: gestión de topología, aplicació
n de reglas, e interfaz de usuario.
 El módulo principal se encargará de llamar a cada bloque según las acciones
 del usuario.
 La estructura de módulos resultante es la siguiente:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/21-modulos-principal.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Diagrama de módulos principal
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Itemize

\noun on
Topología
\noun default
: es el encargado de cargar y guardar ficheros GML, la edición de las topologías
, y el proceso de búsqueda de rutas.
\end_layout

\begin_layout Itemize

\noun on
Reglas
\noun default
: implementa la base de reglas con los mecanismos de transición, y el motor
 de búsqueda de soluciones.
\end_layout

\begin_layout Itemize

\noun on
Interfaz
\noun default
: se encarga de la interacción con el usuario.
\end_layout

\begin_layout Standard
El módulo 
\noun on
Topología
\noun default
 se divide en los siguientes submódulos:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/22-modulos-topologia.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Diagrama de módulos de la topología
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Itemize

\noun on
GML
\noun default
: conversión de los diferentes tipos de datos hacia y desde GML.
\end_layout

\begin_layout Itemize

\noun on
Grafo
\noun default
: definición e implementación del tipo de datos 
\emph on
Grafo
\emph default
, con todas sus operaciones.
\end_layout

\begin_layout Itemize

\noun on
Parser
\noun default
: conversión de texto a GML, y de GML a texto.
\end_layout

\begin_layout Itemize

\noun on
Rutas
\noun default
: algoritmos de búsqueda y poda de rutas, para la obtención de escenarios
 lineales a partir del grafo.
\end_layout

\begin_layout Itemize

\noun on
Test
\noun default
: batería de pruebas de los diferentes submódulos que componen el módulo
 
\noun on
Topología
\noun default
.
\end_layout

\begin_layout Itemize

\noun on
Tipos
\noun default
: definición de los tipos de datos 
\emph on
Valor
\emph default
, 
\emph on
Vector
\emph default
, 
\emph on
Router
\emph default
, 
\emph on
Nodo
\emph default
 y 
\emph on
Arco
\emph default
.
\end_layout

\begin_layout Standard
El módulo 
\noun on
Reglas
\noun default
 se divide en los siguientes submódulos:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/23-modulos-reglas.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Diagrama de módulos de la base de reglas
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Itemize

\noun on
Canonización
\noun default
: implementación de las reglas de canonización.
\end_layout

\begin_layout Itemize

\noun on
Formalización
\noun default
: implementación de las reglas de creación de zonas y establecimiento de
 los operadores de conexión.
\end_layout

\begin_layout Itemize

\noun on
Mecanismos
\noun default
: implementación de las reglas de modificación sobre redes finales.
 
\end_layout

\begin_layout Itemize

\noun on
Soluciones
\noun default
: algoritmo de conversión de rutas a escenarios de transición, búsqueda
 de soluciones para un escenario, y evaluación y ordenación de soluciones.
\end_layout

\begin_layout Itemize

\noun on
Test
\noun default
: batería de pruebas de los diferentes submódulos que componen el módulo
 
\noun on
Reglas
\noun default
.
\end_layout

\begin_layout Itemize

\noun on
Tipos
\noun default
: definición de los tipos de datos 
\emph on
Aplicación
\emph default
, 
\emph on
NodoTerminal
\emph default
, 
\emph on
Conexión
\emph default
, 
\emph on
Red
\emph default
, 
\emph on
Escenario
\emph default
, 
\emph on
TipoCambio
\emph default
, 
\emph on
Cambio
\emph default
 y 
\emph on
Solución
\emph default
.
\end_layout

\begin_layout Itemize

\noun on
Túneles
\noun default
: implementación de las reglas de creación de túneles.
\end_layout

\begin_layout Standard
El módulo 
\noun on
Interfaz
\noun default
 se divide en los siguientes submódulos:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/24-modulos-interfaz.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Diagrama de módulos de la interfaz
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Itemize

\noun on
Canvas
\noun default
: implementación del área de edición, con las operaciones necesarias para
 dibujar y manipular el grafo.
\end_layout

\begin_layout Itemize

\noun on
DlgAbrir
\noun default
: diálogo para cargar topologías.
\end_layout

\begin_layout Itemize

\noun on
DlgBúsqueda
\noun default
: diálogo para lanzar el proceso de búsqueda de soluciones.
\end_layout

\begin_layout Itemize

\noun on
DlgGuardar
\noun default
: diálogo para guardar topologías.
\end_layout

\begin_layout Itemize

\noun on
DlgMostrar
\noun default
: diálogo de presentación de los detalles de una solución.
\end_layout

\begin_layout Itemize

\noun on
DlgOpciones
\noun default
: diálogo de configuración de los costes de los mecanismos de transición.
\end_layout

\begin_layout Itemize

\noun on
Editor
\noun default
: implementación de la ventana de edición del programa.
 Se encarga de llamar al resto de diálogos.
\end_layout

\begin_layout Itemize

\noun on
Tipos
\noun default
: define los tipos de datos necesarios para guardar el estado de la interfaz.
\end_layout

\begin_layout Part
Implementación y pruebas
\end_layout

\begin_layout Chapter
Alternativas de implementación
\end_layout

\begin_layout Standard
Teniendo en cuenta las conclusiones alcanzadas en los capítulos anteriores,
 tenemos que considerar el lenguaje de programación a usar, buscando un
 equilibrio entre eficiencia y elegancia.
 Consideraremos cuatro opciones:
\end_layout

\begin_layout Itemize
La primera propuesta consiste en usar un lenguaje imperativo tradicional.
 Como ventajas una mayor familiaridad, mayor número de bibliotecas disponibles,
 y el hecho de que los compiladores de este tipo suelen estar más optimizados
 y generan código más eficiente.
 Como desventajas tenemos que los lenguajes imperativos que conocemos no
 suelen facilitar el uso de estructuras de datos complejas.
 Sin embargo, el principal problema es que el uso de este tipo de lenguajes
 va directamente contra los objetivos del proyecto, por lo que los descartamos
 sin más.
\end_layout

\begin_layout Itemize
Podríamos considerar el uso de un lenguaje lógico como Prolog.
 La estructura de nuestro proyecto (representación algebraica, no determinismo)
 se ajusta muy bien a las capacidades de este tipo de lenguajes.
 La principal limitación es que el rendimiento de las implementaciones que
 conocemos es muy inferior a otros tipos de lenguaje, y que no suelen ofrecer
 buenas capacidades para desarrollar aplicaciones enteras, sino que deben
 integrarse dentro de una aplicación mayor escrita en otro lenguaje.
\end_layout

\begin_layout Itemize
Otra posible opción sería utilizar un lenguaje funcional estricto, como
 OCaml o algún dialecto moderno de Lisp.
 Las principales ventajas de estos lenguajes es que ofrecen características
 como estructuras de datos algebraicas y reconocimiento de patrones, que
 simplifican mucho el código.
 Además, los compiladores son bastante maduros y generan código muy eficiente.
 Por contra, carecen de algunas de las características más interesantes
 del grupo que consideraremos a continuación.
\end_layout

\begin_layout Itemize
El último tipo de lenguaje que consideraremos es el de los lenguajes funcionales
 puros con evaluación perezosa, en especial Haskell.
 Estos lenguajes poseen la peculiaridad de que los valores no se evalúan
 hasta que no es completamente necesario, lo que permite tratar estructuras
 de datos potencialemente infinitas sin problemas.
 Esto mejora en gran medida la modularidad y permite separar mejor los distintos
 pasos de un algoritmo.
 Además, compiladores como GHC generan un código muy eficiente, aunque quizás
 no tanto como otros lenguajes.
 La desventaja es que estamos menos acostumbrados a su modelo de desarrollo.
 No obstante, será la opción que elijamos.
\end_layout

\begin_layout Chapter
Implementación
\end_layout

\begin_layout Section
Metodología de implementación
\end_layout

\begin_layout Standard
En este capítulo describiremos cómo se ha implementado el programa.
 Muchas veces no está clara cual es la mejor manera de implementar una función.
 La metodología que se ha seguido, siempre que han surgido dudas, ha sido
 proponer varias alternativas, evaluar cada una de ellas, y elegir la que
 parecía mas conveniente.
 A la hora de elegir una alternativa, se han tenido en cuenta varios parámetros:
\end_layout

\begin_layout Itemize
La eficiencia de la solución.
\end_layout

\begin_layout Itemize
Su elegancia y simplicidad.
\end_layout

\begin_layout Itemize
Su facilidad de integración con la base de código existente.
\end_layout

\begin_layout Itemize
Que fuera extensible, para que si en el futuro hay que añadir nuevas funcionalid
ades, se pueda hacer de manera sencilla.
\end_layout

\begin_layout Standard
De esta manera, se ha intentado alcanzar un equilibrio óptimo entre los
 diferentes criterios.
 En las siguientes secciones se expondrán las situaciones que se han ido
 encontrando durante la implementación de los diferentes módulos vistos
 en la sección 10.6.
\end_layout

\begin_layout Section
Módulo Topologías
\end_layout

\begin_layout Standard
Para cargar los ficheros de grafos se pueden usar tres opciones:
\end_layout

\begin_layout Itemize
La más directa, y probablemente la que mayor rendimiento proporcione, es
 escribir el cargador manualmente.
 También es la más compleja, por lo que se descarta.
\end_layout

\begin_layout Itemize
Otra opción es usar Parsec
\begin_inset Foot
status open

\begin_layout Standard
http://legacy.cs.uu.nl/daan/download/parsec/parsec.html
\end_layout

\end_inset

, una biblioteca de combinadores que permite escribir analizadores sintácticos
 dentro del propio código en Haskell.
 Es muy ﬂexible y potente, y además tiene la ventaja de que no requiere
 herramientas externas, pero tiene dos desventajas: al combinar el análisis
 léxico y sintáctico en una sola pasada se puede complicar la gramática,
 y la compilación del código resultante es bastante lenta.
\end_layout

\begin_layout Itemize
La tercera opción es usar Alex
\begin_inset Foot
status open

\begin_layout Standard
http://www.haskell.org/alex/
\end_layout

\end_inset

 y Happy
\begin_inset Foot
status open

\begin_layout Standard
http://www.haskell.org/happy/
\end_layout

\end_inset

, dos herramientas similares a Lex y Yacc.
\end_layout

\begin_layout Standard
Puesto que la gramática de GML es muy sencilla, y no interesa complicar
 el código más de lo necesario, se ha elegido usar Parsec.
 De esta manera se puede escribir el analizador sintático en un solo fichero
 de código autocontenido.
 También se ha implementado una función recíproca, que toma un árbol sintáctico
 y lo convierte a texto.
\end_layout

\begin_layout Standard
Para completar el proceso de carga, se ha definido la clase de tipos GML.
 Esta clase define dos funciones: 
\emph on
toGML
\emph default
, para convertir el tipo dado a un árbol sintáctico, y 
\emph on
fromGML
\emph default
, para convertir del árbol al tipo dado.
 Se han definido como pertenecientes a esta clase los tipos 
\emph on
Grafo
\emph default
, 
\emph on
Nodo
\emph default
, 
\emph on
Arco
\emph default
 y 
\emph on
Vector
\emph default
.
\end_layout

\begin_layout Standard
Una duda que surgió era como almacenar los grafos en memoria.
 Los nodos están indexados por el campo identificador, que debe ser único.
 Por tanto, se ha usado la estructura de datos 
\emph on
Map
\emph default
, que implementa un array asociativo, utilizando como clave el identificador.
 Para representar los arcos las dos opciones más comunes son usar una matriz
 de adyacencia, o asignar una lista de nodos adyacentes a cada nodo del
 grafo.
 Las matrices son más eficientes cuando el grado de conectividad es muy
 alto, siendo mejor usar listas en caso contrario.
 Para determinar cual era la solución óptima para nuestro problema, se hizo
 un estudio estadístico de varias topologías disponibles en Internet, obteniendo
 los resultados mostrados en la figura 12.1.
 El significado de cada campo es el siguiente:
\end_layout

\begin_layout Itemize
Fichero: topología analizada.
\end_layout

\begin_layout Itemize
Nodos: número total de nodos en la topología.
\end_layout

\begin_layout Itemize
Enlaces: número total de enlaces, sumando los enlaces de todos los nodos.
\end_layout

\begin_layout Itemize
Conectividad absoluta: número de arcos que salen de cada nodo.
\end_layout

\begin_layout Itemize
Conectividad relativa: porcentaje de nodos a los que se conecta cada nodo.
\end_layout

\begin_layout Itemize
Densidad: siendo 
\begin_inset Formula $A$
\end_inset

 el número total de arcos, y 
\begin_inset Formula $N$
\end_inset

 el número total de nodos, la densidad de un grafo no dirigido se define
 como
\begin_inset Formula \[
D=\frac{2\left|A\right|}{\left|V\right|\left(\left|V\right|-1\right)}\]

\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
Su valor mínimo es 0 para grafos inconexos, y 1 para grafos completamente
 conexos.
\end_layout

\end_deeper
\begin_layout Standard
Observamos que el grado de conectividad general es bajo.
 La conectividad media es de 5 enlaces por nodos.
 Hay algún nodo con una conectividad muy alta, pero suelen ser únicamente
 los routers que forman el núcleo de la red.
 Si usáramos una matriz, la densidad representaría el número de celdas que
 contendrían algún valor.
 Vemos que el valor más alto es del 18%, siendo bastante bajos en el resto
 de casos.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways true
status open

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="20" columns="10">
<features>
<column alignment="left" valignment="top" leftline="true" width="0">
<column alignment="right" valignment="top" leftline="true" width="0">
<column alignment="right" valignment="top" leftline="true" width="0">
<column alignment="right" valignment="top" leftline="true" width="0">
<column alignment="right" valignment="top" leftline="true" width="0">
<column alignment="right" valignment="top" leftline="true" width="0">
<column alignment="right" valignment="top" leftline="true" width="0">
<column alignment="right" valignment="top" leftline="true" width="0">
<column alignment="right" valignment="top" leftline="true" width="0">
<column alignment="right" valignment="top" leftline="true" rightline="true" width="0">
<row topline="true">
<cell multicolumn="1" alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Conectividad absoluta
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Conectividad relativa
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="right" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row bottomline="true">
<cell multicolumn="1" alignment="left" valignment="top" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Fichero
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="right" valignment="top" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Nodos
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="right" valignment="top" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Enlaces
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Mínima
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Media
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Máxima
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Mínima
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Media
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Máxima
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Densidad
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
abilene.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
11
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
14
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
2,55
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
18,18%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
23,14%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
27,27%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,1209
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
abovenet.6461.r0.cch.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
368
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
966
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
5,25
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
39
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,00%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
1,43%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
10,60%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0008
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
att.7018.r0.cch.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
731
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
2253
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
6,16
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
55
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,00%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,84%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
7,52%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0003
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
att.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
154
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
188
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
2,44
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
29
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,65%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
1,59%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
18,83%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0088
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
colt.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
43
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
59
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
2,74
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
8
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
2,33%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
6,38%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
18,61%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0251
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
cw.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
33
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
107
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
6,49
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
13
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
6,06%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
19,65%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
39,39%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0058
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
dfn.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
30
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
97
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
6,47
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
20
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
3,33%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
21,56%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
66,67%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0064
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
ebone.1755.r0.cch.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
161
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
307
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
3,81
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
17
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,00%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
2,37%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
10,56%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0034
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
exodus.3967.r0.cch.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
246
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
540
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
4,39
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
18
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,00%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
1,79%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
7,32%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0017
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
geant-20041125.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
23
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
37
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
3,22
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
6
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
8,70%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
13,99%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
26,09%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0345
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
geant.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
23
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
37
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
3,22
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
6
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
8,70%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
13,99%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
26,09%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0345
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
level3.3356.r0.cch.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
625
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
5298
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
16,95
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
169
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,00%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
2,71%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
27,04%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0000
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
sprint.1239.r0.cch.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
549
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
1593
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
5,8
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
51
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,00%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
1,06%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
9,29%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0004
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
switch.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
31
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
42
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
2,71
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
10
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
3,23%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
8,74%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
32,26%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0360
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
telekom.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
10
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
17
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
3,4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
7
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
20,00%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
34,00%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
70,00%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0735
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
tiscali.3257.r0.cch.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
248
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
405
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
3,27
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
31
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,00%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
1,32%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
12,50%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0030
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
verrio.2914.r0.cch.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
911
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
2217
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
4,87
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
46
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,00%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,53%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
5,05%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,0004
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
vsnl.4755.r0.cch.gml
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
12
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
12
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,00%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
16,67%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
33,33%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
0,1818
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Estadísticas de conectividad de varias topologías de ejemplo
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard

\newpage

\end_layout

\begin_layout Standard
A partir de los resultados anteriores se deduce que es mejor usar listas
 de adyacencia.
 Los arcos se indexan por el nodo de origen, guardando una lista de arcos
 para cada nodo.
 La estructura de datos resultante es la siguiente:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Standard

data Grafo = Grafo {
\end_layout

\begin_layout Standard

    nodos :: Map Int Nodo,
\end_layout

\begin_layout Standard

    arcos :: Map Int [Arco],
\end_layout

\begin_layout Standard

    dirigido :: Bool,
\end_layout

\begin_layout Standard

    atr_grafo :: Atributos }
\end_layout

\end_inset


\end_layout

\begin_layout Standard
El último aspecto a considerar en cuanto a las topologías es el proceso
 de búsqueda de rutas.
 Nuestra aplicación necesita considerar todas las rutas posibles, por lo
 que usaremos una recorrido en profundidad del grafo.
 Sin embargo, hay que tener en cuenta que una topología con varias decenas
 de nodos puede generar cientos de miles de rutas.
 Interesa por tanto implementar el algoritmo de tal manera que resulte fácil
 añadir criterios de poda, con el fin de reducir el número de resultados
 si el usuario lo considera oportuno.
\end_layout

\begin_layout Standard
El problema se ha modelado de la siguiente manera: partiendo del nodo inicial
 de la ruta, se desenrolla el grafo, convirtiéndolo en un árbol.
 A continuación, se poda el árbol, eliminando las rutas innecesarias.
 Por último, se hace un recorrido en profundidad del árbol, descartando
 todas aquellas rutas que llegan a un nodo que no es el deseado.
 Como Haskell utiliza evaluación perezosa, si una rama se poda nunca se
 llegarán a evaluar sus hijos.
 De esta manera podemos encadenar varios criterios de poda de manera sencilla.
\end_layout

\begin_layout Standard
Por ejemplo, dado el siguiente grafo, si quisieramos buscar todas las rutas
 entre el nodo 1 y el nodo 4, obtendríamos el siguiente árbol:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/26-desenrollar-grafo.png
	lyxscale 50
	scale 20

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Conversión de grafo a árbol
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Si la topología es grande, el número de rutas entre dos nodos, y por tanto
 el tiempo de procesamiento, puede dispararse.
 Para evitar que esto ocurra se puede hacer una poda de las rutas.
 Así reduciremos considerablemente el número de soluciones a considerar,
 a costa de perder algunas soluciones que podrían ser válidas.
 Se dejará que sea el usuario el que elija los criterios a usar.
\end_layout

\begin_layout Standard
Se han definido dos criterios de poda.
 El primero es un criterio por longitud.
 Dado un umbral 
\begin_inset Formula $k$
\end_inset

, si la longitud de la ruta más corta es 
\begin_inset Formula $L_{min}$
\end_inset

, este criterio eliminaría todas aquellas rutas cuya longitud fuera 
\begin_inset Formula $L_{ruta}>L_{min}+k$
\end_inset

.
 Su implementación es muy sencilla.
 En primer lugar, se hace un recorrido en anchura del árbol, buscando la
 posición del nodo de destino con menor profundidad.
 A continuación, se podan todas aquellas ramas que estén a una profundidad
 mayor que el mínimo mas el umbral.
\end_layout

\begin_layout Standard
El segundo criterio es mucho más agresivo.
 Lo que hace es que si dos nodos 
\begin_inset Formula $A$
\end_inset

 y 
\begin_inset Formula $B$
\end_inset

 son adyacentes, se descartan todas aquellas rutas que conecten 
\begin_inset Formula $A$
\end_inset

 y 
\begin_inset Formula $B$
\end_inset

 a través de uno o mas nodos intermedios.
 Su implementación también es sencilla.
 Se recorre el árbol en profundidad, manteniendo un conjunto con los nodos
 adyacentes a los visitados, y se podan todas aquellas ramas que se dirijan
 a uno de los nodos del conjunto.
\end_layout

\begin_layout Standard
Se ha implementado un algoritmo de preproceso opcional.
 Este algoritmo toma un grafo no dirigido, y lo transforma en un grafo dirigido,
 intentando eliminar los bucles existentes.
 De esta manera se fuerza a que todos los enlaces alejen la ruta del nodo
 origen y la acercen al destino.
 Por ejemplo, el resultado de aplicar el algoritmo al siguiente grafo, tomando
 como origen el nodo 1 y como destino el 6, sería el siguiente:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/27-grafo-dirigido.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Ejemplo de eliminación de bucles en grafos
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
El algoritmo funciona clasificando los nodos por distancia al origen, y
 eliminando los enlaces que llevan de un nodo a distancia 
\begin_inset Formula $d_{1}$
\end_inset

 a otro a distancia 
\begin_inset Formula $d_{2}<d_{1}$
\end_inset

.
 Para evitar que surjan conflictos cuando un camino se bifurca en varias
 subcaminos de longitudes diferentes que luego vuelven a converger, se recorre
 el grafo simultáneamente desde el destino.
 El esquema resultante, en pseudocódigo, es el siguiente:
\end_layout

\begin_layout Standard

\newpage

\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Standard

eliminar_bucles (grafo, origen, destino):
\end_layout

\begin_layout Standard

    F = {origen}
\end_layout

\begin_layout Standard

    B = {destino}
\end_layout

\begin_layout Standard

    visitados = {}
\end_layout

\begin_layout Standard

    acc = borrar_arcos (grafo)
\end_layout

\begin_layout Standard

    mientras (F != vacio) y (B != vacio):
\end_layout

\begin_layout Standard

        a = {arcos que salen de F} - visitados
\end_layout

\begin_layout Standard

        b = {arcos que llegan a B} - visitados
\end_layout

\begin_layout Standard

        acc = insertar_arcos (acc, a)
\end_layout

\begin_layout Standard

        acc = insertar_arcos (acc, b)
\end_layout

\begin_layout Standard

        tmp = visitados + F + B
\end_layout

\begin_layout Standard

        F = adyacentes(F) - visitados
\end_layout

\begin_layout Standard

        B = adyacentes(B) - visitados
\end_layout

\begin_layout Standard

        visitados = tmp
\end_layout

\begin_layout Standard

    devolver acc        
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Algoritmo de eliminación de bucles en grafos
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Módulo Reglas
\end_layout

\begin_layout Standard
Como ya vimos, la resolución de escenarios se compone de una serie de pasos.
 Un lenguaje con evaluación estricta obliga a complicar el código, fusionando
 los pasos, o se corre el riesgo de agotar la memoria.
 Sin embargo, el esquema de evaluación perezosa usado por Haskell resultará
 muy útil, ya que podemos implementar el algoritmo de manera directa, sabiendo
 que si una rama del árbol no se visita, nunca se llegará a evaluar
\end_layout

\begin_layout Standard
Los escenarios se representan como una tupla de cinco elementos:
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Standard

type Escenario = (Aplicacion,
\end_layout

\begin_layout Standard

                 NodoTerminal,
\end_layout

\begin_layout Standard

                 Red,
\end_layout

\begin_layout Standard

                 NodoTerminal,
\end_layout

\begin_layout Standard

                 Aplicacion)
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Donde 
\emph on
Aplicacion
\emph default
 y 
\emph on
NodoTerminal
\emph default
 son tipos enumerados con los posibles valores de los conjuntos 
\begin_inset Formula $\mathpzc{A}$
\end_inset

 y 
\begin_inset Formula $\mathpzc{N}$
\end_inset

, respectivamente.
 A su vez, 
\emph on
Red
\emph default
 es una lista de tuplas, que define los routers por los que pasa la conexión,
 y los operadores con los que se conectan:
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Standard

type Red = [(Operador, Router)]
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Donde 
\emph on
Router
\emph default
 es un tipo enumerado con los posibles valores del conjunto 
\begin_inset Formula $\mathpzc{R}$
\end_inset

.
 El campo 
\emph on
Operador
\emph default
 es un tipo enumerado con los posibles valores del conjunto 
\begin_inset Formula $\left\{ \leftrightarrow,\otimes_{4},\otimes_{d},\odot_{d},\boxtimes_{d},\boxtimes_{4}\right\} $
\end_inset

, y representa el operador con el que el router se conecta a su predecesor.
 Se usa esta representación porque es el formato que usan la mayoría de
 las reglas.
 El primer operador de una red no se usa para nada, pero por convención
 será siempre 
\begin_inset Formula $\leftrightarrow$
\end_inset

.
\end_layout

\begin_layout Standard
La búsqueda de soluciones funciona generando un árbol de búsqueda, podándolo,
 y recorriendo las hojas para recolectar los resultados.
 A partir de un escenario inicial, se le aplican todas las reglas posibles,
 lo que da como resultado una lista de nuevos escenarios.
 Estos escenarios se procesan de manera recursiva, hasta que ya no quedan
 más reglas por aplicar.
 Por tanto, tendremos un árbol 
\emph on
n-ario
\emph default
, donde los hijos de un rama se representarán con una lista.
 Las hojas del árbol serán nodos con la lista vacía.
 Además, necesitamos una manera de almacenar los cambios que se producen
 como resultado de la aplicación de las reglas.
 Se han considerado cuatro opciones:
\end_layout

\begin_layout Itemize
La primera opción sería guardar en cada nodo los cambios que se han aplicado
 para llegar del nodo padre al actual.
 Para obtener las soluciones habría que recorrer el árbol acumulando los
 cambios en una lista.
 La estructura resultante sería:
\end_layout

\begin_deeper
\begin_layout LyX-Code
data Arbol = Arbol Escenario Cambio [Arbol]
\end_layout

\end_deeper
\begin_layout Itemize
La estructura anterior tiene un defecto, y es que el nodo raíz no tiene
 padre, y por tanto tampoco cambios.
 Esto nos obligaría a introducir algún tipo de cambio nulo.
 Para evitar este problema podemos registrar los cambios que se producen
 para llegar del nodo actual a los nodos hijos:
\end_layout

\begin_deeper
\begin_layout LyX-Code
data Arbol = Arbol Escenario [(Cambio, Arbol)]
\end_layout

\end_deeper
\begin_layout Itemize
La tercera opción es guardar en cada nodo la lista completa de cambios.
 La longitud de esta lista sería proporcional al nivel del nodo en el árbol,
 siendo 0 para el nodo raíz.
 Los cambios se irían añadiendo al final de la lista.
\end_layout

\begin_deeper
\begin_layout LyX-Code
data Arbol = Arbol Escenario [Cambio] [Arbol]
\end_layout

\end_deeper
\begin_layout Itemize
La opción anterior tiene un gran defecto, y es que almacena mucha información
 redundante.
 Por ejemplo, si un nodo tiene una lista de cambios 
\begin_inset Formula $\left[c_{1},c_{2},c_{3}\ldots c_{n}\right]$
\end_inset

, sus hijos tendrían una lista 
\begin_inset Formula $\left[c_{1},c_{2},c_{3}\ldots c_{n},c_{n+1}\right]$
\end_inset

.
 Es decir, para cada nodo se repiten 
\begin_inset Formula $n$
\end_inset

 elementos, siendo 
\begin_inset Formula $n$
\end_inset

 la profundidad del nodo en el árbol.
 Por tanto, el espacio desperdiciado crece exponencialmente.
 Sin embargo, podemos aprovechar una característica de los lenguajes funcionales.
 Éstos suelen definir la listas de manera inductiva, lo que permite que
 varias listas compartan la misma cola.
 Si guardamos la lista de cambios en orden inverso, es decir, 
\begin_inset Formula $\left[c_{n}\ldots c_{3},c_{2},c_{1}\right]$
\end_inset

, los nodos hijos tendrían una lista 
\begin_inset Formula $\left[c_{n+1},c_{n}\ldots c_{3},c_{2},c_{1}\right]$
\end_inset

 y podrían compartir la lista de cambios del padre.
 La estructura resultante es la misma que en el caso anterior, sólo cambia
 la forma en la que se registran los cambios.
\end_layout

\begin_deeper
\begin_layout LyX-Code
data Arbol = Arbol Escenario [Cambio] [Arbol]
\end_layout

\end_deeper
\begin_layout Standard
Cada una de las soluciones anteriores tiene una serie de ventajas y desventajas.
 Las dos primeras son las más compactas, y también las más sencilla en cuanto
 a la generación del árbol, pero a costa de complicar el recorrido.
 Las dos últimas son el caso opuesto.
 La opción más equilibrada es la última, por lo que es la que hemos elegido.
 La estructura de datos resultante tiene el siguiente aspecto:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/29-arbol-busqueda.png
	lyxscale 50
	scale 25

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Estructura del árbol de búsqueda
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Un problema que surge a la hora de implementar la base de reglas es que
 algunas son de longitud variable.
 Para resolverlo, hemos usado HaRP
\begin_inset Foot
status open

\begin_layout Standard
http://www.cs.chalmers.se/~d00nibro/harp/
\end_layout

\end_inset

, una herramienta que permite usar expresiones regulares en patrones de
 listas.
 HaRP lee un fichero en Haskell con anotaciones especiales, y lo traduce
 a Haskell puro.
 El resultado es una combinación muy potente de expresividad y concisión.
 Su única desventaja es que utiliza una extensión del lenguaje llamada 
\emph on
pattern guards
\emph default
 que no todos los compiladores soportan.
\end_layout

\begin_layout Standard
Los patrones aparecen encerrados entre los símbolos 
\begin_inset Formula $\mathsf{[/\ldots/]}$
\end_inset

.
 Se pueden usar los operadores habituales en las expresiones regulares,
 como 
\begin_inset Formula $\star$
\end_inset

 para hacer concidir cero o más elementos, 
\begin_inset Formula $+$
\end_inset

 para uno o más elementos, 
\begin_inset Formula $?$
\end_inset

 para un elemento opcional, y 
\begin_inset Formula $|$
\end_inset

 para una alternativa entre dos elementos.
 Por ejemplo, la primera regla de canonización 
\begin_inset Formula $Z_{4}\left(\otimes_{d}Z_{4}\right)\star=Z_{4}$
\end_inset

, se implementaría así:
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Standard

canonizacion [/ (conexion,Z4) , (OpD, Z4)+! , xs@_* /]
\end_layout

\begin_layout Standard

    = (conexion,Z4) : xs
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Otro detalle a considerar es que algunas reglas no tienen en cuenta la posibilid
ad de tratar zonas del tipo 
\begin_inset Formula $Z_{d}$
\end_inset

.
 Esto podría provocar que no se pudiera aplicar ninguna regla, y por tanto
 resolver el escenario, aún cuando éste tuviera conectividad.
 Sin embargo, podemos observar que una zona dual puede comportarse tanto
 como una zona IPv4 o como una zona IPv6.
 Por tanto, si una regla encuentra un escenario con una zona dual y no es
 capaz de procesarlo, lo trata como si fueran dos escenarios, sustituyendo
 
\begin_inset Formula $Z_{d}$
\end_inset

 por 
\begin_inset Formula $Z_{4}$
\end_inset

 y 
\begin_inset Formula $Z_{6}$
\end_inset

.
\end_layout

\begin_layout Standard
El último paso de la búsqueda es la evaluación de costes.
 Para cada solución, se calcula por separado el coste de la propia red y
 el de los mecanismos de transición aplicados, y se suman.
 Al calcular el coste de los mecanismos sólo se tiene en cuenta el tipo
 de estos, pero no la longitud de los túneles.
 La razón de esto es que, al crear un túnel, los únicos nodos que están
 al tanto son los extremos, siendo su existencia transparente al resto de
 la red.
\end_layout

\begin_layout Standard
A continuación mostraremos el código relativo a la implementación de la
 base de reglas.
 Esto nos dará una idea de la validez de Haskell para este tipo de problemas,
 ya que, gracias al uso de 
\emph on
pattern matching
\emph default
, la representación obtenida es muy compacta.
\end_layout

\begin_layout Subsection
Reglas de formalización
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Standard


\backslash
lstinputlisting[language=Haskell,basicstyle=
\backslash
footnotesize
\backslash
ttfamily,frame=l,numbers=left,numberstyle=
\backslash
footnotesize,stepnumber=5,numbersep=10pt]{Codigo/Formalizacion.hs.txt}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Reglas de canonización
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Standard


\backslash
lstinputlisting[language=Haskell,basicstyle=
\backslash
footnotesize
\backslash
ttfamily,frame=l,numbers=left,numberstyle=
\backslash
footnotesize,stepnumber=5,numbersep=10pt]{Codigo/Canonizacion.hs.txt}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Reglas de creación de túneles
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Standard


\backslash
lstinputlisting[language=Haskell,basicstyle=
\backslash
footnotesize
\backslash
ttfamily,frame=l,numbers=left,numberstyle=
\backslash
footnotesize,stepnumber=5,numbersep=10pt]{Codigo/Tuneles.hs.txt}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Modificaciones sobre redes finales
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Standard


\backslash
lstinputlisting[language=Haskell,basicstyle=
\backslash
footnotesize
\backslash
ttfamily,frame=l,numbers=left,numberstyle=
\backslash
footnotesize,stepnumber=5,numbersep=10pt]{Codigo/Mecanismos.hs.txt}
\end_layout

\end_inset


\end_layout

\begin_layout Section
Módulo Interfaz
\end_layout

\begin_layout Standard
Haskell ofrece múltiples posibilidades a la hora de crear interfaces de
 usuario, desde bibliotecas de muy alto nivel basadas en programación funcional
 reactiva, hasta bibliotecas de bajo nivel que permiten acceder a las funciones
 nativas del sistema operativo.
 Nosotros hemos considerado las cuatro bibliotecas de nivel medio más comunes
 en diversos lenguajes:
\end_layout

\begin_layout Itemize
Gtk2hs: biblioteca basada en Gtk+.
\end_layout

\begin_layout Itemize
HTk: bindings para Tcl/Tk.
\end_layout

\begin_layout Itemize
qtHaskell: bindings para Qt4.
\end_layout

\begin_layout Itemize
wxHaskell: biblioteca implementada encima de wxWidgets.
\end_layout

\begin_layout Standard
La única biblioteca que cumplía las condiciones de poder compilarse en la
 máquina de desarrollo, y disponer de una buena documentación, es Gtk2hs
\begin_inset Foot
status open

\begin_layout Standard
http://www.haskell.org/gtk2hs/
\end_layout

\end_inset

, por lo que ha sido nuestra decisión.
\end_layout

\begin_layout Standard
El modelo de desarrollo de Gtk2hs se basa en diseñar la interfaz con la
 herramienta Glade.
 La interfaz se guarda en un fichero XML, independiente del lenguaje de
 programación.
 Durante la ejecución, el programa carga el fichero XML, extrae los 
\emph on
widgets
\emph default
 que va a usar, define los manejadores de señal, y llama al bucle principal
 de Gtk+.
 Como tiene que interactuar con el mundo exterior, el código de la interfaz
 se define dentro de la mónada IO.
\end_layout

\begin_layout Standard
La interfaz resultante tiene un aspecto bastante atractivo.
 La ventana de edición principal se divide en tres partes.
 La parte izquierda contiene los controles de selección de modo, configuración
 del aspecto gráfico, zoom, e edición de los atributos de routers y enlaces.
 La parte central es el área de edición, donde se muestran los routers y
 los enlaces.
 La parte derecha es la lista de soluciones.
 Inicialmente estará vacía, y se rellenará cuando el usuario lance el proceso
 de búsqueda.
\end_layout

\begin_layout Standard

\newpage

\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/interfaz-captura1.png
	lyxscale 50
	scale 30

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Ventana de edición
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
El diálogo de configuración de costes permite al usuario establecer el coste
 asociado a cada mecanismo.
 Se divide en tres pestañas (latencia, ancho de banda, y métrica personalizada),
 dentro de cada cual hay un campo numérico para introducir el coste de cada
 tipo de mecanismo.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/interfaz-captura2.png
	lyxscale 50
	scale 50

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Diálogo de configuración de costes
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
El diálogo de búsqueda permite iniciar el proceso de resolución de escenarios.
 En primer lugar, el usuario debe configurar los parámetros del origen y
 el destino del escenario (router, tipo aplicación, y protocolo soportado
 por el nodo terminal).
 Además, el usuario puede decidir si usar algún criterio de poda.
 Los parámetros se guardarán para la siguiente vez.
 Cuando el usuario pulse el botón 
\emph on
Aceptar
\emph default
, se iniciará el proceso de búsqueda.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/interfaz-captura3.png
	lyxscale 50
	scale 50

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Diálogo de búsqueda
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Una vez realizada la búsqueda, el usuario puede consultar los detalles de
 alguna de las soluciones obtenidas.
 El diálogo de detalles muestra la ruta seguida, los costes de la solución,
 y los túneles que se han tenido que crear.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/interfaz-captura4.png
	lyxscale 50
	scale 50

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Ventana de detalles de una solución
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Chapter
Pruebas
\end_layout

\begin_layout Section
Metodología de pruebas
\end_layout

\begin_layout Standard
En este capítulo describiremos cómo se ha probado el programa.
 Las pruebas se han realizado en paralelo con la implementación.
 Así, cada vez que se creaba una nueva función, o se modificaba función
 existente, se probaba que su funcionamiento era correcto.
 Una de las ventajas de Haskell es que, al ser puras la mayoría de las funciones
, el resultado sólo depende de la entrada, por lo que se pueden probar de
 manera independiente sin tener en cuenta el orden de ejecución.
\end_layout

\begin_layout Standard
Se ha definido una batería de pruebas automáticas.
 Estas pruebas se encuentran en los módulos 
\noun on
test
\noun default
 de cada directorio.
 Se pueden ejecutar lanzando el programa con la opción 
\begin_inset Quotes sld
\end_inset

-test
\begin_inset Quotes srd
\end_inset

, de la siguiente manera:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Standard

$> ./migracion -test
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Por otro lado, se han creado una serie de escenarios de ejemplo, para probar
 que los resultados devueltos por la aplicación están dentro de lo esperado.
 La interfaz de usuario se ha probado manualmente, ya que al ser interactiva
 no se pueden automatizar las pruebas.
\end_layout

\begin_layout Section
Verificación con QuickCheck
\end_layout

\begin_layout Standard
QuickCheck es una herramienta de generación automática de baterías de prueba.
 Su funcionamiento básico consiste en definir propiedades que deben cumplir
 las funciones.
 Por ejemplo, si tenemos una función ordenada que devuelve un booleano indicando
 si una lista está ordenada, y una función insertar que añade un elemento
 a una lista ordenada manteniendo el orden, podríamos definir la siguiente
 propiedad:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Standard

prop_orden xs x = (ordenada xs) ==> ordenada (insertar x xs)
\end_layout

\begin_layout Standard

    where
\end_layout

\begin_layout Standard

    types = x :: Int
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Ejemplo de propiedad con QuickCheck
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Las propiedades se invocan llamando a la función quickCheck, que toma como
 parámetro la propiedad a veriﬁcar.
 En principio, genera 100 casos de prueba aleatorios.
 Si la propiedad se cumple para todos los casos, se considera que la prueba
 ha sido exitosa, mientras que si alguno de ellos falla, se muestra el caso
 que ha fallado.
 Por ejemplo, para veriﬁcar el ejemplo anterior, escribiríamos lo siguiente:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Standard

> quickCheck prop_orden
\end_layout

\begin_layout Standard

OK, passed 100 tests.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Ejemplo de uso de QuickCheck
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Hemos usado QuickCheck con dos objetivos.
 El primero ha sido validar el cargador de ficheros GML.
 Las pruebas consisten esencialmente en generar un grafo aleatorio, pasarlo
 a texto, volver a convertirlo a un grafo, y compararlo con el original.
 Si no son idénticos, es que algo ha ido mal.
 Este procedimiento ha permitido detectar fácilmente errores que de otra
 manera se nos hubieran escapado, como atributos que no se guardaban, u
 otros que se guardaban mal.
\end_layout

\begin_layout Standard
El segundo ha sido verificar propiedades genéricas de las reglas de transición.
 Se han definido las siguientes propiedades:
\end_layout

\begin_layout Itemize
La aplicación de una regla de transición siempre reduce el número de nodos
 de la red (o por lo menos lo mantiene igual).
\end_layout

\begin_layout Itemize
Dadas dos reglas de formalización o canonización, la aplicación de ambas
 es conmutativa.
\end_layout

\begin_layout Itemize
Tras la aplicación de las reglas de creación de zonas no puede ocurrir que
 haya dos zonas 
\begin_inset Formula $\left\{ Z_{4},Z_{6},Z_{d}\right\} $
\end_inset

 adyacentes del mismo tipo.
\end_layout

\begin_layout Section
Pruebas unitarias
\end_layout

\begin_layout Standard
A la hora de implementar el proceso de carga de topologías, se ha procurado
 tratar el mayor número posible de casos de error:
\end_layout

\begin_layout Itemize
Que el fichero de entrada no contenga grafos.
\end_layout

\begin_layout Itemize
Que un grafo no contenga nodos o arcos.
\end_layout

\begin_layout Itemize
Que un nodo no tenga identificador, o sea incorrecto.
\end_layout

\begin_layout Itemize
Que un arco no tenga origen o destino.
\end_layout

\begin_layout Itemize
Que el tipo de datos de algún campo básico sea incorrecto (por ejemplo,
 que el identificador no sea un número entero).
\end_layout

\begin_layout Itemize
Que los arcos unan nodos existentes.
\end_layout

\begin_layout Standard
Se han escrito varios ficheros GML para probar cada una de estas condiciones.
 Estos ficheros se encuentran en el directorio 
\emph on
ejemplos/pruebas
\emph default
.
\end_layout

\begin_layout Standard
Por otro lado, para cada regla de transición, se han definido todos los
 posibles escenarios que pueden ser procesados por esa regla, junto con
 la solución esperada.
 De esta manera se prueba que las reglas funcionan correctamente.
 Por ejemplo, el tercer operador de conexión se ha probado de la siguiente
 manera:
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\begin{array}{c}
\left.\begin{array}{l}
Z_{i}\leftrightarrow\left(Z_{d}\leftrightarrow\right)\star R_{d}^{t}\left(\leftrightarrow Z_{d}\right)\star\leftrightarrow Z_{j}=Z_{i}\odot_{d}Z_{j}\\
\textrm{donde}\; Z_{i},Z_{j}\in\left\{ Z_{4},Z_{6}\right\} \end{array}\right.\\
\Downarrow\\
Z_{4}\leftrightarrow R_{d}^{t}\leftrightarrow Z_{4}\\
Z_{4}\leftrightarrow R_{d}^{t}\leftrightarrow Z_{6}\\
Z_{6}\leftrightarrow R_{d}^{t}\leftrightarrow Z_{4}\\
Z_{6}\leftrightarrow R_{d}^{t}\leftrightarrow Z_{6}\\
Z_{4}\leftrightarrow R_{d}^{t}\leftrightarrow Z_{d}\leftrightarrow Z_{4}\\
Z_{4}\leftrightarrow Z_{d}\leftrightarrow R_{d}^{t}\leftrightarrow Z_{4}\\
Z_{4}\leftrightarrow Z_{d}\leftrightarrow R_{d}^{t}\leftrightarrow Z_{d}\leftrightarrow Z_{4}\end{array}\]

\end_inset


\end_layout

\begin_layout Standard
También se han escrito varias topologías de ejemplo sencillas, para probar
 el funcionamiento de los algoritmos de búsqueda de rutas.
 Además, se han implementado un conjunto de funciones de generación de topología
s comunes (lineal, anillo, estrella y malla), con el fin de poder generar
 casos de prueba con mayor comodidad.
\end_layout

\begin_layout Section
Escenarios de ejemplo
\end_layout

\begin_layout Standard
Se han tomado los escenarios de ejemplo del trabajo anterior.
 Estos escenarios prueban diversas situaciones comunes en redes reales.
 Se ha usado la misma tabla de costes para todos ellos:
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="13" columns="2">
<features>
<column alignment="left" valignment="top" leftline="true" width="0">
<column alignment="right" valignment="top" leftline="true" rightline="true" width="0">
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Mecanismo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Coste
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Dual Stack
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
20
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Mapped
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
10
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Broker de túneles
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
30
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Túnel DSTM
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
35
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Túnel ISATAP
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
40
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Túnel 6to4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
20
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Túnel Teredo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
30
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Túnel automático
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
30
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
NAT-PT
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
55
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Traducción SIIT
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
65
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Traducción SOCKS
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
70
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Traducción TRT
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
90
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\newpage

\end_layout

\begin_layout Standard
El primer escenario intenta establecer conectividad entre aplicaciones IPv6
 que se ejecutan sobre una red IPv4.
 Los parámetros son:
\end_layout

\begin_layout Itemize
NT1: router 1, nodo IPv4, aplicación IPv6.
\end_layout

\begin_layout Itemize
NT2: router 3, nodo dual, aplicación IPv6.
\end_layout

\begin_layout Standard
La herramienta genera las siguientes soluciones:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/32-captura.png
	lyxscale 50
	width 14cm

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Soluciones del escenario de ejemplo 1
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Podemos ver como la aplicación obtiene en primer lugar la ruta directa entre
 el origen y el destino.
 Este escenario es muy simple, ya que todos los routers son del mismo tipo,
 por lo que todas las soluciones obtenidas son similares.
 Aún así, la aplicación del primer nodo terminal es incompatible con éste,
 por lo que hay que instalar el mecanismo 
\emph on
Dual Stack
\emph default
.
 Además, como las aplicaciones son IPv6 y los routers intermedios IPv4,
 se instala el mecanismo 
\emph on
Mapped
\emph default
 en ambos nodos terminales.
\end_layout

\begin_layout Standard

\newpage

\end_layout

\begin_layout Standard
El segundo escenario intenta establecer conectividad entre aplicaciones
 IPv6 que se encuentran detrás de un NAT.
 Los parámetros son:
\end_layout

\begin_layout Itemize
NT1: router 1, nodo dual, aplicación IPv6.
\end_layout

\begin_layout Itemize
NT2: router 8, nodo dual, aplicación IPv6.
\end_layout

\begin_layout Standard
La herramienta genera las siguientes soluciones:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/33-captura.png
	lyxscale 50
	width 14cm

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Soluciones del escenario de ejemplo 2
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Vemos como la aplicación toma la ruta directa.
 En este caso hay routers de diferentes tipos, por lo que se tienen que
 crear túneles, lo que se refleja en los costes obtenidos.
 En concreto, el segundo router usa NAT, por lo que hay que usar un túnel
 IPv6 dentro de UDP IPv4.
\end_layout

\begin_layout Standard

\newpage

\end_layout

\begin_layout Standard
El tercer escenario intenta establecer conectividad entre aplicaciones IPv4
 e IPv6 sobre una red heterogénea.
 Los parámetros son:
\end_layout

\begin_layout Itemize
NT1: router 1, nodo dual, aplicación IPv4.
\end_layout

\begin_layout Itemize
NT2: router 7, nodo IPv6, aplicación IPv6.
\end_layout

\begin_layout Standard
La herramienta genera las siguientes soluciones:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/34-captura.png
	lyxscale 50
	width 14cm

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Soluciones del escenario de ejemplo 3
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
En este escenario podemos observar una situación interesante.
 La ruta menos costosa es la más larga.
 Esto se debe a que todos los routers son del mismo tipo, por lo que no
 hace falta crear túneles.
 Sin embargo, la aplicación que se ejecuta en el segundo nodo terminal es
 incompatible con su router, por lo que hará falta instalar los mecanismos
 
\emph on
Dual Stack
\emph default
 y 
\emph on
Mapped
\emph default
 en el nodo.
\end_layout

\begin_layout Standard

\newpage

\end_layout

\begin_layout Standard
El cuarto escenario intenta establecer conectividad entre aplicaciones IPv4
 sobre una red compleja, formada por routers de varios tipos.
 Los parámetros son:
\end_layout

\begin_layout Itemize
NT1: router 1, nodo dual, aplicación IPv4.
\end_layout

\begin_layout Itemize
NT2: router 5, nodo dual, aplicación IPv4.
\end_layout

\begin_layout Standard
La herramienta genera las siguientes soluciones:
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Graphics
	filename Imágenes/35-captura.png
	lyxscale 50
	width 14cm

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Caption

\begin_layout Standard
Soluciones del escenario de ejemplo 4
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Al ser un escenario más complejo, el número de soluciones encontradas es
 muchísimo mayor que en los otros casos.
 La aplicación devuelve en primer lugar la ruta más corta, ya que al permitir
 todos los routers el paso de tráfico IPv4, no requiere la creación de ningún
 túnel.
 El resto de soluciones implican establecer túneles o usar el mecanismo
 
\emph on
Mapped
\emph default
.
 No hace falta instalar el mecanismo 
\emph on
Dual Stack
\emph default
, ya que los nodos terminales ya son duales.
 Hay que tener en cuenta que no todas las soluciones encontradas tienen
 sentido; por ejemplo, las soluciones más caras implican establecer hasta
 cuatro túneles anidados.
 Esto es algo inevitable en un escenario que combina routers de diversos
 tipos.
\end_layout

\begin_layout Part
Conclusiones
\end_layout

\begin_layout Chapter*
Conclusiones finales
\end_layout

\begin_layout Standard
Como hemos visto, el proceso de migración de IPv4 a IPv6 es largo y complejo,
 pero imprescindible.
 Por suerte, contamos con una amplia variedad de mecanismos de transición,
 capaces de adaptarse a todas las situaciones que se puedan presentar.
 Son muchos los proyectos abiertos entorno a la implantación de IPv6, aunque
 por desgracia ninguno ha llegado aún al usuario doméstico.
 En cualquier caso, el estudio de las diferentes estrategias de transición
 es sumamente importante, ya que es sólo cuestión de tiempo que empiecen
 a ser inevitables.
\end_layout

\begin_layout Standard
Nuestro estudio no ha profundizado en el funcionamiento de cada mecanismo
 de transición, sólo en su dominio de aplicación.
 En este sentido, la metodología MENINA ha resultado fundamental.
 Al proporcionar un modelo algebraico del problema, nos ha permitido alcanzar
 un mayor nivel de abstracción con el que tratar el problema de manera automátic
a.
\end_layout

\begin_layout Standard
Hemos tenido que desarrollar algunos algoritmos, como la búsqueda de rutas
 en grafos o la resolución de escenarios.
 Aunque estos algoritmos están muy estudiados, hemos intentado darles un
 nuevo enfoque aprovechando las capacidades de los lenguajes funcionales.
 Se ha procurado que la implementación sea lo más clara y modular posible,
 para que de esta manera, si en un futuro hay que añadir nuevas capacidades
 a la aplicación, no suponga ningún reto.
\end_layout

\begin_layout Standard
Haskell se ha mostrado como un lenguaje perfectamente capaz para el desarrollo
 de aplicaciones complejas.
 En especial, la evaluación perezosa resulta muy útil en la resolución de
 problemas de búsqueda, ya que permite modularizar mejor el código.
 Por otro lado, las capacidades de manipulación de tipos de datos complejos
 permiten rivalizar con la expresividad de los modernos lenguajes interpretados,
 pero con la eficiencia de un lenguaje compilado.
\end_layout

\begin_layout Standard
Las herramientas proporcionadas por Haskell también han demostrado ser de
 gran ayuda.
 QuickCheck nos ha permitido probar de manera sencilla el código, encontrando
 situaciones que hubieran sido muy difíciles de descubrir con una batería
 de pruebas escrita a mano.
 Parsec nos ha ayudado a implementar el analizador léxico de manera compacta
 y legible.
 Es uno de los mejores ejemplos de la potencia de los lenguajes funcionales.
 El uso de Gtk2hs ha sido sorprendentemente sencillo y productivo.
 A pesar de que Gtk+ es una biblioteca escrita en C, pensada para el paradigma
 imperativo, se adapta perfectamente a Haskell, y su uso se nos antoja más
 sencillo y limpio que en C.
 
\end_layout

\begin_layout Standard
Antes de enfrentarnos a este proyecto, nuestra experiencia con Haskell se
 limitaba a pequeños programas en modo texto.
 El desarrollo de un programa mucho más grande nos ha hecho descubrir nuevas
 técnicas y herramientas, algo que siempre resulta enriquecedor.
 Por tanto, y aunque sólo sea como motivo académico, el proyecto ha resultado
 muy satisfactorio.
\end_layout

\begin_layout Standard
Por último, sólo nos queda preguntarnos si recomendar Haskell para desarrollos
 futuros.
 La respuesta es que sí.
 Aunque la curva de aprendizaje inicial pueda ser muy dura para un programador
 acostumbrado al paradigma imperativo, adquirir soltura es sólo cuestión
 de práctica.
 El estudio de nuevos paradigmas es siempre interesante, ya que aporta nuevos
 enfoques a la hora de resolver problemas.
 Además, los lenguajes funcionales están empezando a adquirir popularidad
 últimamente, por lo que siempre conviene prepararse para el futuro.
 La única pega es que aún no disponen de herramientas y bibliotecas tan
 maduras como otros lenguajes.
\end_layout

\begin_layout Part
Bibliografía
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Standard

%
\backslash
backmatter
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset LatexCommand bibtex
options "amsalpha"
bibfiles "Bibliografia - Otros,Bibliografia - RFC"

\end_inset


\end_layout

\end_body
\end_document
